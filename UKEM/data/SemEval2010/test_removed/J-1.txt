generalized trade reduction mechanisms 
mira gonen 
electrical engineering dept 
tel aviv university 
ramat aviv israel 
gonenmir post tau ac il 
rica gonen 
yahoo research 
yahoo 
sunnyvale ca 
gonenr yahoo-inc com 
elan pavlov 
media lab 
mit 
cambridge ma 
elan mit edu 
abstract 
when designing a mechanism there are several desirable 
properties to maintain such as incentive compatibility ic 
individual rationality ir and budget balance bb it is 
well known that it is impossible for a mechanism to 
maximize social welfare whilst also being ir ic and bb 
there have been several attempts to circumvent by 
trading welfare for bb e g in domains such as double-sided 
auctions distributed markets and supply chain 
problems 
in this paper we provide a procedure called a 
generalized trade reduction gtr for single-value players which 
given an ir and ic mechanism outputs a mechanism which 
is ir ic and bb with a loss of welfare we bound the 
welfare achieved by our procedure for a wide range of 
domains in particular our results improve on existing 
solutions for problems such as double sided markets with 
homogenous goods distributed markets and several kinds of 
supply chains furthermore our solution provides 
budget balanced mechanisms for several open problems such as 
combinatorial double-sided auctions and distributed 
markets with strategic transportation edges 
categories and subject descriptors 
j social and behavioral sciences economics k 
 electronic commerce payment scheme 
general terms 
algorithms design economics theory 
 introduction 
when designing a mechanism there are several key 
properties that are desirable to maintain some of the more 
important ones are individual rationality ir - to make it 
worthwhile for all players to participate incentive 
compatibility ic - to give incentive to players to report their true 
value to the mechanism and budget balance bb - not to 
run the mechanism on a loss in many of the mechanisms 
the goal function that a mechanism designer attempts to 
maximize is the social welfare 
- the total benefit to society 
however it is well known from that any mechanism that 
maximizes social welfare while maintaining individual 
rationality and incentive compatibility runs a deficit perforce 
i e is not budget balanced 
of course for many applications of practical importance 
we lack the will and the capability to allow the mechanism 
to run a deficit and hence one must balance the payments 
made by the mechanism to maintain the bb property in 
an ir and ic mechanism it is necessary to compromise on 
the optimality of the social welfare 
 related work and specific solutions 
there have been several attempts to design budget 
balanced mechanisms for particular domains 
 for instance 
for double-sided auctions where both the buyers and sellers 
are strategic and the goods are homogeneous or when 
the goods are heterogeneous developed a 
mechanism that given valuations of buyers and sellers produces an 
allocation which are the trading players and a matching 
between buyers and sellers such that the mechanism is ir 
ic and bb while retaining most of the social welfare in the 
distributed markets problem and closely related problems 
goods are transported between geographic locations while 
incurring some constant cost for transportation 
 present mechanisms that approximate the social welfare 
while achieving an ir ic and bb mechanism for supply 
chain problems bounds the loss of social welfare that 
is necessary to inflict on the mechanism in order to achieve 
the desired combination of ir ic and bb 
despite the works discussed above the question of how to 
design a general mechanism that achieves ir ic and bb 
independently of the problem domain remains open 
furthermore there are several domains where the question of 
how to design an ir ic and bb mechanism which 
approx 
social welfare is also referred to as efficiency in the 
economics literature 
 
a brief reminder of all of the problems used in this paper 
can be found in appendix b 
 
imates the social welfare remains an open problem for 
example in the important domain of combinatorial 
doublesided auctions there is no known result that bounds the loss 
of social welfare needed to achieve budget balance another 
interesting example is the open question left by how can 
one bound the loss in social welfare that is needed to achieve 
budget balance in an ir and ic distributed market where 
the transportation edges are strategic naturally an answer 
to the bb distributed market with strategic edges has vast 
practical implications for example to transportation 
networks 
 our contribution 
in this paper we unify all the problems discussed above 
 both the solved as well as the open ones into one solution 
concept procedure the solution procedure called the 
generalized trade reduction gtr gtr accepts an ir and 
ic mechanism for single-valued players and outputs an ir 
ic and bb mechanism the output mechanism may suffer 
some welfare loss as a tradeoff of achieving bb there are 
problem instances in which no welfare loss is necessary but 
by there are problem instances in which there is welfare 
loss nevertheless for a wide class of problems we are able to 
bound the loss in welfare a particularly interesting case is 
one in which the input mechanism is an efficient allocation 
in addition to unifying many of the bb problems under 
a single solution concept the gtr procedure improves on 
existing results and solves several open problems in the 
literature the existing solutions our gtr procedure improves 
are homogeneous double-sided auctions distributed markets 
 and supply chain for the homogeneous 
doublesided auctions the gtr solution procedure improves on the 
well known solution by allowing for some cases of no 
trade reduction at all for the distributed markets and 
the supply chain the gtr solution procedure improves 
on the welfare losses bound i e allows one to achieve an 
ir ic and bb mechanism with smaller loss on the social 
welfare recently we also learned that the gtr procedure 
allows one to turn the model newly presented into a 
bb mechanism the open problems that are answered by 
gtr are distributed markets with strategic transportation 
edges and bounded paths combinatorial double-sided 
auctions with bounded size of the trading group i e a buyer and 
its bundle goods sellers combinatorial double-sided 
auctions with bounded number of possible trading groups 
in addition to the main contribution described above this 
paper also defines an important classification of problem 
domains we define class based domain and procurement class 
based domains the above definitions build on the 
different competition powers of players in a mechanisms called 
internal and external competition most of the studied 
problem domains are of the more restrictive procurement class 
domains and we believe that the more general setting will 
inspire more research 
 preliminaries 
 the model 
in this paper we design a method which given any ir 
and ic mechanism outputs a mechanism that maintains the 
ic and ir properties while achieving bb for some classes 
of mechanisms we bound the competitive approximation of 
welfare 
in our model there are n players divided into sets of trade 
the sets of trade are called procurement sets and are defined 
 following as follows 
definition a procurement set s is the smallest set 
of players that is required for trade to occur 
for example in a double-sided auction a procurement set 
is a pair consisting of a buyer and a seller in a 
combinatorial double-sided auction a procurement set can consist of a 
buyer and several sellers we mark the set of all 
procurement sets as s and assume that any allocation is a disjoint 
union of procurement sets 
each player i ≤ i ≤ n assigns a real value vi s to 
each possible procurement set s ∈ s namely vi s is the 
valuation of player i on procurement set s we assume that 
for each player i vi s is i s private value and that i is a single 
value player meaning that if vi sj then for every other 
sk k j either vi sk vi sj or vi sk for the 
ease of notation we will mark by vi the value of player i 
for any procurement set s such that vi s the set 
vi ⊆ r is the set of all possible valuations vi the set 
of all possible valuations of all the players is denoted by 
v v × × vn let v−i v vi− vi vn be the 
vector of valuations of all the players besides player i and 
let v−i be the set of all possible vectors v−i 
we denote by w s the value of a procurement set s ∈ 
s such that w s i∈s vi s f s where f is some 
function that assigns a constant to procurement sets for 
example f can be a non-strategic transportation cost in 
a distributed market problem let the size of a procurement 
set s be denoted as s 
it is assumed that any allocation is a disjoint union of 
procurement sets and therefore one can say that an 
allocation partitions the players into two sets a set of players that 
trade and a set of players that do not trade 
the paper denotes by o the set of possible partitions of an 
allocation a into procurement sets the value w a of an 
allocation a is the sum of the values of its most efficient 
partition to procurement sets that is w a maxs∈o s∈s w s 
this means that w a i∈a vi maxs∈o s∈s f s in 
the case where f is identically zero then w a i∈a vi 
an optimal partition s 
 a is a partition that maximizes 
the above sum for an allocation a let the value of a be 
w s 
 a note that the value can depend on f we say 
that the allocation a is efficient if there is no other allocation 
with a higher value the efficiency of the allocation ˆa is 
w ˆa 
w a 
 where a is a maximal valued allocation we assume 
w l o g that there are no two allocations with the same 
value 
 
a mechanism m defines an allocation and payment rules 
m r p a payment rule p decides i s payment pi where 
p is a function p v → rn 
 we work with mechanisms 
 
ties can be broken using the identities of the players 
 
in which players are required to report their values an 
example of such a mechanism is the vcg mechanism 
 the reported value bi ∈ vi of player i is called a 
bid and might be different from his private value vi let 
b ∈ v be the bids of all players an allocation rule r decides 
the allocation according to the reported values b ∈ v we 
make the standard assumption that players have quasi-linear 
utility so that when player i trades and pays pi then his 
utility is ui vi b−i vi − pi ui v ⇒ r we also assume 
that players are rational utility maximizers 
mechanism m is budget balanced bb if i∈n pi ≥ 
for any bids b ∈ v m is incentive-compatible ic in 
dominant strategies if for any player i value vi and any b−i ∈ v−i 
ui vi b−i ≥ ui b meaning that for any player i bidding vi 
maximized i s utility over all possible bids of the other 
players m is ex-post individually rational ir if for any 
player i value vi and any b−i ∈ v−i ui vi b−i ≥ 
meaning that for all possible bids of the other players player s i 
utility is non-negative note that since our mechanisms are 
normalized ir if a player does not trade then the player 
pays and has utility 
our algorithm presented in the next section employs a 
commonly used payment scheme the critical value payment 
scheme 
definition critical value payment scheme a 
mechanism uses a critical value payment scheme if given an 
allocation it charges players the minimum value they need to 
report to the mechanism in order to remain allocated 
we denote by ci the critical value price computed for player 
i 
 competitions and domains 
in this paper we present two generalized trade reduction 
algorithms the two algorithms are such that given an ir 
and ic mechanism m that solves a problem in some 
domain different domains are formally defined below turns 
m into ir ic and bb mechanism the algorithm presented 
finds procurement sets and removes them in iterations until 
the right conditions are fulfilled and the mechanism m is 
turned into a bb one the right conditions that need to 
be met are conditions of competition among the players in 
the given problem the following definitions leads us to the 
competition conditions we are looking for 
definition for any player i ∈ n we say that the 
set ri ⊆ n \ i is a replacing set of i if for any 
procurement set s ∈ s such that i ∈ s and ri∩s ∅ s\ i ∪ri ∈ s 
for example in a homogeneous double-sided auction 
 see problem b the replacement set for any buyer is simply 
any other buyer in an auction for transportation slots see 
problem b the replacement set of an edge is a path 
between the endpoints of the edge note that a set can replace 
a single player furthermore this relationship is transitive 
but not necessarily symmetric if i is a replacement set for 
j it is not necessarily true that j is a replacement set for i 
definition for any allocation a procurement set 
s ⊆ a and any i ∈ s we say ri a s is an internal 
competition for i with respect to a and s if ri a s ⊆ n \ a 
is a replacement set for i s t t s \ i ∪ ri a s ∈ s and 
w t ≥ 
definition for any allocation a and procurement 
set s ⊆ a and any i ∈ s we say that ei a s is an external 
competition for i with respect to a and s if ei a s ⊆ 
n \ a is a set s t t i ∪ ei a s ∈ s and w t ≥ 
we will assume without loss of generality that there are 
no ties between the values of any allocations and in 
particular there are no ties between values of procurement sets 
in case of ties these can be broken by using the identities 
of the players 
 so for any allocation a procurement set s 
and player i with external competition ei a s there exists 
exactly one set representing the maximally valued external 
competition 
definition a set x ⊂ n is closed under 
replacement if ∀i ∈ x then ri ⊂ x 
the following defines the required competition needed to 
maintain ic ir and bb the set x 
denotes this 
competition and is closed under replacement in the remainder of 
the paper we will assume that all of our sets which define 
competition in a mechanism are closed under replacement 
definition let x ⊂ n be a set that is closed under 
replacement we say that the mechanism is an x-external 
mechanism if 
 each player i ∈ x has an external competition 
 each player i ∈ x has an internal competition 
 for all players i it ∈ s \ x there exist 
ri a s rit a s 
such that for every iz iq riz a s ∩ riq a s ∅ 
 for every procurement set s ∈ s it holds that s∩x ∅ 
for general domains the choice of x can be crucial in 
fact even for the same domain the welfare and revenue can 
vary widely depending on how x is defined in appendix c 
we give an example where two possible choices of x yield 
greatly different results although we show that x should 
be chosen as small as possible we do not give any 
characterization of the optimality of x and this is an important open 
problem 
our two generalized trade reduction algorithms will 
ensure that for any allocation we have the desired types of 
competition so given a mechanism m that is ic and ir 
with allocation a the goal of the algorithms is to turn m 
into an x-external mechanism the two generalized trade 
reduction algorithms utilize a dividing function d which 
divides allocation a into disjoint procurement sets the 
algorithms order the procurements sets defined by d in order 
of increasing value for any procurement set there is a 
desired type of competition that depends only on the players 
who compose the procurement set the generalized trade 
reduction algorithms go over the procurement sets in order 
 from the smallest to the largest and remove any 
procurement set that does not have the desired competition when 
the set is reached the reduction of procurement sets will 
also be referred to as a trade reduction 
formally 
 
the details of how to break ties in allocations are standard 
and are omitted 
 
we present some tradeoffs between the different possible 
sets in appendix c 
 
definition d is a dividing function if for any 
allocation a and the players value vector v d divides the 
allocation into disjoint procurements sets s sk s t ∪sj 
a and for any player i with value vi if i ∈ sj and t ∈ sj s t 
j ≥ j then for any value vi vi of player i and division by 
d into s sk such that i ∈ sj 
and t ∈ sj 
then j j 
the two generalized trade reduction algorithms presented 
accept problems in different domains the formal domain 
definitions follow 
definition a domain is a class domain if for all 
i ∈ n and all replacement sets of i ri ri and for all 
i j i j if j ri then i rj 
intuitively this means that replacement sets are of size 
and the replacing relationship is symmetric 
we define the class of a player i as the set of the player s 
replacement sets and denote the class of player i by i it is 
important to note that since replacement sets are transitive 
relations and since class domains also impose symmetric 
relations on the replacement sets the class of a player i i is 
actually an equivalence class for i 
definition a domain is a procurement-class 
domain if the domain is a class-based domain and if for any 
player i such that there exists two procurement sets s s 
 not necessarily trading simultaneously in any allocation 
such that i ∈ s and i ∈ s then there exists a bijection 
f s → s such that for any j ∈ s f j is a replacement 
set for j in s 
example a homogeneous double-sided auction see 
problem b is a procurement-class based domain for the 
 homogeneous double-sided auction each procurement set 
consists of a buyer and a seller 
the double sided combinatorial auction consisting of a 
single multi-minded buyer and multiple sellers of heterogenous 
goods see problem b is a class based domain as we have 
a single buyer but not a procurement-class based domain 
in this case the buyer is a class and each set of sellers of 
the same good is a class however for a buyer there is no 
bijection between the different the procurement sets of the 
bundles of goods the buyer is interested in 
the spatial-distributed market with strategic edges see 
problem b is not a class-based domain and therefore not 
a procurement-class domain for example even for a fixed 
buyer and a fixed seller there are two different procurement 
sets consisting of different paths between the buyers and 
sellers 
the next sections present two algorithms gtr- and 
gtr gtr- accepts problems in procurement-class based 
domains its properties are proved with a general dividing 
function d the gtr- algorithm accepts problems in any 
domain we prove the gtr- s properties with specific 
dividing function d the function will be defined in section 
 since the dividing function can have a large practical 
impact on welfare and revenue the generality of gtr − 
 albeit in special domains can be an important practical 
consideration 
 procurement-class based 
domains 
this section focuses on the problems that are 
procurementclass based domains for this domain we present an 
algorithm called gtr- which given a mechanism that is ir 
and ic outputs a mechanism with reduced welfare which is 
ir ic and budget balanced 
although procurement class domains appear to be a 
relatively restricted model in fact many domains studied in the 
literature are procurement class domains 
example the following domains are procurement 
class domains 
 double-sided auctions with homogenous goods 
 problem b in this domain there are two classes the 
class of buyers and the class of sellers each 
procurement set consists of a single buyer and a single seller 
since every pair of buyer seller is a valid 
procurement set albeit possible with negative value this is a 
procurement class domain in this domain the constant 
assigned to the procurement sets is f 
 spatially distributed markets with non strategic edges 
 problem b like the double-sided auctions 
with homogenous goods their are two classes in the 
domain class of buyers and class of sellers with 
procurement sets consisting of single buyer and single seller 
the sellers and buyers are nodes in a graph and the 
function f is the distance of two nodes length of the 
edge which represent transport costs these costs 
differ between different buyer seller pairs 
 supply chains problem b the assumption 
of unique manufactory by can best be understood 
as turning general supply chains which need not be 
a procurement class domain into a procurement class 
domain 
 single minded combinatorial auctions problem b 
in this context each seller sells a single good and each 
buyer wants a set of goods the classes are the sets of 
sellers selling the same good as well as the buyers who 
desire the same bundle a procurement set consists of 
a single buyer as well as a set of sellers who can satisfy 
that buyer 
a definition of the mechanism follows 
definition the gtr- algorithm - given a 
mechanism m a set x ⊂ n which is closed under replacement 
a dividing function d and allocation a gtr- operates as 
follows 
 use the dividing function d to divide a into 
procurement sets s sk ∈ s 
 order the procurement sets by increasing value 
 for each sj starting from the lowest value procurement 
set 
if for every i ∈ sj ∩ x there is external competition 
and every i ∈ sj \ x there is internal competition then 
 
keep sj otherwise reduce the trade sj i e remove 
every i ∈ sj from the allocation 
 all trading players are charged the critical value for 
trading all non trading players are charged nothing 
remark the special case where x n has received 
attention under different guises in various special cases such 
as 
 the gtr- produces an x-external 
mechanism that is ir ic and bb 
in this subsection we prove that the gtr- algorithm 
produces an x-external mechanism that is ir ic and bb 
to prove gtr- s properties we make use of theorem 
which is a well known result e g theorem 
characterizes necessary and sufficient conditions for a 
mechanism for single value players to be ir and ic 
definition an allocation rule r is bid monotonic 
if for any player i any bids of the other players b−i ∈ v−i 
and any two possible bids of i ˆbi bi if i trades under the 
allocation rule r when reporting bi then i also trades when 
reporting ˆbi 
intuitively a bid monotonic allocation rule ensures that 
no trading player can become a non-trading player by 
improving his bid 
theorem an ir mechanism m with allocation rule 
r is ic if and only if r is bid monotonic and each trading 
player i pays his critical value ci pi ci 
so for normalized ir 
and ic mechanisms the allocation 
rule which is bid monotonic uniquely defines the critical 
values for all the players and thus the payments 
observation let m and m be two ir and ic 
mechanisms with the same allocation rule then m and 
m must have the same payment rule 
in the following we prove that the x-external gtr- 
algorithm produces a ir ic and bb mechanism but first a 
subsidiary lemma is shown 
lemma for procurement class domains if there 
exists a procurement set sj s t i ∈ sj and i has external 
competition than all t i t ∈ sj t has internal competition 
proof this follows from the definition of procurement 
class domains suppose that i has external competition 
then there exists a set of players ei a s such that i ∪ 
ei a s ∈ s let us denote by sj i ∪ ei a s since 
the domain is a procurement-class domain there exists a 
bijection function f between sj and sj f defines the required 
internal competition 
we start by proving ir and ic 
 
although the definition of an x-external mechanism 
requires that x intersects every procurement set this is not 
strictly necessary it is possible to define an x that does 
not intersect every possible procurement set in this case 
any procurement set s ∈ s s t s ∩ x ∅ will be reduced 
 
note that this is not true for mechanisms which are not 
normalized e g 
lemma for any x the x-external mechanism with 
a critical value pricing scheme produced by the gtr- 
algorithm is an ir and ic mechanism 
proof by the definition of a critical value pricing scheme 
 and the gtr- algorithm it follows that for every 
trading player i vi ≥ by the gtr- algorithm 
nontrading players i have a payment of zero thus for every 
player i value vi and any b−i ∈ v−i ui vi b−i ≥ 
meaning the produced x-external mechanism is ir 
as the x-external gtr- algorithm is ir and applies 
the critical value payment scheme according to theorem 
in order to show that the produced x-external mechanism 
with the critical value payment scheme is ic it remains to 
show that the produced mechanism s allocation rule is bid 
monotonic 
since gtr- orders the procurement sets according to 
increasing value if player i increases his bid from bi to bi bi 
then for any division function d of procurement sets the 
procurement set s containing i always appears later with 
the bid bi than with the bid bi so the likelihood of 
competition can only increase if i appears in later procurement 
sets this follows as gtr- can reduce more of the lower 
value procurement sets which will result in more non-trading 
players 
therefore if s has the required competition and is not 
reduced with bi then it will have the required competition 
with bi and will not be reduced 
finally we prove bb 
lemma for any x the x-external mechanism with 
critical value pricing scheme produced by the gtr- 
algorithm is a bb mechanism 
proof in order to show that the produced mechanism is 
bb we show that each procurement set that is not reduced 
has a positive budget i e the sum of payments is positive 
let s ∈ s be a procurement set that is not reduced let 
i ∈ s ∩ x then according to the definition of x-external 
definition and the gtr- algorithm i has an external 
competition assume w l o g 
that i is the only player with 
external competition in s and all other players j i j ∈ s 
have internal competition 
let a be the allocation after the procurement sets 
reduction by the gtr- algorithm according to the definition of 
external competition there exists a set ei a s ⊂ n \a 
such that i ∪ ei a s ∈ s and w i ∪ ei a s ≥ since 
w i∪ei a s vi w ei a s then vi ≥ −w ei a s 
by the critical value pricing scheme definition it means 
that if player i bids any less than −w ei a s he will 
not have external competition and therefore will be removed 
from trading thus i pays no less than min −w ei a s 
since all other players j ∈ s have internal competition their 
critical price can not be less than their maximal value 
internal competitor set i e max w rj a s if any player 
j ∈ s bids less then its maximal internal competitor set 
then he will not be in s but his maximal internal competitor 
 set will 
as a possible ei a s is ∪j∈srj a s one can bound the 
maximal value of i s external competition w ei a s by 
the sum of the maximal values of the rest of the players in s 
 
since the domain is a procurement class domain we can use 
lemma 
 
internal competition i e j∈s max w rj a s therefore 
min −w ei a s − j∈s max w rj a s as the f 
function is defined to be a positive constant we get that 
w s min −w ei a s j∈s max w rj a s f s ≥ 
 and thus s is at least budget balanced as each 
procurement set that is not reduced is at least budget balanced it 
follows that the produced x-external mechanism is bb 
the above two lemmas yield the following theorem 
theorem for procurement class domains for any 
x the x-external mechanism with critical value pricing 
scheme produced by the gtr- algorithm is an ir ic and 
bb mechanism 
remark the proof of the theorem yields bounds on 
the payments any player has to make to the mechanism 
 non procurement-class based 
domains 
the main reason that gtr- works for the 
procurementclass domains is that each player s possibility of being 
reduced is monotonic by the definition of a dividing function 
if a player i ∈ sj increases his value i can only appear in 
later procurement set sj and hence has a higher chance of 
having the desired competition 
therefore the chance of i lacking the requisite 
competition is decreased since the domain is a procurement class 
domain all other players t i t ∈ sj are also more likely 
to have competition since members of their class continue 
to appear before i and hence the likelihood that i will be 
reduced is decreased since by theorem a necessary and 
sufficient condition for the mechanism to be ic is 
monotonicity gtr- is ic for procurement-class domains 
however for domains that are not procurement class 
domains this does not suffice even if the domain is a class based 
domain although all members of sj continue to have the 
required competition it is possible that there are members of 
sj who do not have analogues in sj who do not have 
competition hence i might be reduced after increasing his value 
which by lemma means the mechanism is not ic 
we therefore define a different algorithm for non 
procurement class domains 
our modified algorithm requires a special dividing 
function in order to maintain the ic property although our 
restriction to this special dividing function appears 
stringent the dividing function we use is a generalization of the 
way that procurement sets are chosen in procurement-class 
based domains e g 
for ease of presentation in this section we assume that 
f 
the dividing function for general domains is defined by 
looking at all possible dividing functions for each 
dividing function di and each set of bids the gtr- algorithm 
yields a welfare that is a function of the bids and the 
dividing function 
 we denote by d the dividing function that 
divides the players into sets s t the welfare that gtr- 
finds is maximal 
 
 
note that for any particular di this might not be ic as 
gtr- is ic only for procurement class domains and not 
for general domains 
 
in appendix a we show how to calculate d in 
polynoformally 
let d be the set of all dividing functions d denote 
the welfare achieved by the mechanism produced by 
gtr when using dividing function d and a set of bids ¯b by 
gtr d ¯b denote by d ¯b argmaxd∈d gtr d ¯b 
for ease of presentation we denote d ¯b by d when the 
dependence on b is clear from the context 
remark d is an element of the set of dividing 
functions and therefore is a dividing function 
the second generalized trade reduction algorithm gtr- 
follows 
definition the gtr- algorithm - given 
mechanism m allocation a and a set x ⊂ n closed under 
replacement gtr- operates as follows 
 calculate the dividing function d as defined above 
 use the dividing function d to divide a into 
procurement sets s sk ∈ s 
 for each sj starting from the lowest value 
procurement set do the following 
if for i ∈ sj ∩ x there is an external competition and 
there is at most one i ∈ sj that does not have an 
internal competition then keep sj otherwise reduce the 
trade sj 
 all trading players are charged the critical value for 
trading all non trading players are charged zero 
 
we will prove that the mechanism produced by gtr- 
maintains the desired properties of ir ic and bb the 
following lemma shows that the gtr- produced mechanism 
is ir and ic 
lemma for any x the x-external mechanism with 
critical value pricing scheme produced by the gtr- 
algorithm is an ir and ic mechanism 
proof by theorem it suffices to prove that the 
produced mechanism by the gtr- algorithm is bid monotonic 
for every player i suppose that i was not reduced when 
bidding bi we need to prove that i will not be reduced when 
bidding bi bi denote by d d b the dividing function 
used by gtr- when i reported bi and the rest of the 
players reported b−i denote by d d bi b−i the dividing 
function used by gtr- when i reported bi and the rest of 
the players reported b−i denote by ¯d b a maximal 
dividing function that results in gtr- reducing i when 
reporting bi assume to the contrary that gtr- reduced i from 
the trade when i reported bi then gtr d bi b−i 
gtr ¯d b since d ∈ d it follows that gtr d b 
gtr ¯d b and therefore 
gtr d b gtr d bi b−i however according to 
the definition d ∈ d gtr- should not have reduced i 
mial time for procurement-class domains calculating d in 
polynomial time for general domains is an important open 
problem 
 
in the full version gtr- is extend such that it suffices 
that there exists some time in which the third step holds 
that extension is omitted from current version due to lack 
of space 
 
with the dividing function d and gained a greater welfare 
than gtr d b thus a contradiction arises and and 
gtr- does not reduce i from the trade when i reports 
bi bi 
lemma for any x the x-external mechanism with 
critical value pricing scheme produced by the gtr- 
algorithm is a bb mechanism 
proof this proof is similar to the proof of lemma 
combining the two lemmas above we get 
theorem for any x closed under replacement the 
x-external mechanism with critical value pricing scheme 
produced by the gtr- algorithm is an ir ic and bb 
mechanism 
appendix a shows how to calculate d for procurement 
class domains in polynomial time it is not generally known 
how to easily calculate d creating a general method for 
calculating the needed dividing function in polynomial time 
remains as an open question 
 bounding the welfare for 
procurementclass based domains and other general 
domains cases 
this section shows that in addition to producing a 
mechanism with the desired properties gtr- also produces a 
mechanism that maintains high welfare since the gtr- 
algorithm finds a budget balanced mechanism in arbitrary 
domains we are unable to bound the welfare for general 
cases however we can bound the welfare for 
procurementclass based domain and a wide variety of cases in general 
domains which includes many cases previously studied 
definition denote freqk i sj to indicate that a 
class i appears in a procurement set sj k times and there 
are k members of i in sj 
definition denote by freqk i s the maximal k 
s t there are k members of i in sj i e freqk i s 
maxsj ∈s freqk i sj 
let the set of equivalence classes in procurement class 
based domain mechanism be ec and ec be the number of 
those equivalence classes 
using the definition of class appearance frequency we can 
bound the welfare achieved by the gtr- produced 
mechanism for procurement class domains 
 
lemma for procurement class domains with f 
the number of procurement sets that are reduced by gtr- 
is at most ec times the maximal frequency of each class 
formally the maximal number of procurement sets that is 
reduced is o i ∈ec 
freqk i s 
proof let d be an arbitrary dividing function we 
note that by definition any procurement set sj will not be 
reduced if every i ∈ sj has both internal competition and 
external competition 
 
the welfare achieved by gtr- can also be bounded for 
the cases presented in this section however we focus on 
gtr- as it always achieves better welfare 
 
or gtr- 
every procurement set s that is reduced has at least one 
player i who has no competition once s is reduced all 
players of i have internal competition so by reducing the 
number of equivalence classes ec procurement sets we cover 
all the remaining players with internal competition 
if the maximal frequency of every equivalence classes was 
one then each remaining player t in procurement set sk also 
have external competition as all the internal competitors of 
players ¯t t ¯t ∈ sk are an external competition for t 
if we have freqk t s players from class t who were 
reduced then there is sufficient external competition for all 
players in sk 
therefore it suffices to reduce o i ∈ec 
freqk i s 
procurement sets in order to ensure that both the requisite 
internal and external competition exists 
the next theorem follows as an immediate corollary for 
lemma 
theorem given procurement-class based domain 
mechanisms with h procurement sets the efficiency is at least a 
 − o 
o i ∈ec 
freqk i s 
h 
 fraction of the optimal welfare 
the following corollaries are direct results of theorem 
all of these corollaries either improve prior results or achieve 
the same welfare as prior results 
corollary using gtr- for homogenous 
doublesided auctions problem b at most 
one procurement set 
must be reduced 
similarly for spatially distributed markets without 
strategic edges problem b using gtr- improves the result of 
 where a minimum cycle including a buyer and seller is 
reduced 
corollary using gtr- for spatially distributed 
markets without strategic edges at most one cycle per 
connected component 
will be reduced 
for supply chains problem b using gtr- improves 
the result of similar to corollary 
corollary using gtr- for supply chains at most 
one cycle per connected component 
will be reduced 
the following corollary solves the open problem at 
corollary for distributed markets on n nodes with 
strategic agents and paths of bounded length k problem b 
it suffices to remove at most k n procurements sets 
proof sketch these will create at least k spanning 
trees hence we can disjointly cover every remaining 
procurement set this improves the naive algorithm of reducing n 
procurement sets 
we provide results for two special cases of double sided 
ca with single value players problem b 
 
it is possible that no reductions will be made for instance 
when there is a non-trading player who is the requisite 
external competition 
 
similar to the double-sided auctions sometimes there will 
be enough competition without a reduction 
 
similar to double-sided auctions sometimes there will be 
enough competition without a reduction 
 
corollary if there are at most m different kinds of 
procurement sets it suffices to remove m procurement sets 
corollary if there are k types of goods and each 
procurement set consists of at most one of each type it 
suffices to remove at most k procurement sets 
 conclusions and future work 
in this paper we presented a general solution procedure 
called the generalized trade reduction gtr gtr 
accepts an ir and ic mechanism as an input and outputs 
mechanisms that are ir ic and bb the output 
mechanisms achieves welfare that is close to optimal for a wide 
range of domains 
the gtr procedure improves on existing results such 
as homogeneous double-sided auctions distributed markets 
and supply chains and solves several open problems such as 
distributed markets with strategic transportation edges and 
bounded paths combinatorial double-sided auctions with 
bounded size procurements sets and combinatorial 
doublesided auctions with a bounded number of procurement sets 
the question of the quality of welfare approximation both 
in general and in class domains that are not procurement 
class domains is an important and interesting open 
question we also leave open the question of upper bounds for 
the quality of approximation of welfare although we know 
that it is impossible to have ir ic and bb in an efficient 
mechanism it would be interesting to have an upper bound 
on the approximation to welfare achievable in an ir ic and 
bb mechanism 
the gtr procedure outputs a mechanism which depends 
on a set x ⊂ n another interesting question is what the 
quality of approximation is when x is chosen randomly from 
n before valuations are declared 
acknowledgements 
the authors wish to thank eva tardos et al for sharing their 
results with us the authors also wish to express their 
gratitude to the helpful comments of the anonymous reviewers 
 references 
 a archer and e tardos frugal path mechanisms 
symposium on discrete algorithms proceedings of the 
thirteenth annual acm-siam symposium on discrete 
algorithms 
 m babaioff and n nisan concurrent auctions 
across the supply chain journal of artificial 
intelligence research 
 babaioff m nisan n and pavlov e mechanisms for 
a spatially distributed market in proceedings of the 
 th acm conference on electronic commerce 
 m babaioff and w e walsh incentive-compatible 
budget-balanced yet highly efficient auctions for 
supply chain formation in proceedings of fourth 
acm conference on electronic commerce 
 y bartal r gonen and p la mura 
negotiation-range mechanisms exploring the limits of 
truthful efficient markets ec proceedings of the 
 th acm conference on electronic commerce 
 blume l easley d kleinberg j and tardos e 
trading networks with price-setting agents in 
proceedings of the th acm conference on electronic 
commerce 
 cavallo r optimal decision-making with minimal 
waste strategyproof redistribution of vcg payments 
in proc th int conf on auton agents and 
multi-agent systems aamas 
 e h clarke multipart pricing of public goods in 
journal public choice vol pp - 
 chu l y and shen zuo-jun m agent competition 
double auction mechanism management science vol 
 
 t groves incentives in teams in journal 
econometrica vol pp - 
 d lehmann l i o callaghan and y shoham 
truth revelation in approximately efficient 
combinatorial auctions in journal of acm 
vol pp - 
 leonard h elicitation of honest preferences for the 
assignment of individuals to positions journal of 
political econ 
 mcafee r p a dominant strategy double auction 
journal of economic theory vol - 
 a mu alem and n nisan truthful approximation 
mechanisms for restricted combinatorial auctions 
proceeding of aaai 
 myerson r b and satterthwaite m a efficient 
mechanisms for bilateral trading journal of 
economic theory vol - 
 roundy r chen r janakriraman g and zhang r 
q efficient auction mechanisms for supply chain 
procurement school of operations research and 
industrial engineering cornell university 
 w vickrey counterspeculation auctions and 
competitive sealed tenders in journal of finance 
 vol pp - 
appendix 
a calculating the 
optimal dividing function in 
procurement class domains in 
polynomial time 
in this section we show how to calculate the optimal 
dividing function for procurement class domains in polynomial 
time we first define a special dividing function d which 
is easy to calculate 
we define the dividing function d recursively as follows 
at stage j d divides the trading players into two sets aj 
and aj s t 
 aj is a procurement set 
 aj can be divided into a disjoint union of procurement 
sets 
 aj has minimal value from all possible such partitions 
define sj aj and recursively invoke d and aj until 
aj ∅ 
we now prove that d is the required dividing function 
lemma a for procurement class domains d d 
proof since the domain is a procurement class domain 
for every reduced procurement set the set of players which 
achieve competition either internal or external is fixed 
 
therefore the number of procurement sets which are 
reduced is independent of the dividing function d since 
the goal is to optimize welfare by reducing procurement 
sets with the least value we can optimize welfare this is 
achieved by d 
b problems and examples 
for completeness we present in this section the formal 
definitions of the problems that we use to illustrate our 
mechanism 
the first problem that we define is the double-sided 
auction with homogeneous goods 
problem b double-sided auction with 
homogeneous goods there are m sellers each of which have a 
single good all goods are identical and n buyers each of 
which are interested in receiving a good we denote the set 
of sellers by s and the set of buyers by b every player 
i ∈ s ∪ b both buyers and sellers has a value vi for the 
good in this model a procurement set consists of a single 
buyer and a single seller i e s the value of a 
procurement set is w s vj − vi where j ∈ b and i ∈ s i e 
the gain from trade 
if procurement sets are created by matching the highest 
value buyer to the lowest value seller then s 
deterministic trade reduction mechanism 
reduces the lowest value 
procurement set 
a related model is the pair related costs model 
problem b the pair related costs a double-sided 
auction b in which every pair of players i ∈ s and j ∈ b 
has a related cost f i j ≥ in order to trade f i j is a 
friction cost which should be minimized in order to maximize 
welfare 
 defines two budget-balanced mechanisms for this case 
one of s mechanisms has the set of buyers b as the x 
set for the x-external mechanism and the other has the set 
of sellers s as the x set for the x-external mechanism 
a similar model is the spatially distributed markets sdm 
model in which there is a graph imposing relationships 
on the cost 
problem b spatially distributed markets there 
is a graph g v e such that each v ∈ v has a set of 
sellers sv 
and a set of buyers bv 
 each edge e ∈ e has an 
associated cost which is the cost to transport a single unit 
of good along the edge the edges are non strategic but all 
players are strategic 
 defines a budget balanced mechanism for this case our 
paper improves on result 
another graph model is the model defined in 
problem b trading networks given a graph and 
buyers and sellers who are situated on nodes of the graph 
all trade must pass through a trader in this case 
procurement sets are of the form buyer seller trader where the 
possible sets of this form are defined by a graph 
the supply chain model can be seen as a 
generalization of in which procurement sets consist of the form 
 producer consumer trader traderk 
 
it is also possible to randomize the reduction of 
procurements sets so as to achieve an expected budget of zero similar 
to details are obvious and omitted 
problem b supply chain there is a set d of agents 
and a set g of goods and a graph g v e which defines 
possible trading relationships agents can require an input of 
multiple quantities of goods in order to output a single good 
the producer type of player can produce goods out of 
nothing the consumer has a valuation and an entire chain of 
interim traders is necessary to create a viable procurement 
set 
 consider unique manufacturing technology in which the 
graph defining possible relationships is a tree 
all of the above problems are procurement-class domains 
we also consider several problems which are not 
procurement class domains and generally the questions of budget 
balance have been left as open problems 
an open problem raised in is the sdm model in which 
edges are strategic 
problem b spatially distributed markets with 
strategic edges there is a graph g v e such that 
each v ∈ v has a set of sellers sv 
and a set of buyers 
bv 
 each edge e ∈ e has an associated cost which is the 
cost to transport a single unit of good along the edge each 
buyer seller and edge has a value for the trade i e all 
entities are strategic 
 left open the question of budget balanced 
mechanisms for supply chains where there is no unique 
manufacturing technology it is easy to see that this problem is not 
a procurement class domain 
another interesting problem is transport networks 
problem b transport networks a graph g v e 
where the edges are strategic players with costs and the goal 
is to find a minimum cost transportation route between a 
pair of privileged nodes source target ∈ v 
it was shown in that the efficient allocation can have 
a budget deficit that is linear in the number of players 
clearly this problem is not a procurement class domain and 
 left the question of a budget balanced mechanism open 
another non procurement-class based domain mechanism 
is the double-sided combinatorial auction ca with 
singlevalue players 
problem b double-sided combinatorial auction 
 ca with single value players there exists a set s of 
sellers each selling a single good there also exists a set b 
of buyers each interested in bundles of s 
 
there are two variants of this problem in the single 
minded case each buyer has a positive value for only a 
single subset whereas in the multi minded case each buyer can 
have multiple bundles with positive valuation but all of the 
values are the same in both cases we assume free disposal 
so that all bundles containing the desired bundle have the 
same value for the buyer 
we also consider problems that are non class domains 
problem b double-sided combinatorial auction 
 ca with general multi-minded players same as b 
but each buyer can have multiple bundles with positive 
valuation which are not necessarily the same 
 
we abuse notation and identify the seller with the good 
 
c comparing different choices 
of x 
the choice of x can have a large impact on the welfare 
 and revenue of the reduced mechanism and therefore the 
question arises of how one should choose the set x 
as the x-external mechanism is required to maintain ic 
clearly the choice of x can not depend on the value of 
the players as otherwise the reduced mechanism will not 
be truthful 
in this section we motivate the choice of small x sets for 
procurement class domains and give intuition that it may 
also be the case for some other domains 
we start by illustrating the effect of the set x over the 
welfare and revenue in the double-sided auction with 
homogeneous goods problem b similar examples can be 
constructed for the other problems defined is b 
the following example shows an effect on the welfare 
example c there are two buyers and two sellers and 
two non intersecting incomparable sets x buyers and 
y sellers if the values of the buyers are and 
the sellers are then the x-external mechanism will 
yield a gain from trade of and the y -external mechanism 
will yield a gain from trade of 
conversely if the buyers values are and the sellers 
are the x-external mechanism will yield a gain from 
trade of and and the y -external mechanism will yield a 
gain from trade of zero 
the example clearly shows that the difference between 
the x-external and the y -external mechanism is unbounded 
although as shown above the fraction each of them reduces 
can be bound and therefore the multiplicative ratio between 
them can be bound as a function of the number of trades 
on the revenue side we can not even bound the ratio as 
seen from the following example 
example c consider k buyers with value and k 
 sellers with value 
if x buyers then there is no need to reduce any trade 
and all of the buyer receive the good and pay k of 
the sellers sell and each of them receive this yields a net 
revenue of zero 
if y sellers then one must reduce a trade this 
means that all of the buyers pay while all of the 
sellers still receive the revenue is then k 
similarly an example can be constructed that yields much 
higher revenue for the x-external mechanism as compared 
to the y -external mechanism 
the above examples refer to sets x and y which do not 
intersect and are incomparable the following theorem 
compares the x-external and y -external mechanisms for 
procurement class domains where x is a subset of y 
theorem c for procurement class domains if x ⊂ 
y and for any s ∈ s s ∩ x ∩ y ∅ then 
 the efficiency of the x external mechanism in gtr- 
 and hence gtr- is at least that of the y -external 
mechanism 
 any winning player that wins in both the x-external 
and y -external mechanisms pays no less in the y -external 
than in the x-external and therefore the ratio of 
budget to welfare is no worse in the y external then the 
x-external 
proof for any dividing function d if there is a 
procurement set sj that is reduced in the x-external 
mechanism there are two possible reasons 
 a sj lacks external competition in the x-external 
mechanism in this case sj lacks external competition 
in the internal mechanism 
 b sj has all required external competitions in x-external 
in this case sj has all required internal 
competitions in y -external by lemma but might lack 
some external competition for sj ∪ y \ x and be 
reduced 
 this follows from the fact that for any ordering d any 
procurement set s that is reduced in the x-external 
mechanism is also reduced in the y -external 
mechanism therefore the critical value is no less in the 
yexternal mechanism than the x-external mechanism 
remark c for any two sets x y it is easy to build 
an example in which the x-external and y -external 
mechanisms reduce the same procurement sets so the inequality is 
weak 
theorem c shows an inequality in welfare as well as for 
payments but it is easy to construct an example in which 
the revenue can increase for x as compared to y as well as 
the opposite this suggests that in general we want x to 
be as small as possible although in some domains it is not 
possible to compare different x s 
 
