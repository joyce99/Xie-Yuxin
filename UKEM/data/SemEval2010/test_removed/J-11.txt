trading networks with price-setting agents 
larry blume 
dept of economics 
cornell university ithaca ny 
lb  cs cornell edu 
david easley 
dept of economics 
cornell university ithaca ny 
dae  cs cornell edu 
jon kleinberg 
dept of computer science 
cornell university ithaca ny 
kleinber cs cornell edu 
´eva tardos 
dept of computer science 
cornell university ithaca ny 
eva cs cornell edu 
abstract 
in a wide range of markets individual buyers and sellers often trade 
through intermediaries who determine prices via strategic 
considerations typically not all buyers and sellers have access to the 
same intermediaries and they trade at correspondingly different 
prices that reflect their relative amounts of power in the market 
we model this phenomenon using a game in which buyers 
sellers and traders engage in trade on a graph that represents the access 
each buyer and seller has to the traders in this model traders set 
prices strategically and then buyers and sellers react to the prices 
they are offered we show that the resulting game always has a 
subgame perfect nash equilibrium and that all equilibria lead to 
an efficient i e socially optimal allocation of goods we extend 
these results to a more general type of matching market such as one 
finds in the matching of job applicants and employers finally we 
consider how the profits obtained by the traders depend on the 
underlying graph - roughly a trader can command a positive profit if 
and only if it has an essential connection in the network structure 
thus providing a graph-theoretic basis for quantifying the amount 
of competition among traders 
our work differs from recent studies of how price is affected 
by network structure through our modeling of price-setting as a 
strategic activity carried out by a subset of agents in the system 
rather than studying prices set via competitive equilibrium or by a 
truthful mechanism 
categories and subject descriptors 
j social and behavioral sciences economics 
general terms 
economics theory 
 introduction 
in a range of settings where markets mediate the interactions of 
buyers and sellers one observes several recurring properties 
individual buyers and sellers often trade through intermediaries not all 
buyers and sellers have access to the same intermediaries and not 
all buyers and sellers trade at the same price one example of this 
setting is the trade of agricultural goods in developing countries 
given inadequate transportation networks and poor farmers 
limited access to capital many farmers have no alternative to trading 
with middlemen in inefficient local markets a developing country 
may have many such partially overlapping markets existing 
alongside modern efficient markets 
financial markets provide a different example of a setting with 
these general characteristics in these markets much of the trade 
between buyers and sellers is intermediated by a variety of agents 
ranging from brokers to market makers to electronic trading 
systems for many assets there is no one market trade in a single asset 
may occur simultaneously on the floor of an exchange on crossing 
networks on electronic exchanges and in markets in other 
countries some buyers and sellers have access to many or all of these 
trading venues others have access to only one or a few of them 
the price at which the asset trades may differ across these trading 
venues in fact there is no price as different traders pay or 
receive different prices in many settings there is also a gap between 
the price a buyer pays for an asset the ask price and the price a 
seller receives for the asset the bid price one of the most striking 
examples of this phenomenon occurs in the market for foreign 
exchange where there is an interbank market with restricted access 
and a retail market with much more open access spreads defined 
as the difference between bid and ask prices differ significantly 
across these markets even though the same asset is being traded in 
the two markets 
in this paper we develop a framework in which such phenomena 
emerge from a game-theoretic model of trade with buyers sellers 
and traders interacting on a network the edges of the network 
connect traders to buyers and sellers and thus represent the access that 
different market participants have to one another the traders serve 
as intermediaries in a two-stage trading game they strategically 
choose bid and ask prices to offer to the sellers and buyers they are 
connected to the sellers and buyers then react to the prices they 
face thus the network encodes the relative power in the structural 
positions of the market participants including the implicit levels of 
competition among traders we show that this game always has a 
 
subgame perfect nash equilibrium and that all equilibria lead to an 
efficient i e socially optimal allocation of goods we also 
analyze how trader profits depend on the network structure essentially 
characterizing in graph-theoretic terms how a trader s payoff is 
determined by the amount of competition it experiences with other 
traders 
our work here is connected to several lines of research in 
economics finance and algorithmic game theory and we discuss these 
connections in more detail later in the introduction at a general 
level our approach can be viewed as synthesizing two important 
strands of work one that treats buyer-seller interaction using 
network structures but without attempting to model the processses by 
which prices are actually formed and 
another strand in the literature on market microstructure that 
incorporates price-setting intermediaries but without network-type 
constraints on who can trade with whom by developing a 
network model that explicitly includes traders as price-setting agents 
in a system together with buyers and sellers we are able to capture 
price formation in a network setting as a strategic process carried 
out by intermediaries rather than as the result of a centrally 
controlled or exogenous mechanism 
the basic model indistinguishable goods our goal in 
formulating the model is to express the process of price-setting in 
markets such as those discussed above where the participants do not 
all have uniform access to one another we are given a set b of 
buyers a set s of sellers and a set t of traders there is an 
undirected graph g that indicates who is able to trade with whom all 
edges have one end in b ∪ s and the other in t that is each edge 
has the form i t for i ∈ s and t ∈ t or j t for j ∈ b and 
t ∈ t this reflects the constraints that all buyer-seller transactions 
go through traders as intermediaries 
in the most basic version of the model we consider identical 
goods one copy of which is initially held by each seller buyers and 
sellers each have a value for one copy of the good and we assume 
that these values are common knowledge we will subsequently 
generalize this to a setting in which goods are distinguishable 
buyers can value different goods differently and potentially sellers can 
value transactions with different buyers differently as well having 
different buyer valuations captures settings like house purchases 
adding different seller valuations as well captures matching 
markets - for example sellers as job applicants and buyers as 
employers with both caring about who ends up with which good 
 and with traders acting as services that broker the job search 
thus to start with the basic model there is a single type of good 
the good comes in individisible units and each seller initially holds 
one unit of the good all three types of agents value money at the 
same rate and each i ∈ b ∪ s additionally values one copy of the 
good at θi units of money no agent wants more than one copy of 
the good so additional copies are valued at each agent has an 
initial endowment of money that is larger than any individual 
valuation θi the effect of this is to guarantee that any buyer who ends 
up without a copy of the good has been priced out of the market 
due to its valuation and network position not a lack of funds 
we picture each good that is sold flowing along a sequence of 
two edges from a seller to a trader and then from the trader to a 
buyer the particular way in which goods flow is determined by the 
following game first each trader offers a bid price to each seller 
it is connected to and an ask price to each buyer it is connected 
to sellers and buyers then choose from among the offers presented 
to them by traders if multiple traders propose the same price to a 
seller or buyer then there is no strict best response for the seller or 
buyer in this case a selection must be made and as is standard 
 see for example we the modelers choose among the best 
offers finally each trader buys a copy of the good from each seller 
that accepts its offer and it sells a copy of the good to each buyer 
that accepts its offer if a particular trader t finds that more buyers 
than sellers accept its offers then it has committed to provide more 
copies of the good than it has received and we will say that this 
results in a large penalty to the trader for defaulting the effect of 
this is that in equilibrium no trader will choose bid and ask prices 
that result in a default 
more precisely a strategy for each trader t is a specification of a 
bid price βti for each seller i to which t is connected and an ask 
price αtj for each buyer j to which t is connected we can also 
handle a model in which a trader may choose not to make an offer 
to certain of its adjacent sellers or buyers each seller or buyer 
then chooses at most one incident edge indicating the trader with 
whom they will transact at the indicated price the choice of a 
single edge reflects the facts that a sellers each initially have only 
one copy of the good and b buyers each only want one copy of 
the good the payoffs are as follows 
for each seller i the payoff from selecting trader t is βti 
while the payoff from selecting no trader is θi in the former 
case the seller receives βti units of money while in the latter 
it keeps its copy of the good which it values at θi 
for each buyer j the payoff from selecting trader t is θj −αtj 
whle the payoff from selecting no trader is in the former 
case the buyer receives the good but gives up αtj units of 
money 
for each trader t with accepted offers from sellers i is 
and buyers j jb the payoff is 
p 
r αtjr − 
p 
r βtir 
minus a penalty π if b s the penalty is chosen to be large 
enough that a trader will never incur it in equilibrium and 
hence we will generally not be concerned with the penalty 
this defines the basic elements of the game the equilibrium 
concept we use is subgame perfect nash equilibrium 
some examples to help with thinking about the model we now 
describe three illustrative examples depicted in figure to keep 
the figures from getting too cluttered we adopt the following 
conventions sellers are drawn as circles in the leftmost column and 
will be named i i from top to bottom traders are drawn as 
squares in the middle column and will be named t t from top 
to bottom and buyers are drawn as circles in the rightmost column 
and will be named j j from top to bottom all sellers in the 
examples will have valuations for the good equal to the valuation 
of each buyer is drawn inside its circle and the bid or ask price on 
each edge is drawn on top of the edge 
in figure a we show how a standard second-price auction 
arises naturally from our model suppose the buyer valuations from 
top to bottom are w x y z the bid and ask prices shown 
are consistent with an equilibrium in which i and j accept the 
offers of trader t and no other buyer accepts the offer of its adjacent 
trader thus trader t receives the good with a bid price of x and 
makes w − x by selling the good to buyer j for w in this way we 
can consider this particular instance as an auction for a single good 
in which the traders act as proxies for their adjacent buyers the 
buyer with the highest valuation for the good ends up with it and 
the surplus is divided between the seller and the associated trader 
note that one can construct a k-unit auction with k buyers just 
as easily by building a complete bipartite graph on k sellers and 
traders and then attaching each trader to a single distinct buyer 
in figure b we show how nodes with different positions in 
the network topology can achieve different payoffs even when all 
 
w 
x 
y 
z 
x 
w 
x 
x 
y 
y 
z 
z 
 a auction 
 
 
 
 
x 
x 
 
 
x 
x 
 
 b heterogeneous outcomes 
 
 
 
 
x 
x 
 
 
x 
x 
 
 c implicit perfect competition 
figure a an auction mediated by traders in which the buyer with the highest valuation for the good ends up with it b 
a network in which the middle seller and buyer benefit from perfect competition between the traders while the other sellers and 
buyers have no power due to their position in the network c a form of implicit perfect competition all bid ask spreads will be zero 
in equilibrium even though no trader directly competes with any other trader for the same buyer-seller pair 
buyer valuations are the same numerically specifically seller i 
and buyer j occupy powerful positions because the two traders 
are competing for their business on the other hand the other sellers 
and buyers are in weak positions because they each have only one 
option and indeed in every equilibrium there is a real number 
x ∈ such that both traders offer bid and ask prices of x to 
i and j respectively while they offer bids of and asks of 
to the other sellers and buyers thus this example illustrates a 
few crucial ingredients that we will identify at a more general level 
shortly specifically i and j experience the benefits of perfect 
competition in that the two traders drive the bid-ask spreads to in 
competing for their business on the other hand the other sellers 
and buyers experience the downsides of monopoly - they receive 
 payoff since they have only a single option for trade and the 
corresponding trader makes all the profit note further how this 
natural behavior emerges from the fact that traders are able to offer 
different prices to different agents - capturing the fact that there 
is no one fixed price in the kinds of markets that motivate the 
model but rather different prices reflecting the relative power of 
the different agents involved 
the previous example shows perhaps the most natural way in 
which a trader s profit on a particular transaction can drop to 
when there is another trader who can replicate its function 
precisely in that example two traders each had the ability to move 
a copy of the good from i to j but as our subsequent results 
will show traders make zero profit more generally due to global 
graph-theoretic reasons the example in figure c gives an initial 
indication of this one can show that for every equilibrium there is 
a y ∈ such that every bid and every ask price is equal to y in 
other words all traders make zero profit whether or not a copy of 
the good passes through them - and yet no two traders have any 
seller-buyer paths in common the price spreads have been driven 
to zero by a global constraint imposed by the long cycle through 
all the agents this is an example of implicit perfect competition 
determined by the network topology 
extending the model to distinguishable goods we extend the 
basic model to a setting with distinguishable goods as follows 
instead of having each agent i ∈ b ∪ s have a single numerical 
valuation θi we index valuations by pairs of buyers and sellers if 
buyer j obtains the good initially held by seller i it gets a utility of 
θji and if seller i sells its good to buyer j it experiences a loss of 
utility of θij this generalizes the case of indistinguishable goods 
since we can always have these pairwise valuations depend only on 
one of the indices a strategy for a trader now consists of offering 
a bid to each seller that specifies both a price and a buyer and 
offering an ask to each buyer that specifies both a price and a seller 
 we can also handle a model in which a trader offers bids 
 respectively asks in the form of vectors essentially specifying a menu 
with a price attached to each buyer resp seller each buyer and 
seller selects an offer from an adjacent trader and the payoffs to all 
agents are determined as before 
this general framework captures matching markets for 
example a job market that is mediated by agents or employment 
search services as in hiring for corporate executives or sports or 
entertainment figures here the sellers are job applicants buyers 
are employers and traders are the agents that mediate the job 
market of course if one specifies pairwise valuations on buyers but 
just single valuations for sellers we model a setting where buyers 
can distinguish among the goods but sellers don t care whom they 
sell to - this roughly captures settings like housing markets 
our results our results will identify general forms of some of 
the principles noted in the examples discussed above - including 
the question of which buyers end up with the good the question 
of how payoffs are differently realized by sellers traders and 
buyers and the question of what structural properties of the network 
determine whether the traders will make positive profits 
to make these precise we introduce the following notation any 
outcome of the game determines a final allocation of goods to some 
of the agents this can be specified by a collection m of triples 
 ie te je where ie ∈ s te ∈ t and je ∈ b moreover each 
seller and each buyer appears in at most one triple the meaning is 
for each e ∈ m the good initially held by ie moves to je through 
te sellers appearing in no triple keep their copy of the good 
we say that the value of the allocation is equal to 
p 
e∈m θjeie − 
θieje let θ 
denote the maximum value of any allocation m that 
is feasible given the network 
we show that every instance of our game has an equilibrium 
and that in every such equilibrium the allocation has value θ 
 
 
in other words it achieves the best value possible thus 
equilibria in this model are always efficient in that the market enables the 
right set of people to get the good subject to the network 
constraints we establish the existence and efficiency of equilibria by 
constructing a linear program to capture the flow of goods through 
the network the dual of this linear program contains enough 
information to extract equilibrium prices 
by the definition of the game the value of the equilibrium 
allocation is divided up as payoffs to the agents and it is interesting to 
ask how this value is distributed - in particular how much profit a 
trader is able to make based on its position in the network we find 
that although all equilibria have the same value a given trader s 
payoff can vary across different equilibria however we are able 
to characterize the maximum and minimum amounts that a given 
trader is able to make where these maxima and minima are taken 
over all equilibria and we give an efficient algorithm to compute 
this in particular our results here imply a clean combinatorial 
characterization of when a given trader t can achieve non-zero 
payoff this occurs if and only there is some edge e incident to t that is 
essential in the sense that deleting e reduces the value of the 
optimal allocation θ 
 we also obtain results for the sum of all trader 
profits 
related work the standard baseline approach for analyzing the 
interaction of buyers and sellers is the walrasian model in which 
anonymous buyers and sellers trade a good at a single market 
clearing price this reduced form of trade built on the idealization of a 
market price is a powerful model which has led to many insights 
but it is not a good model to use to examine where prices come 
from or exactly how buyers and sellers and trade with each other 
the difficulty is that in the walrasian model there is no agent who 
sets the price and agents don t actually trade with each other in 
fact there is no market in the everyday sense of that word in the 
walrasian model that is there is no physical or virtual place 
where buyers and sellers interact to trade and set prices thus in 
this simple model all buyers and sellers are uniform and trade at 
the same price and there is also no role for intermediaries 
there are several literatures in economics and finance which 
examine how prices are set rather than just determining equilibrium 
prices the literature on imperfect competition is perhaps the 
oldest of these here a monopolist or a group of oliogopolists choose 
prices in order to maximize their profits see for the standard 
textbook treatment of these markets a monopolist uses its 
knowledge of market demand to choose a price or a collection of prices 
if it discriminates oliogopolists play a game in which their 
payoffs depend on market demand and the actions of their competitors 
in this literature there are agents who set prices but the fiction of 
a single market is maintained in the equilibrium search literature 
firms set prices and consumers search over them see 
consumers do end up paying different prices but all consumers have 
access to all firms and there are no intermediaries in the general 
equilibrium literature there have been various attempts to introduce 
price determination a standard proof technique for the existence 
of competitive equilibrium involves a price adjustment mechanism 
in which prices respond to excess demand the walrasian 
auctioneer is often introduced as a device to explain how this process 
works but this is a fundamentally a metaphor for an iterative 
priceupdating algorithm not for the internals of an actual market more 
sophisticated processes have been introduced to study the 
stability of equilibrium prices or the information necessary to compute 
them but again there are no price-setting agents here 
in the finance literature the work on market microstructure does 
have price-setting agents specialists parts of it do determine 
separate bid and ask prices and different agents receive different prices 
for the same asset see for a treatment of microstructure 
theory work in information economics has identified similar 
phenomena see e g but there is little research in these literatures 
examining the effect of restrictions on who can trade with whom 
there have been several approaches to studying how network 
structure determines prices these have posited price determination 
through definitions based on competitive equilibrium or the core or 
through the use of truthful mechanisms in briefly reviewing this 
work we will note the contrast with our approach in that we model 
prices as arising from the strategic behavior of agents in the system 
in recent work kakade et al have studied the distribution of 
prices at competitive equilibrium in a bipartite graph on buyers and 
sellers generated using a probabilistic model capable of producing 
heavy-tailed degree distributions even-dar et al build 
on this to consider the strategic aspects of network formation when 
prices arise from competitive equilibrium 
leonard babaioff et al and chu and shen consider 
an approach based on mechanism design buyers and sellers reside 
at different nodes in a graph and they incur a given 
transportation cost to trade with one another leonard studies vcg prices in 
this setting babaioff et al and chu and shen additionally provide 
a a budget-balanced mechanism since the concern here is with 
truthful mechanisms that operate on private valuations there is an 
inherent trade-off between the efficiency of the allocation and the 
budget-balance condition 
in contrast our model has known valuations and prices arising 
from the strategic behavior of traders thus the assumptions 
behind our model are in a sense not directly comparable to those 
underlying the mechanism design approach while we assume known 
valuations we do not require a centralized authority to impose a 
mechanism rather price-setting is part of the strategic outcome 
as in the real markets that motivate our work and our equilibria 
are simultaneously budget-balanced and efficient - something not 
possible in the mechanism design frameworks that have been used 
demange gale and sotomayor and kranton and minehart 
 analyze the prices at which trade occurs in a network working 
within the framework of mechanism design kranton and minehart 
use a bipartite graph with direct links between buyers and sellers 
and then use an ascending auction mechanism rather than strategic 
intermediaries to determine the prices their auction has desirable 
equilibrium properties but as kranton and minehart note it is an 
abstraction of how goods are allocated and prices are determined 
that is similar in spirit to the walrasian auctioneer abstraction in 
fact we can show how the basic model of kranton and minehart 
can be encoded as an instance of our game with traders producing 
prices at equilibrium matching the prices produced by their auction 
mechanism 
finally the classic results of shapley and shubik on the 
assignment game can be viewed as studying the result of trade on a 
bipartite graph in terms of the core they study the dual of a linear 
program based on the matching problem similar to what we use for 
a reduced version of our model in the next section but their focus 
is different as they do not consider agents that seek to set prices 
 markets with pair-traders 
for understanding the ideas behind the analysis of the general 
model it is very useful to first consider a special case with a 
re 
kranton and minehart however can also analyze a more 
general setting in which buyers values are private and thus buyers and 
sellers play a game of incomplete information we deal only with 
complete information 
 
stricted form of traders that we refer to as pair-traders in this case 
each trader is connected to just one buyer and one seller thus it 
essentially serves as a trade route between the two the 
techniques we develop to handle this case will form a useful basis for 
reasoning about the case of traders that may be connected 
arbitrarily to the sellers and buyers 
we will relate profits in a subgame perfect nash equilibrium to 
optimal solutions of a certain linear program use this relation to 
show that all equilibria result in efficient allocation of the goods 
and show that a pure equilibrium always exists first we consider 
the simplest model where sellers have indistinguishable items and 
each buyer is interested in getting one item then we extend the 
results to the more general case of a matching market as discussed 
in the previous section where valuations depend on the identity 
of the seller and buyer we then characterize the minimum and 
maximum profits traders can make in the next section we extend 
the results to traders that may be connected to any subset of sellers 
and buyers 
given that we are working with pair-traders in this section we 
can represent the problem using a bipartite graph g whose node set 
is b ∪ s and where each trader t connecting seller i and buyer j 
appears as an edge t i j in g note however that we allow 
multiple traders to connect the same pair of agents for each buyer 
and seller i we will use adj i to denote the set of traders who can 
trade with i 
 indistinguishable goods 
the socially optimal trade for the case of indistinguishable goods 
is the solution of the transportation problem sending goods along 
the edges representing the traders the edges along which trade 
occurs correspond to a matching in this bipartite graph and the 
optimal trade is described by the following linear program 
max sv x 
x 
t∈t t i j 
xt θj − θi 
xt ≥ ∀t ∈ t 
x 
t∈adj i 
xt ≤ ∀i ∈ s 
x 
t∈adj j 
xt ≤ ∀j ∈ b 
next we consider an equilibrium each trader t i j must 
offer a bid βt and an ask αt we omit the subscript denoting the 
seller and buyer here since we are dealing with pair-traders given 
the bid and ask price the agents react to these prices as described 
earlier instead of focusing on prices we will focus on profits if 
a seller i sells to a trader t ∈ adj i with bid βt then his profit is 
pi βt − θi similarly if a buyer j buys from a trader t ∈ adj j 
with ask αt then his profit is pj θj − αt finally if a trader t 
trades with ask αt and bid βt then his profit is yt αt − βt all 
agents not involved in trade make profit we will show that the 
profits at equilibrium are an optimal solution to the following linear 
program 
min sum p y 
x 
i∈b∪s 
pi 
x 
t∈t 
yt 
yt ≥ ∀t ∈ t 
pi ≥ ∀i ∈ s ∪ b 
yt ≥ θj − pj − θi pi ∀t i j ∈ t 
lemma at equilibrium the profits must satisfy the above 
inequalities 
proof clearly all profits are nonnegative as trading is optional for 
all agents 
to see why the last set of inequalities holds consider two cases 
separately for a trader t who conducted trade we get equality by 
definition for other traders t i j the value pi θi is the price 
that seller i sold for or θi if seller i decided to keep the good 
offering a bid βt pi θi would get the seller to sell to trader t 
similarly θj − pj is the price that buyer j bought for or θj if he 
didn t buy and for any ask αt θj − pj the buyer will buy from 
trader t so unless θj − pj ≤ θi pi the trader has a profitable 
deviation 
now we are ready to prove our first theorem 
theorem in any equilibrium the trade is efficient 
proof let x be a flow of goods resulting in an equilibrium and let 
variables p and y be the profits 
consider the linear program describing the socially optimal trade 
we will also add a set of additional constraints xt ≤ for all traders 
t ∈ t this can be added to the description as it is implied by the 
other constraints now we claim that the two linear programs are 
duals of each other the variables pi for agents b ∪ s correspond 
to the equations 
p 
t∈adj i xt ≤ the additional dual variable yt 
corresponds to an additional inequality xt ≤ 
the optimality of the social value of the trade will follow from 
the claim that the solution of these two linear programs derived 
from an equilibrium satisfy the complementary slackness 
conditions for this pair of linear programs and hence both x and p y 
are optimal solutions to the corresponding linear programs 
there are three different complementary slackness conditions we 
need to consider corresponding to the three sets of variables x y 
and p any agent can only make profit if he transacts so pi 
implies 
p 
t∈adj i xt and similarly yt implies that xt 
 also finally consider a trader t with xt that trades between 
seller i and buyer j and recall that we have seen above that the 
inequality yt ≥ θj − pj − θi pi is satisfied with equality for 
those who trade 
next we argue that equilibria always exist 
theorem for any efficient trade between buyers and 
sellers there is a pure equilibrium of bid-ask values that supports this 
trade 
proof consider an efficient trade let xt if t trades and 
otherwise and consider an optimal solution p y to the dual linear 
program 
we would like to claim that all dual solutions correspond to 
equilibrium prices but unfortunately this is not exactly true before we 
can convert a dual solution to equilibrium prices we may need to 
modify the solution slightly as follows consider any agent i that 
is only connected to a single trader t because the agent is only 
connected to a single trader the variables yt and pi are dual 
variables corresponding to the same primal inequality xt ≤ and 
they always appear together as yt pi in all inequalities and also 
in the objective function thus there is an optimal solution in which 
pi for all agents i connected only to a single trader 
assume p y is a dual solution where agents connected only 
to one trader have pi for a seller i let βt θi pi be 
the bid for all traders t adjacent to i similarly for each buyer j 
let αt θj − pj be the ask for all traders t adjacent to j we 
claim that this set of bids and asks together with the trade x are an 
equilibrium to see why note that all traders t adjacent to a seller 
or buyer i offer the same ask or bid and so trading with any trader 
is equally good for agent i also if i is not trading in the solution 
 
x then by complementary slackness pi and hence not trading 
is also equally good for i this shows that sellers and buyers don t 
have an incentive to deviate 
we need to show that traders have no incentive to deviate either 
when a trader t is trading with seller i and buyer j then profitable 
deviations would involve increasing αt or decreasing βt but by 
our construction and assumption about monopolized agents all 
sellers and buyers have multiple identical ask bid offers or trade 
is occurring at valuation in either case such a deviation cannot be 
successful 
finally consider a trader t i j who doesn t trade a 
deviation for t would involve offering a lower ask to seller i and a 
higher bid to seller j than their current trade however yt by 
complementary slackness and hence pi θi ≥ θj − pj so i sells 
for a price at least as high as the price at which j buys so trader t 
cannot create profitable trade 
note that a seller or buyer i connected to a single trader t cannot 
have profit at equilibrium so possible equilibrium profits are in 
one-to-one correspondence with dual solutions for which pi 
whenever i is monopolized by one trader 
a disappointing feature of the equilibrium created by this proof 
is that some agents t may have to create ask-bid pairs where βt 
αt offering to buy for more than the price at which they are willing 
to sell agents that make such crossing bid-ask pairs never actually 
perform a trade so it does not result in negative profit for the agent 
but such pairs are unnatural crossing bid-ask pairs are weakly 
dominated by the strategy of offering a low bid β and an 
extremely high ask to guarantee that neither is accepted 
to formulate a way of avoiding such crossing pairs we say an 
equilibrium is cross-free if αt ≥ βt for all traders t we now show 
there is always a cross-free equilibrium 
theorem for any efficient trade between buyers and 
sellers there is a pure cross-free equilibrium 
proof consider an optimal solution to the dual linear program 
to get an equilibrium without crossing bids we need to do a more 
general modification than just assuming that pi for all sellers 
and buyers connected to only a single trader let the set e be the 
set of edges t i j that are tight in the sense that we have 
the equality yt θj − pj − θi pi this set e contain all 
the edges where trade occurs and some more edges we want to 
make sure that pi for all sellers and buyers that have degree at 
most in e consider a seller i that has pi we must have i 
involved in a trade and the edge t i j along which the trade 
occurs must be tight suppose this is the only tight edge adjacent 
to agent i then we can decrease pi and increase yt till one of the 
following happens either pi or the constraint of some other 
agent t ∈ adj i becomes tight this change only increases the set 
of tight edges e keeps the solution feasible and does not change 
the objective function value so after doing this for all sellers and 
analogously changing yt and pj for all buyers we get an optimal 
solution where all sellers and buyers i either have pi or have 
at least two adjacent tight edges 
now we can set asks and bids to form a cross-free equilibrium 
for all traders t i j associated with an edge t ∈ e we set αt 
and βt as before we set the bid βt pi θi and the ask αt 
θj −pj for a trader t i j ∈ e we have that pi θi θj −pj 
and we set αt βt to be any value in the range θj − pj pi θi 
this guarantees that for each seller or buyer the best sell or buy 
offer is along the edge where trade occurs in the solution the 
askbid values along the tight edges guarantee that traders who trade 
cannot increase their spread traders t i j who do not trade 
cannot make profit due to the constraint pi θi ≥ θj − pj 
 
 
 
 
 
 
 
 
 
 
 
 a no trader profit 
 
 
 
 x 
x 
x 
x 
x 
x 
 x 
 b trader profit 
figure left an equilibrium with crossing bids where traders 
make no money right an equilibrium without crossing bids 
for any value x ∈ total trader profit ranges between 
and 
 distinguishable goods 
we now consider the case of distinguishable goods as in the 
previous section we can write a transshipment linear program for 
the socially optimal trade with the only change being in the 
objective function 
max sv x 
x 
t∈t t i j 
xt θji − θij 
we can show that the dual of this linear program corresponds to 
trader profits recall that we needed to add the constraints xt ≤ 
for all traders the dual is then 
min sum p y 
x 
i∈b∪s 
pi 
x 
t∈t 
yt 
yt ≥ ∀t ∈ t 
pi ≥ ∀i ∈ s ∪ b 
yt ≥ θji − pj − θij pi ∀t i j ∈ t 
it is not hard to extend the proofs of theorems - to this case 
profits in an equilibrium satisfy the dual constraints and profits and 
trade satisfy complementary slackness this shows that trade is 
socially optimal taking an optimal dual solution where pi for 
all agents that are monopolized we can convert it to an equilibrium 
and with a bit more care we can also create an equilibrium with no 
crossing bid-ask pairs 
theorem all equilibria for the case of pair-traders with 
distinguishable goods result in socially optimal trade pure 
noncrossing equilibria exist 
 trader profits 
we have seen that all equilibria are efficient however it turns 
out that equilibria may differ in how the value of the allocation is 
spread between the sellers buyers and traders figure depicts a 
simple example of this phenomenon 
our goal is to understand how a trader s profit is affected by its 
position in the network we will use the characterization we 
obtained to work out the range of profits a trader can make to 
maximize the profit of a trader t or a subset of traders t all we need 
to do is to find an optimal solution to the dual linear program 
maximizing the value of yt or the sum 
p 
t∈t yt such dual solutions 
will then correspond to equilibria with non-crossing prices 
 
theorem for any trader t or subset of traders t the 
maximum total profit they can make in any equilibrium can be 
computed in polynomial time this maximum profit can be obtained by 
a non-crossing equilibrium 
one way to think about the profit of a trader t i j is as a 
subtraction from the value of the corresponding edge i j the 
value of the edge is the social value θji − θij if the trader makes 
no profit and decreases to θji − θij − yt if the trader t insists on 
making yt profit trader t gets yt profit in equilibrium if after this 
decrease in the value of the edge the edge is still included in the 
optimal transshipment 
theorem a trader t can make profit in an equilibrium if 
and only if t is essential for the social welfare that is if deleting 
agent t decreases social welfare the maximum profit he can make 
is exactly his value to society that is the increase his presence 
causes in the social welfare 
if we allow crossing equilibria then we can also find the 
minimum possible profit recall that in the proof of theorem 
traders only made money off of sellers or buyers that they have 
a monopoly over allowing such equilibria with crossing bids we 
can find the minimum profit a trader or set of traders can make by 
minimizing the value yt or sum 
p 
t∈t yt over all optimal 
solutions that satisfy pi whenever i is connected to only a single 
trader 
theorem for any trader t or subset of traders t the 
minimum total profit they can make in any equilibrium can be 
computed in polynomial time 
 general traders 
next we extend the results to a model where traders may be 
connected to an arbitrary number of sellers and buyers for a trader 
t ∈ t we will use s t and b t to denote the set of buyers and 
sellers connected to trader t in this section we focus on the general 
case when goods are distinguishable i e both buyers and sellers 
have valuations that are sensitive to the identity of the agent they 
are paired with in the allocation in the full version of the paper 
we also discuss the special case of indistinguishable goods in more 
detail 
to get the optimal trade we consider the bipartite graph g 
 s ∪ b e connecting sellers and buyers where an edge e i j 
connects a seller i and a buyer j if there is a trader adjacent to 
both e i j adj i ∩ adj j ∅ on this graph we 
then solve the instance of the assignment problem that was also 
used in section with the value of edge i j equal to θji − θij 
 since the value of trading between i and j is independent of which 
trader conducted the trade we will also use the dual of this linear 
program 
min val z 
x 
i∈b∪s 
zi 
zi ≥ ∀i ∈ s ∪ b 
zi zj ≥ θji − θij ∀i ∈ s j ∈ b 
adj i ∩ adj j ∅ 
 bids and asks and trader optimization 
first we need to understand what bidding model we will use 
even when goods are indistinguishable a trader may want to 
pricediscriminate and offer different bid and ask values to different 
sellers and buyers in the case of distinguishable goods we have to deal 
with a further complication the trader has to name the good she is 
proposing to sell or buy and can possibly offer multiple different 
products 
there are two variants of our model depending whether a trader 
makes a single bid or ask to a seller or buyer or she offers a menu 
of options 
 i a trader t can offer a buyer j a menu of asks αtji a vector of 
values for all the products that she is connected to where αtji 
is the ask for the product of seller i symmetrically a trader 
t can offer to each seller i a menu of bids βtij for selling to 
different buyers j 
 ii alternatively we can require that each trader t can make at 
most one ask to each seller and one bid for each buyer and 
an ask has to include the product sold and a bid has to offer 
a particular buyer to sell to 
our results hold in either model for notational simplicity we will 
use the menu option here 
next we need to understand the optimization problem of a trader 
t suppose we have bid and ask values for all other traders t ∈ t 
t t what are the best bid and ask offers trader t can make as a 
best response to the current set of bids and asks for each seller i 
let pi be the maximum profit seller i can make using bids by other 
traders and symmetrically assume pj is the maximum profit buyer 
j can make using asks by other traders let pi for any seller or 
buyer i who cannot make profit now consider a seller-buyer pair 
 i j that trader t can connect trader t will have to make a bid of at 
least βtij θij pi to seller i and an ask of at most αtji θji −pj 
to buyer j to get this trade so the maximum profit she can make 
on this trade is vtij αtji − βtij θji − pj − θij pi the 
optimal trade for trader t is obtained by solving a matching problem 
to find the matching between the sellers s t and buyers b t that 
maximizes the total value vtij for trader t 
we will need the dual of the linear program of finding the trade of 
maximum profit for the trader t we will use qti as the dual variable 
associated with the constraint of seller or buyer i the dual is then 
the following problem 
min val qt 
x 
i∈b t ∪s t 
qti 
qti ≥ ∀i ∈ s t ∪ b t 
qti qtj ≥ vtij ∀i ∈ s t j ∈ b t 
we view qti as the profit made by t from trading with seller or buyer 
i theorem summarizes the above discussion 
theorem for a trader t given the lowest bids βtij and 
highest asks αtji that can be accepted for sellers i ∈ s t and 
buyers j ∈ b t the best trade t can make is the maximum value 
matching between s t and b t with value vtij αtji − βtij for 
the edge i j this maximum value is equal to the minimum of the 
dual linear program above 
 efficient trade and equilibrium 
now we can prove trade at equilibrium is always efficient 
theorem every equilibrium results in an efficient 
allocation of the goods 
proof consider an equilibrium with xe if and only if trade 
occurs along edge e i j trade is a solution to the 
transshipment linear program used in section 
let pi denote the profit of seller or buyer i each trader t 
currently has the best solution to his own optimization problem a 
trader t finds his optimal trade given bids and asks by all other 
 
traders by solving a matching problem let qti for i ∈ b t ∪s t 
denote the optimal dual solution to this matching problem as 
described by theorem 
when setting up the optimization problem for a trader t above 
we used pi to denote the maximum profit i can make without the 
offer of trader t note that this pi is exactly the same pi we use 
here the profit of agent i this is clearly true for all traders t that 
are not trading with i in the equilibrium to see why it is true for the 
trader t that i is trading with we use that the current set of bid-ask 
values is an equilibrium if for any agent i the bid or ask of trader 
t were the unique best option then t could extract more profit by 
offering a bit larger ask or a bit smaller bid a contradiction 
we show the trade x is optimal by considering the dual solution 
zi pi 
p 
t qti for all agents i ∈ b ∪ s we claim z is a dual 
solution and it satisfies complementary slackness with trade x to 
see this we need to show a few facts 
we need that zi implies that i trades if zi then either 
pi or qti for some trader t agent i can only make 
profit pi if he is involved in a trade if qti for some t 
then trader t must trade with i as his solution is optimal and 
by complementary slackness for the dual solution qti 
implies that t trades with i 
for an edge i j associated with a trader t we need to show 
the dual solution is feasible that is zi zj ≥ θji − θij 
recall vtij θji −pj − θij pi and the dual constraint of 
the trader s optimization problem requires qti qtj ≥ vtij 
putting these together we have 
zi zj ≥ pi qti pj qtj ≥ vtij pi pj θji − θij 
finally we need to show that the trade variables x also 
satisfy the complementary slackness constraint when xe 
for an edge e i j then the corresponding dual constraint 
is tight let t be the trader involved in the trade by 
complementary slackness of t s optimization problem we have 
qti qtj vtij to see that z satisfies complementary 
slackness we need to argue that for all other traders t t we have 
both qt i and qt j this is true as qt i implies by 
complementary slackness of t s optimization problem that t 
must trade with i at optimum and t t is trading 
next we want to show that a non-crossing equilibrium always 
exists we call an equilibrium non-crossing if the bid-ask offers 
a trader t makes for a seller-buyer pair i j never cross that is 
βtij ≤ αtji for all t i j 
theorem there exists a non-crossing equilibrium 
supporting any socially optimal trade 
proof consider an optimal trade x and a dual solution z as before 
to find a non-crossing equilibrium we need to divide the profit zi 
between i and the trader t trading with i we will use qti as the 
trader t s profit associated with agent i for any i ∈ s t ∪ b t 
we will need to guarantee the following properties 
trader t trades with agent i whenever qti this is one 
of the complementary slackness conditions to make sure the 
current trade is optimal for trader t 
for all seller-buyer pairs i j that a trader t can trade with 
we have 
pi qti pj qtj ≥ θji − θij 
which will make sure that qt is a feasible dual solution for the 
optimization problem faced by trader t 
we need to have equality in when trader t is trading 
between i and j this is one of the complementary slackness 
conditions for trader t and will ensure that the trade of t is 
optimal for the trader 
finally we want to arrange that each agent i with pi has 
multiple offers for making profit pi and the trade occurs at 
one of his best offers to guarantee this in the corresponding 
bids and asks we need to make sure that whenever pi 
there are multiple t ∈ adj i that have equation in the above 
constraint 
we start by setting pi zi for all i ∈ s ∪ b and qti 
for all i ∈ s ∪ b and traders t ∈ adj i this guarantees all 
invariants except the last property about multiple t ∈ adj t having 
equality in we will modify p and q to gradually enforce the last 
condition while maintaining the others 
consider a seller with pi by optimality of the trade and 
dual solution z seller i must trade with some trader t and that 
trader will have equality in for the buyer j that he matches with 
i if this is the only trader t that has a tight constraint in 
involving seller i then we increase qti and decrease pi till either pi or 
another trader t t will be achieve equality in for some buyer 
edge adjacent to i possibly a different buyer j this change 
maintains all invariants and increases the set of sellers that also satisfy 
the last constraint we can do a similar change for a buyer j that 
has pj and has only one trader t with a tight constraint 
adjacent to j after possibly repeating this for all sellers and buyers 
we get profits satisfying all constraints 
now we get equilibrium bid and ask values as follows for a 
trader t that has equality for the seller-buyer pair i j in we 
offer αtji θji − pj and βtij θij pi for all other traders 
t and seller-buyer pairs i j we have the invariant and using 
this we know we can pick a value γ in the range θij pi qti ≥ γ ≥ 
θji − pj qtj we offer bid and ask values βtij αtji γ 
neither the bid nor the ask will be the unique best offer for the 
buyer and hence the trade x remains an equilibrium 
 trader profits 
finally we turn to the goal of understanding in the case of 
general traders how a trader s profit is affected by its position in the 
network 
first we show how to maximize the total profit of a set of traders 
the profit of trader t in an equilibrium is 
p 
i qti to find the 
maximum possible profit for a trader t or a set of traders t we 
need to do the following find profits pi ≥ and qti so 
that zi pi 
p 
t∈adj i qti is an optimal dual solution and also 
satisfies the constraints for any seller i and buyer j connected 
through a trader t ∈ t now subject to all these conditions we 
maximize the sum 
p 
t∈t 
p 
i∈s t ∪b t qti note that this 
maximization is a secondary objective function to the primary objective 
that z is an optimal dual solution then we use the proof of 
theorem shows how to turn this into an equilibrium 
theorem the maximum value for 
p 
t∈t 
p 
i qti above 
is the maximum profit the set t of traders can make 
proof by the proof of theorem the profits of trader t can 
be written in this form so the set of traders t cannot make more 
profit than claimed in this theorem 
to see that t can indeed make this much profit we use the proof 
of theorem we modify that proof to start with profit vectors p 
and qt for t ∈ t and set qt for all traders t ∈ t we verify 
that this starting solution satisfies the first three of the four required 
properties and then we can follow the proof to make the fourth 
property true we omit the details of this in the present version 
in section we showed that in the case of pair traders a trader 
t can make money if he is essential for efficient trade this is not 
 
 
 
figure the top trader is essential for social welfare yet the 
only equilibrium is to have bid and ask values equal to and 
the trader makes no profit 
true for the type of more general traders we consider here as shown 
by the example in figure 
however we still get a characterization for when a trader t can 
make a positive profit 
theorem a trader t can make profit in an equilibrium if 
and only if there is a seller or buyer i adjacent to t such that the 
connection of trader t to agent i is essential for social 
welfarethat is if deleting agent t from adj i decreases the value of the 
optimal allocation 
proof first we show the direction that if a trader t can make money 
there must be an agent i so that t s connection to i is essential to 
social welfare let p q be the profits in an equilibrium where t makes 
money as described by theorem with 
p 
i∈s t ∪b t qti 
so we have some agent i with qti we claim that the 
connection between agent i and trader t must be essential in particular we 
claim that social welfare must decrease by at least qti if we delete 
t from adj t to see why note that decreasing the value of all 
edges of the form i j associated with trader t by qti keeps the 
same trade optimum as we get a matching dual solution by simply 
resetting qti to zero 
to see the opposite assume deleting t from adj t decreases 
social welfare by some value γ assume i is a seller the case of 
buyers is symmetric and decrease by γ the social value of each 
edge i j for any buyer j such that t is the only agent connecting 
i and j by assumption the trade is still optimal and we let z be 
the dual solution for this matching now we use the same process 
as in the proof of theorem to create a non-crossing equilibrium 
starting with pi zi for all i ∈ s ∪b and qti γ and all other q 
values this creates an equilibrium with non-crossing bids where 
t makes at least γ profit due to trade with seller i 
finally if we allow crossing equilibria then we can find the 
minimum possible profit by simply finding a dual solution 
minimizing the dual variables associated with agents monopolized by some 
trader 
theorem for any trader t or subset of traders t the 
minimum total profit they can make in any equilibrium can be 
computed in polynomial time 
 references 
 m babaioff n nisan e pavlov mechanisms for a 
spatially distributed market acm ec conference 
 c barrett e mutambatsere agricultural markets in 
developing countries the new palgrave dictionary of 
economics nd edition forthcoming 
 kenneth burdett and kenneth judd equilibrium price 
disperison econometrica july - 
 l chu z -j shen agent competition double auction 
mechanism management science 
 g demange d gale m sotomayor multi-item auctions j 
political econ 
 e even-dar m kearns s suri a network formation 
game for bipartite exchange economies acm-siam 
symp on discrete algorithms soda 
 j kephart j hanson a greenwald dynamic pricing by 
software agents computer networks 
 s kakade m kearns l ortiz r pemantle s suri 
economic properties of social networks nips 
 r kranton d minehart a theory of buyer-seller 
networks american economic review june 
 h leonard elicitation of honest preferences for the 
assignment of individuals to positions j pol econ 
 m e j newman the structure and function of complex 
networks siam review - 
 m o hara market microstructure theory blackwell 
publishers cambridge ma 
 l shapley m shubik the assignment game i the core 
intl j game theory - 
 jean tirole the theory of industrial organization the mit 
press cambridge ma 
 
