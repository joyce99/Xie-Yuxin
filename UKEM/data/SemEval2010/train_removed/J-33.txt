bid expressiveness and clearing algorithms in 
multiattribute double auctions 
yagil engel michael p wellman and kevin m lochner 
university of michigan computer science engineering 
 hayward st ann arbor mi - usa 
 yagil wellman klochner  umich edu 
abstract 
we investigate the space of two-sided multiattribute auctions 
focusing on the relationship between constraints on the offers traders 
can express through bids and the resulting computational problem 
of determining an optimal set of trades we develop a formal 
semantic framework for characterizing expressible offers and show 
conditions under which the allocation problem can be separated 
into first identifying optimal pairwise trades and subsequently 
optimizing combinations of those trades we analyze the bilateral 
matching problem while taking into consideration relevant results 
from multiattribute utility theory network flow models we 
develop for computing global allocations facilitate classification of 
the problem space by computational complexity and provide 
guidance for developing solution algorithms experimental trials help 
distinguish tractable problem classes for proposed solution 
techniques 
categories and subject descriptors f theory of 
computation analysis of algorithms and problem complexity j 
 computer applications social and behavioral 
sciences-economics 
general terms algorithms economics 
 background 
a multiattribute auction is a market-based mechanism where 
goods are described by vectors of features or attributes 
 such mechanisms provide traders with the ability to negotiate 
over a multidimensional space of potential deals delaying 
commitment to specific configurations until the most promising candidates 
are identified for example in a multiattribute auction for 
computers the good may be defined by attributes such as processor speed 
memory and hard disk capacity agents have varying preferences 
 or costs associated with the possible configurations for example 
a buyer may be willing to purchase a computer with a ghz 
processor mb of memory and a gb hard disk for a price no 
greater than or the same computer with gb of memory for 
a price no greater than 
existing research in multiattribute auctions has focused 
primarily on one-sided mechanisms which automate the process whereby 
a single agent negotiates with multiple potential trading partners 
 models of procurement typically assume 
the buyer has a value function v ranging over the possible 
configurations x and that each seller i can similarly be associated 
with a cost function ci over this domain the role of the auction is 
to elicit these functions possibly approximate or partial versions 
and identify the surplus-maximizing deal in this case such an 
outcome would be arg maxi x v x − ci x this problem can be 
translated into the more familiar auction for a single good without 
attributes by computing a score for each attribute vector based on 
the seller valuation function and have buyers bid scores analogs 
of the classic first- and second-price auctions correspond to 
firstand second-score auctions 
in the absence of a published buyer scoring function agents on 
both sides may provide partial specifications of the deals they are 
willing to engage research on such auctions has for example 
produced iterative mechanisms for eliciting cost functions 
incrementally other efforts focus on the optimization problem facing 
the bid taker for example considering side constraints on the 
combination of trades comprising an overall deal side constraints 
have also been analyzed in the context of combinatorial auctions 
 
our emphasis is on two-sided multiattribute auctions where 
multiple buyers and sellers submit bids and the objective is to construct 
a set of deals maximizing overall surplus previous research on 
such auctions includes works by fink et al and gong 
both of which consider a matching problem for continuous double 
auctions cdas where deals are struck whenever a pair of 
compatible bids is identified 
in a call market in contrast bids accumulate until designated 
times e g on a periodic or scheduled basis at which the auction 
clears by determining a comprehensive match over the entire set 
of bids because the optimization is performed over an aggregated 
scope call markets often enjoy liquidity and efficiency advantages 
over cdas 
clearing a multiattribute cda is much like clearing a one-sided 
multiattribute auction because nothing happens between bids the 
problem is to match a given new bid say an offer to buy with the 
existing bids on the other sell side multiattribute call markets are 
potentially much more complex constructing an optimal overall 
matching may require consideration of many different 
combina 
in the interim between clears call markets may also disseminate 
price quotes providing summary information about the state of the 
auction such price quotes are often computed based on 
hypothetical clears and so the clearing algorithm may be invoked more 
frequently than actual market clearing operations 
 
tions of trades among the various potential trading-partner 
pairings the problem can be complicated by restrictions on overall 
assignments as expressed in side constraints 
the goal of the present work is to develop a general framework 
for multiattribute call markets to enable investigation of design 
issues and possibilities in particular we use the framework to 
explore tradeoffs between expressive power of agent bids and 
computational properties of auction clearing we conduct our 
exploration independent of any consideration of strategic issues bearing 
on mechanism design as with analogous studies of combinatorial 
auctions we intend that tradeoffs quantified in this work can 
be combined with incentive factors within a comprehensive overall 
approach to multiattribute auction design 
we provide the formal semantics of multiattribute offers in our 
framework in the next section we abstract where appropriate 
from the specific language used to express offers characterizing 
expressiveness semantically in terms of what deals may be offered 
this enables us to identify some general conditions under which 
the problem of multilateral matching can be decomposed into 
bilateral matching problems we then develop a family of network 
flow problems that capture corresponding classes of multiattribute 
call market optimizations experimental trials provide preliminary 
confirmation that the network formulations provide useful structure 
for implementing clearing algorithms 
 multiattribute offers 
 basic definitions 
the distinguishing feature of a multiattribute auction is that the 
goods are defined by vectors of attributes x x xm 
xj ∈ xj a configuration is a particular attribute vector x ∈ 
x 
qm 
j xj the outcome of the auction is a set of bilateral 
trades trade t takes the form t x q b s π signifying that 
agent b buys q units of configuration x from seller s for 
payment π for convenience we use the notation xt to denote the 
configuration associated with trade t and similarly for other 
elements of t for a set of trades t we denote by ti that subset of t 
involving agent i i e b i or s i let t denote the set of all 
possible trades 
a bid expresses an agent s willingness to participate in trades 
we specify the semantics of a bid in terms of offer sets let ot 
i ⊆ 
ti denote agent i s trade offer set intuitively this represents the 
trades in which i is willing to participate however since the 
outcome of the auction is a set of trades several of which may involve 
agent i we must in general consider willingness to engage in trade 
combinations accordingly we introduce the combination offer set 
of agent i oc 
i ⊆ ti 
 specifying offer sets 
a fully expressive bid language would allow specification of 
arbitrary combination offer sets we instead consider a more limited 
class which while restrictive still captures most forms of 
multiattribute bidding proposed in the literature our bids directly specify 
part of the agent s trade offer set and include further directives 
controlling how this can be extended to the full trade and combination 
offer sets 
for example one way to specify a trade buy offer set would 
be to describe a set of configurations and quantities along with the 
maximal payment one would exchange for each x q specified 
this description could be by enumeration or any available means 
of defining such a mapping 
an explicit set of trades in the offer set generally entails inclusion 
of many more implicit trades we assume payment monotonicity 
which means that agents always prefer more money that is for 
π π 
 x q i s π ∈ ot 
i ⇒ x q i s π ∈ ot 
i 
 x q b i π ∈ ot 
i ⇒ x q b i π ∈ ot 
i 
we also assume free disposal which dictates that for all i q 
q 
 x q i s π ∈ ot 
i ⇒ x q i s π ∈ ot 
i 
 x q b i π ∈ ot 
i ⇒ x q b i π ∈ ot 
i 
note that the conditions for agents in the role of buyers and sellers 
are analogous henceforth for expository simplicity we present 
all definitions with respect to buyers only leaving the definition 
for sellers as understood allowing agents bids to comprise offers 
from both buyer and seller perspectives is also straightforward 
an assertion that offers are divisible entails further implicit 
members in the trade offer set 
definition divisible offer agent i s offer is 
divisible down to q iff 
∀q q q x q i s π ∈ ot 
i ⇒ x q i s q 
q 
π ∈ ot 
i 
we employ the shorthand divisible to mean divisible down to 
the definition above specifies arbitrary divisibility it would 
likewise be possible to define divisibility with respect to integers or to 
any given finite granularity note that when offers are divisible it 
suffices to specify one offer corresponding to the maximal quantity 
one is willing to trade for any given configuration trading partner 
and per-unit payment called the price 
at the extreme of indivisibility are all-or-none offers 
definition aon offer agent i s offer is all-or-none 
 aon iff 
 x q i s π ∈ ot 
i ∧ x q i s π ∈ ot 
i ⇒ q q ∨ π π 
in many cases the agent will be indifferent with respect to 
different trading partners in that event it may omit the partner element 
from trades directly specified in its offer set and simply assert that 
its offer is anonymous 
definition anonymity agent i s offer is anonymous 
iff ∀s s b b x q i s π ∈ ot 
i ⇔ x q i s π ∈ ot 
i ∧ 
 x q b i π ∈ ot 
i ⇔ x q b i π ∈ ot 
i 
because omitting trading partner qualifications simplifies the 
exposition we generally assume in the following that all offers are 
anonymous unless explicitly specified otherwise extending to the 
non-anonymous case is conceptually straightforward we employ 
the wild-card symbol in place of an agent identifier to indicate 
that any agent is acceptable 
to specify a trade offer set a bidder directly specifies a set of 
willing trades along with any regularity conditions e g 
divisibility anonymity that implicitly extend the set the full trade offer 
set is then defined by the closure of this direct set with respect to 
payment monotonicity free disposal and any applicable 
divisibility assumptions 
we next consider the specification of combination offer sets 
without loss of generality we restrict each trade set t ∈ oc 
i to 
include at most one trade for any combination of configuration and 
trading partner multiple such trades are equivalent to one net trade 
aggregating the quantities and payments the key question is to 
what extent the agent is willing to aggregate deals across 
configurations or trading partners one possibility is disallowing any 
aggregation 
 
definition no aggregation the no-aggregation 
combinations are given by ona 
i ∅ ∪ t t ∈ ot 
i agent i s 
offer exhibits non-aggregation iff oc 
i ona 
i 
we require in general that oc 
i ⊇ ona 
i 
a more flexible policy is to allow aggregation across trading 
partners keeping configuration constant 
definition partner aggregation suppose a 
particular trade is offered in the same context set of additional trades 
t with two different sellers s and s that is 
 x q i s π ∪ t ∈ oc 
i ∧ x q i s π ∪ t ∈ oc 
i 
agent i s offer allows seller aggregation iff in all such cases 
 x q i s π x q − q i s π − π ∪ t ∈ oc 
i 
in other words we may create new trade offer combinations by 
splitting the common trade quantity and payment not necessarily 
proportionately between the two sellers 
in some cases it might be reasonable to form combinations by 
aggregating different configurations 
definition configuration aggregation suppose 
agent i offers in the same context the same quantity of two not 
necessarily different configurations x and x that is 
 x q i π ∪ t ∈ oc 
i ∧ x q i π ∪ t ∈ oc 
i 
agent i s offer allows configuration aggregation iff in all such cases 
 and analogously when it is a seller 
 x q i 
q 
q 
π x q − q i 
q − q 
q 
π ∪ t ∈ oc 
i 
note that combination offer sets can accommodate offerings of 
configuration bundles however classes of bundles formed by 
partner or configuration aggregation are highly regular covering only a 
specific type of bundle formed by splitting a desired quantity across 
configurations this is quite restrictive compared to the general 
combinatorial case 
 willingness to pay 
an agent s offer trade set implicitly defines the agent s 
willingness to pay for any given configuration and quantity we assume 
anonymity to avoid conditioning our definitions on trading partner 
definition willingness to pay agent i s willingness 
to pay for quantity q of configuration x is given by 
ˆub 
i x q max π s t x q i π ∈ ot 
i 
we use the symbol ˆu to recognize that willingness to pay can be 
viewed as a proxy for the agent s utility function measured in 
monetary units the superscript b distinguishes the buyer s 
willingnessto-pay function from a seller s willingness to accept ˆus 
i x q 
defined as the minimum payment seller i will accept for q units of 
configuration x we omit the superscript where the distinction is 
inessential or clear from context 
definition trade quantity bounds agent i s 
minimum trade quantity for configuration x is given by 
qi x min q s t ∃π x q i π ∈ ot 
i 
the agent s maximum trade quantity for x is 
¯qi x max q s t 
∃π x q i π ∈ ot 
i ∧ ¬∃q q x q i π ∈ ot 
i 
when the agent has no offers involving x we take qi x ¯qi x 
 
it is useful to define a special case where all configurations are 
offered in the same quantity range 
definition configuration parity agent i s offers 
exhibit configuration parity iff 
qi x ∧ qi x ⇒ qi x qi x ∧ ¯qi x ¯qi x 
under configuration parity we drop the arguments from trade 
quantity bounds yielding the constants ¯q and q which apply to all offers 
definition linear pricing agent i s offers exhibit 
linear pricing iff for all qi x ≤ q ≤ ¯qi x 
ˆui x q 
q 
¯qi x 
ˆui x ¯qi x 
note that linear pricing assumes divisibility down to qi x given 
linear pricing we can define the unit willingness to pay ˆui x 
ˆui x ¯qi x ¯qi x and take ˆui x q qˆui x for all qi x ≤ 
q ≤ ¯qi x 
in general an agent s willingness to pay may depend on a context 
of other trades the agent is engaging in 
definition willingness to pay in context agent 
i s willingness to pay for quantity q of configuration x in the 
context of other trades t is given by 
ˆub 
i x q t max π s t x q i s π ∪ ti ∈ oc 
i 
lemma if oc 
i is either non aggregating or exhibits linear 
pricing then 
ˆub 
i x q t ˆub 
i x q 
 multiattribute allocation 
definition trade surplus the surplus of trade t 
 x q b s π is given by 
σ t ˆub 
b x q − ˆus 
s x q 
note that the trade surplus does not depend on the payment which 
is simply a transfer from buyer to seller 
definition trade unit surplus the unit surplus 
of trade t x q b s π is given by σ 
 t σ t q 
under linear pricing we can equivalently write σ 
 t ˆub 
b x − 
ˆus 
s x 
definition surplus of a trade in context the 
surplus of trade t x q b s π in the context of other trades t 
σ t t is given by 
ˆub 
b x q t − ˆus 
s x q t 
definition gmap the global multiattribute 
allocation problem gmap is to find the set of acceptable trades 
maximizing total surplus 
max 
t ∈ t 
x 
t∈t 
σ t t \ t s t ∀i ti ∈ oc 
i 
definition mmp the multiattribute matching 
problem mmp is to find a best trade for a given pair of traders 
mmp b s arg max 
t∈ot 
b 
∩ot 
s 
σ t 
if ot 
b ∩ ot 
s is empty we say that mmp has no solution 
 
proofs of all the following results are provided in an extended 
version of this paper available from the authors 
theorem suppose all agents offers exhibit no aggregation 
 definition then the solution to gmap consists of a set of 
trades each of which is a solution to mmp for its specified pair 
of traders 
theorem suppose that each agent s offer set satisfies one 
of the following not necessarily the same sets of conditions 
 no aggregation and configuration parity definitions and 
 divisibility linear pricing and configuration parity 
 definitions and with combination offer set defined as the 
minimal set consistent with configuration aggregation 
 definition 
then the solution to gmap consists of a set of trades each of 
which employs a configuration that solves mmp for its specified 
pair of traders 
let mmpd 
 b s denote a modified version of mmp where ot 
b 
and ot 
s are extended to assume divisibility i e the offer sets are 
taken to be their closures under definition then we can extend 
theorem to allow aggregating agents to maintain aon or 
minquantity offers as follows 
theorem suppose offer sets as in theorem except that 
agents i satisfying configuration aggregation need be divisible only 
down to qi rather than down to then the solution to gmap 
consists of a set of trades each of which employs the same 
configuration as a solution to mmpd 
for its specified pair of traders 
theorem suppose agents b and s exhibit configuration 
parity divisibility and linear pricing and there exists configuration x 
such that ˆub x − ˆus x then t ∈ mmpd 
 b s iff 
xt arg max 
x 
 ˆub x − ˆus x 
qt min ¯qb ¯qs 
 
the preceding results signify that under certain conditions we 
can divide the global optimization problem into two parts first find 
a bilateral trade that maximizes unit surplus for each pair of traders 
 or total surplus in the non-aggregation case and then use the 
results to find a globally optimal set of trades in the following two 
sections we investigate each of these subproblems 
 utility representation and mmp 
we turn next to consider the problem of finding a best deal 
between pairs of traders the complexity of mmp depends pivotally 
on the representation by bids of offer sets an issue we have 
postponed to this point 
note that issues of utility representation and mmp apply to a 
broad class of multiattribute mechanisms beyond the multiattribute 
call markets we emphasize for example the complexity results 
contained in this section apply equally to the bidding problem faced 
by sellers in reverse auctions given a published buyer scoring 
function 
the simplest representation of an offer set is a direct 
enumeration of configurations and associated quantities and payments this 
approach treats the configurations as atomic entities making no use 
 
that is for such an agent i oc 
i is the closure under configuration 
aggregation of ona 
i 
of attribute structure a common and inexpensive enhancement is 
to enable a trader to express sets of configurations by specifying 
subsets of the domains of component attributes associating a 
single quantity and payment with a set of configurations expresses 
indifference among them hence we refer to such a set as an 
indifference range 
indifference ranges include the case of attributes 
with a natural ordering in which a bid specifies a minimum or 
maximum acceptable attribute level the use of indifference ranges 
can be convenient for mmp the compatibility of two indifference 
ranges is simply found by testing set intersection for each attribute 
as demonstrated by the decision-tree algorithm of fink et al 
alternatively bidders may specify willingness-to-pay functions 
ˆu in terms of compact functional forms enumeration based 
representations even when enhanced with indifference ranges are 
ultimately limited by the exponential size of attribute space 
functional forms may avoid this explosion but only if ˆu reflects 
structure among the attributes moreover even given a compact 
specification of ˆu we gain computational benefits only if we can 
perform the matching without expanding the ˆu values of an 
exponential number of configuration points 
 additive forms 
one particularly useful multiattribute representation is known as 
the additive scoring function though this form is widely used in 
practice and in the academic literature it is important to stress the 
assumptions behind it the theory of multiattribute representation 
is best developed in the context where ˆu is interpreted as a 
utility function representing an underlying preference order we 
present the premises of additive utility theory in this section and 
discuss some generalizations in the next 
definition a set of attributes y ⊂ x is preferentially 
independent pi of its complement z x \ y if the conditional 
preference order over y given a fixed level z 
of z is the same 
regardless of the choice of z 
 
in other words the preference order over the projection of x on 
the attributes in y is the same for any instantiation of the attributes 
in z 
definition x x xm is mutually preferentially 
independent mpi if any subset of x is preferentially independent 
of its complement 
theorem a preference order over set of attributes 
x has an additive utility function representation 
u x xm 
mx 
i 
ui xi 
iff x is mutually preferential independent 
a utility function over outcomes including money is quasi-linear 
if the function can be represented as a function over non-monetary 
attributes plus payments π interpreting ˆu as a utility function over 
non-monetary attributes is tantamount to assuming quasi-linearity 
even when quasi-linearity is assumed however mpi over 
nonmonetary attributes is not sufficient for the quasi-linear utility 
function to be additive for this we also need that each of the pairs 
 π xi for any attribute xi would be pi of the rest of the attributes 
 
these should not be mistaken with indifference curves which 
express dependency between the attributes indifference curves can 
be expressed by the more elaborate utility representations discussed 
below 
 
this by maut in turn implies that the set of attributes including 
money is mpi and the utility function can be represented as 
u x xm π 
mx 
i 
ui xi π 
given that form a willingness-to-pay function reflecting u can be 
represented additively as 
ˆu x 
mx 
i 
ui xi 
in many cases the additivity assumption provides practically 
crucial simplification of offer set elicitation in addition to 
compactness additivity dramatically simplifies mmp if both sides provide 
additive ˆu representations the globally optimal match reduces to 
finding the optimal match separately for each attribute 
a common scenario in procurement has the buyer define an 
additive scoring function while suppliers submit enumerated offer 
points or indifference ranges this model is still very amenable to 
mmp for each element in a supplier s enumerated set we optimize 
each attribute by finding the point in the supplier s allowable range 
that is most preferred by the buyer 
a special type of scoring more particularly cost function was 
defined by bichler and kalagnanam and called a configurable 
offer this idea is geared towards procurement auctions assuming 
suppliers are usually comfortable with expressing their preferences 
in terms of cost that is quasi-linear in every attribute they can 
specify a price for a base offer and additional cost for every change in 
a specific attribute level this model is essentially a pricing out 
approach for this case mmp can still be optimized on a 
per-attribute basis a similar idea has been applied to one-sided 
iterative mechanisms in which sellers refine prices on a 
perattribute basis at each iteration 
 multiattribute utility theory 
under mpi the tradeoffs between the attributes in each subset 
cannot be affected by the value of other attributes for example 
when buying a pc a weaker cpu may increase the importance of 
the ram compared to say the type of keyboard such 
relationships cannot be expressed under an additive model 
multiattribute utility theory maut develops various compact 
representations of utility functions that are based on weaker 
structural assumptions there are several challenges in adapting 
these techniques to multiattribute bidding first as noted above 
the theory is developed for utility functions which may behave 
differently from willingness-to-pay functions second computational 
efficiency of matching has not been an explicit goal of most work 
in the area third adapting such representations to iterative 
mechanisms may be more challenging 
one representation that employs somewhat weaker assumptions 
than additivity yet retains the summation structure is the 
generalized additive ga decomposition 
u x 
jx 
j 
fj xj 
 xj 
∈ xj 
 
where the xj 
are potentially overlapping sets of attributes together 
exhausting the space x 
a key point from our perspective is that the complexity of the 
matching is similar to the complexity of optimizing a single 
function since the sum function is in the form as well recent work 
by gonzales and perny provides an elicitation process for ga 
decomposable preferences under certainty as well as an 
optimization algorithm for the ga decomposed function the complexity of 
exact optimization is exponential in the induced width of the graph 
however to become operational for multiattribute bidding this 
decomposition must be detectable and verifiable by statements over 
preferences with respect to price outcomes we are exploring this 
topic in ongoing work 
 solving gmap under allocation 
constraints 
theorems and establish conditions under which gmap 
solutions must comprise elements from constituent mmp solutions 
in sections and we show how to compute these gmap 
solutions given the mmp solutions under these conditions in these 
settings traders that aggregate partners also aggregate 
configurations hence we refer to them simply as aggregating or 
nonaggregating section suggests a means to relax the linear 
pricing restriction employed in these constructions section 
provides strategies for allowing traders to aggregate partners and 
restrict configuration aggregation at the same time 
 notation and graphical representation 
our clearing algorithms are based on network flow formulations 
of the underlying optimization problem the network model is 
based on a bipartite graph in which nodes on the left side represent 
buyers and nodes on the right represent sellers we denote the sets 
of buyers and sellers by b and s respectively 
we define two graph families one for the case of non-aggregating 
traders called single-unit and the other for the case of 
aggregating traders called multi-unit 
for both types a single directed 
arc is placed from a buyer i ∈ b to a seller j ∈ s if and only if 
mmp i j is nonempty we denote by t i the set of potential 
trading partners of trader i i e the nodes connected to buyer or 
seller i in the bipartite graph 
in the single-unit case we define the weight of an arc i j as 
wij σ mmp i j note that free disposal lets a buy offer 
receive a larger quantity than desired and similarly for sell offers 
for the multi-unit case the weights are wij σ 
 mmp i j 
and we associate the quantity ¯qi with the node for trader i we also 
use the notation qij for the mathematical formulations to denote 
partial fulfillment of qt for t mmp i j 
 handling indivisibility and aggregation 
constraints 
under the restrictions of theorems or and when the 
solution to mmp is given gmap exhibits strong similarity to the 
problem of clearing double auctions with assignment constraints 
 a match in our bipartite representation corresponds to a 
potential trade in which assignment constraints are satisfied network 
flow formulations have been shown to model this problem under 
the assumption of indivisibility and aggregation for all traders the 
novelty in this part of our work is the use of generalized network 
flow formulations for more complex cases where aggregation and 
divisibility may be controlled by traders 
initially we examine the simple case of no aggregation 
 theorem observe that the optimal allocation is simply the solution 
to the well known weighted assignment problem on the 
singleunit bipartite graph described above the set of matches that 
maximizes the total weight of arcs corresponds to the set of trades that 
maximizes total surplus note that any form of in divisibility can 
 
in the next section we introduce a hybrid form of graph 
accommodating mixes of the two trader categories 
 
also be accommodated in this model via the constituent mmp 
subproblems 
the next formulation solves the case in which all traders fall 
under case of theorem -that is all traders are aggregating and 
divisible and exhibit linear pricing this case can be represented 
using the following linear program corresponding to our multi-unit 
graph 
max 
x 
i∈b j∈s 
wij qij 
s t 
x 
i∈t j 
qij ≤ ¯qj j ∈ s 
x 
j∈t i 
qij ≤ ¯qi i ∈ b 
qij ≥ j ∈ s i ∈ b 
recall that the qij variables in the solution represent the number 
of units that buyer i procures from seller j this formulation is 
known as the network transportation problem with inequality 
constraints for which efficient algorithms are available it is a 
well known property of the transportation problem and flow 
problems on pure networks in general that given integer input values 
the optimal solution is guaranteed to be integer as well figure 
demonstrates the transformation of a set of bids to a transportation 
problem instance 
figure multi-unit matching with two boolean attributes 
 a bids with offers to buy in the left column and offers to 
sell at right q p indicates an offer to trade q units at price p 
per unit configurations are described in terms of constraints 
on attribute values b corresponding multi-unit assignment 
model w represents arc weights unit surplus s represents 
source exogenous flow and t represents sink quantity 
the problem becomes significantly harder when aggregation is 
given as an option to bidders requiring various enhancements to 
the basic multi-unit bipartite graph described above in general 
we consider traders that are either aggregating or not with either 
divisible or aon offers 
initially we examine a special case which at the same time 
demonstrates the hardness of the problem but still carries computational 
advantages we designate one side e g buyers as restrictive aon 
and non-aggregating and the other side sellers as unrestrictive 
 divisible and aggregating this problem can be represented using 
the following integer programming formulation 
max 
x 
i∈b j∈s 
wij qij 
s t 
x 
i∈t j 
¯qiqij ≤ ¯qj j ∈ s 
x 
j∈t i 
qij ≤ i ∈ b 
qij ∈ j ∈ s i ∈ b 
 
this formulation is a restriction of the generalized assignment 
problem gap although gap is known to be np-hard it can 
be solved relatively efficiently by exact or approximate algorithms 
gap is more general than the formulation above as it allows 
buyside quantities ¯qi above to be different for each potential seller 
that this formulation is np-hard as well even the case of a single 
seller corresponds to the knapsack problem illustrates the drastic 
increase in complexity when traders with different constraints are 
admitted to the same problem instance 
other than the special case above we found no advantage in 
limiting aon constraints when traders may specify aggregation 
constraints therefore the next generalization allows any combination 
of the two boolean constraints that is any trader chooses among 
four bid types 
ni bid aon and not aggregating 
ad bid allows aggregation and divisibility 
ai bid aon allows aggregation quantity can be aggregated across 
configurations as long as it sums to the whole amount 
nd no aggregation divisibility one trade but smaller quantities 
are acceptable 
to formulate an integer programming representation for the 
problem we introduce the following variables boolean variables 
ri and rj indicate whether buyer i and seller j participate in the 
solution used for aon traders another indicator variable yij 
applied to non-aggregating buyer i and seller j is one iff i trades 
with j for aggregating traders yij is not constrained 
max 
x 
i∈b j∈s 
wij qij a 
s t 
x 
j∈t i 
qij ¯qiri i ∈ aib b 
x 
j∈t i 
qij ≤ ¯qiri i ∈ adb c 
x 
i∈t j 
qij ¯qirj j ∈ ais d 
x 
i∈t j 
qij ≤ qj rj j ∈ ads e 
xij ≤ ¯qiyij i ∈ ndb j ∈ t i f 
xij ≤ ¯qj yij j ∈ nis i ∈ t j g 
x 
j∈t i 
yij ≤ ri i ∈ nib ∪ ndb h 
x 
i∈t j 
yij ≤ rj j ∈ nis ∪ nds i 
int qij j 
yij rj ri ∈ k 
 
figure generalized network flow model b is a buyer in 
ad b ∈ ni b ∈ ai b ∈ nd v is a seller in nd 
v ∈ ai v ∈ ad the g values represent arc gains 
problem has additional structure as a generalized min-cost 
flow problem with integral flow 
a generalized flow network is 
a network in which each arc may have a gain factor in addition 
to the pure network parameters which are flow limits and costs 
flow in an arc is then multiplied by its gain factor so that the flow 
that enters the end node of an arc equals the flow that entered from 
its start node multiplied by the gain factor of the arc the network 
model can in turn be translated into an ip formulation that captures 
such structure 
the generalized min-cost flow problem is well-studied and has 
a multitude of efficient algorithms the faster algorithms are 
polynomial in the number of arcs and the logarithm of the maximal 
gain that is performance is not strongly polynomial but is 
polynomial in the size of the input the main benefit of this graphical 
formulation to our matching problem is that it provides a very 
efficient linear relaxation integer programming algorithms such as 
branch-and-bound use solutions to the linear relaxation instance to 
bound the optimal integer solution since network flow algorithms 
are much faster than arbitrary linear programs generalized network 
flow simplex algorithms have been shown to run in practice only 
or times slower than pure network min-cost flow we expect 
a branch-and-bound solver for the matching problem to show 
improved performance when taking advantage of network flow 
modeling 
the network flow formulation is depicted in figure 
nonrestrictive traders are treated as in figure for a non-aggregating 
buyer a single unit from the source will saturate up to one of the 
yij for all j and be multiplied by ¯qi if i ∈ nd the end node of 
yij will function as a sink that may drain up to ¯qi of the entering 
flow for i ∈ ni we use an indicator arc ri on which the 
flow is multiplied by ¯qi trader i trades the full quantity iff ri 
at the seller side the end node of a qij arc functions as a source 
for sellers j ∈ nd in order to let the flow through yij 
arcs be 
or ¯qj the flow is then multiplied by 
¯qj 
so flows enter an end 
node which can drain either or units for sellers j ∈ ni arcs rj 
ensure aon similarly to arcs rj for buyers 
having established this framework we are ready to 
accommo 
constraint j could be omitted yielding computational savings 
if non-integer quantities are allowed here and henceforth we 
assume the harder problem where divisibility is with respect to 
integers 
date more flexible versions of side constraints the first 
generalization is to replace the boolean aon constraint with divisibility down 
to q the minimal quantity in our network flow instance we simply 
need to turn the node of the constrained trader i e g the node b 
in figure to a sink that can drain up to ¯qi − qi units of flow the 
integer program can be also easily changed to accommodate 
this extension 
using gains we can also apply batch size constraints if a trader 
specifies a batch size β we change the gain on the r arcs to β and 
set the available flow of its origin to the maximal number of batches 
¯qi β 
 nonlinear pricing 
a key assumption in handling aggregation up to this point is 
linear pricing which enables us to limit attention to a single unit 
price divisibility without linear pricing allows expression of 
concave willingness-to-pay functions corresponding to convex 
preference relations bidders may often wish to express non-convex offer 
sets for example due to fixed costs or switching costs in 
production settings 
we consider nonlinear pricing in the form of enumerated 
payment schedules-that is defining values ˆu x q for a select set of 
quantities q for the indivisible case these points are distinguished 
in the offer set by satisfying the following 
∃π x q i π ∈ ot 
i ∧ ¬∃q q x q i π ∈ ot 
i 
 cf definition which defines the maximum quantity ¯q as the 
largest of these for the divisible case the distinguished quantities 
are those where the unit price changes which can be formalized 
similarly 
to handle nonlinear pricing we augment the network to include 
flow possibilities corresponding to each of the enumerated 
quantities plus additional structure to enforce exclusivity among them 
in other words the network treats the offer for a given quantity as 
in section and embeds this in an xor relation to ensure that 
each trader picks only one of these quantities since for each such 
quantity choice we can apply theorem or the solution we get 
is in fact the solution to gmap 
the network representation of the xor relation which can be 
embedded into the network of figure is depicted in figure for 
a trader i with k xor quantity points we define dummy variables 
zk 
i k k since we consider trades between every pair 
of quantity points we also have qk 
ij 
 k k for buyer 
i ∈ ai with xor points at quantities ¯qk 
i we replace b with the 
following constraints 
x 
j∈t i 
qk 
ij 
 ¯qk 
i zk 
i k k 
kx 
k 
zk 
i ri 
zk 
i ∈ k k 
 
 homogeneity constraints 
the model handles constraints over the aggregation of 
quantities from different trading partners when aggregation is allowed 
the formulation permits trades involving arbitrary combinations of 
configurations a homogeneity constraint restricts such 
combinations by requiring that configurations aggregated in an overall 
deal must agree on some or all attributes 
 
figure extending the network flow model to express an xor 
over quantities b has xor points for or units 
in the presence of homogeneity constraints we can no longer 
apply the convenient separation of gmap into mmp plus global 
bipartite optimization as the solution to gmap may include trades 
not part of any mmp solution for example let buyer b specify 
an offer for maximum quantity of various acceptable 
configurations with a homogeneity constraint over the attribute color 
this means b is willing to aggregate deals over different trading 
partners and configurations as long as all are the same color if 
seller s can provide blue units or green units and seller s can 
provide only green units we may prefer that b and s trade on 
green units even if the local surplus of a blue trade is greater 
let x xh be attributes that some trader constrains to 
be homogeneous to preserve the network flow framework we 
need to consider for each trader every point in the product domain 
of these homogeneous attributes thus for every assignment ˆx 
to the homogeneous attributes we compute mmp b s under the 
constraint that configurations are consistent with ˆx we apply the 
same approach as in section solve the global optimization 
such that the alternative ˆx assignments for each trader are combined 
under xor semantics thus enforcing homogeneity constraints 
the size of this network is exponential in the number of 
homogeneous attributes since we need a node for each point in the product 
domain of all the homogeneous attributes of each trader 
hence 
this solution method will only be tractable in applications were the 
traders can be limited to a small number of homogeneous attributes 
it is important to note that the graph needs to include a node only 
for each point that potentially matches a point of the other side it 
is therefore possible to make the problem tractable by limiting one 
of the sides to a less expressive bidding language and by that limit 
the set of potential matches for example if sellers submit bounded 
sets of xor points we only need to consider the points in the 
combined set offered by the sellers and the reduction to network flow 
is polynomial regardless of the number of homogeneous attributes 
if such simplifications do not apply it may be preferable to solve 
the global problem directly as a single optimization problem we 
provide the formulation for the special case of divisibility with 
respect to integers and configuration parity let i index buyers j 
sellers and h homogeneous attributes variable xh 
ij 
∈ xh 
represents the value of attribute xh in the trade between buyer i and 
seller j integer variable qij represents the quantity of the trade 
 zero for no trade between i and j 
 
if traders differ on which attributes they express such constraints 
we can limit consideration to the relevant alternatives the 
complexity will still be exponential but in the maximum number of 
homogeneous attributes for any pair of traders 
max 
x 
i∈b j∈s 
 ˆub 
i xij qij − ˆus 
j xij qij 
x 
j∈s 
qij ≤ ¯qi i ∈ b 
x 
i∈b 
qij ≤ ¯qj j ∈ s 
xh 
 j 
 xh 
 j 
 · · · x b j 
j ∈ s h ∈ h 
xh 
i 
 xh 
i 
 · · · xi s 
i ∈ b h ∈ h 
 
table summarizes the mapping we presented from allocation 
constraints to the complexity of solving gmap configuration 
parity is assumed for all cases but the first 
 experimental results 
we approach the experimental aspect of this work with two 
objectives first we seek a general idea of the sizes and types of 
clearing problems that can be solved under given time constraints we 
also look to compare the performance of a straightforward integer 
program as in with an integer program that is based on the 
network formulations developed here since we used cplex a 
commercial optimization tool the second objective could be achieved 
to the extent that cplex can take advantage of network structure 
present in a model 
we found that in addition to the problem size in terms of number 
of traders the number of aggregating traders plays a crucial role in 
determining complexity when most of the traders are aggregating 
problems of larger sizes can be solved quickly for example our 
ip model solved instances with buyers and sellers where 
 of them are aggregating in less than two minutes when the 
aggregating ratio was reduced to for the same data solution 
time was just under five minutes 
these results motivated us to develop a new network model 
rather than treat non-aggregating traders as a special case the new 
model takes advantage of the single-unit nature of non-aggregating 
trades treating the aggregating traders as a special case this new 
model outperformed our other models on most problem instances 
exceptions being those where aggregating traders constitute a vast 
majority at least 
this new model figure has a single node for each non 
aggregating trader with a single-unit arc designating a match to another 
non-aggregating trader an aggregating trader has a node for each 
potential match connected via y arcs to a mutual source node 
unlike the previous model we allow fractional flow for this case 
representing the traded fraction of the buyer s total quantity 
we tested all three models on random data in the form of 
bipartite graphs encoding mmp solutions in our experiments each 
trader has a maximum quantity uniformly distributed over 
and minimum quantity uniformly distributed from zero to maximal 
quantity each buyer seller pair is selected as matching with 
probability with matches assigned a surplus uniformly distributed 
over whereas the size of the problem is defined by the 
number of traders on each side the problem complexity depends 
on the product b × s the tests depicted in figures - are 
for the worst case b s with each data point averaged over 
six samples in the figures the direct ip is designated sw 
our first network model figure nw and our revised network 
model figure nw 
 
traded quantity remains integer 
 
aggregation hom attr divisibility linear pricing technique complexity 
no aggregation n a any not required assignment problem polynomial 
all aggregate none down to required transpor problem polynomial 
one side none aggr side div aggr side gap np-hard 
optional none down to q batch required generalized ntwrk flow np-hard 
optional bounded down to q batch bounded size schdl generalized ntwrk flow np-hard 
optional not bounded down to q batch not required nonlinear opt depends on ˆu x q 
table mapping from combinations of allocation constraints to the solution methods of gmap one side means that one side 
aggregates and divisible and the other side is restrictive batch means that traders may submit batch sizes 
figure generalized network flow model b is a buyer in 
ad b ∈ ai b ∈ ni b ∈ nd v is a seller in ad 
v ∈ ai v ∈ nd the g values represent arc gains and w 
values represent weights 
figure average performance of models when of traders 
aggregate 
figure average performance of models when of traders 
aggregate 
figure average performance of models when of traders 
aggregate 
 
figure performance of models when varying percentage of 
aggregating traders 
figure shows how the various models are affected by a change 
in the percentage of aggregating traders holding problem size fixed 
due to the integrality constraints we could not test available 
algorithms specialized for network-flow problems on our test 
problems thus we cannot fully evaluate the potential gain attributable 
to network structure however the model we built based on the 
insight from the network structure clearly provided a significant 
speedup even without using a special-purpose algorithm model 
nw provided speedups of a factor of - over the model sw 
this was consistent throughout the problem sizes including the 
smaller sizes for which the speedup is not visually apparent on the 
chart 
 conclusions 
the implementation and deployment of market exchanges 
requires the development of bidding languages information feedback 
policies and clearing algorithms that are suitable for the target 
domain while paying heed to the incentive properties of the resulting 
mechanisms for multiattribute exchanges the space of feasible 
such mechanisms is constrained by computational limitations 
imposed by the clearing process the extent to which the space of 
feasible mechanisms may be quantified a priori will facilitate the 
search for such exchanges in the full mechanism design problem 
in this work we investigate the space of two-sided multiattribute 
auctions focusing on the relationship between constraints on the 
offers traders can express through bids and the resulting 
computational problem of determining an optimal set of trades we 
developed a formal semantic framework for characterizing expressible 
offers and introduced some basic classes of restrictions our key 
technical results identify sets of conditions under which the 
overall matching problem can be separated into first identifying 
optimal pairwise trades and subsequently optimizing combinations of 
those trades based on these results we developed network flow 
models for the overall clearing problem which facilitate 
classification of problem versions by computational complexity and provide 
guidance for developing solution algorithms and relaxing bidding 
constraints 
 acknowledgments 
this work was supported in part by nsf grant iis- and 
the stiet program under nsf igert grant we are 
 
all tests were performed on intel ghz processors with 
kb cache test that did not complete by the one-hour time limit 
were recorded as seconds 
grateful to comments from an anonymous reviewer some of the 
underlying ideas were developed while the first two authors worked 
at tradingdynamics inc and ariba inc in - cf us 
patent we thank yoav shoham kumar ramaiyer and 
gopal sundaram for fruitful discussions about multiattribute 
auctions in that time frame 
 references 
 r k ahuja t l magnanti and j b orlin network flows 
prentice-hall 
 f bacchus and a grove graphical models for preference and 
utility in eleventh conference on uncertainty in artificial 
intelligence pages - montreal 
 m bichler the future of e-markets multi-dimensional market 
mechanisms cambridge u press new york ny usa 
 m bichler and j kalagnanam configurable offers and winner 
determination in multi-attribute auctions european journal of 
operational research - 
 m bichler m kaukal and a segev multi-attribute auctions for 
electronic procurement in proceedings of the st ibm iac 
workshop on internet based negotiation technologies 
 c boutilier t sandholm and r shields eliciting bid taker 
non-price preferences in combinatorial auctions in nineteenth 
natl conf on artificial intelligence pages - san jose 
 f branco the design of multidimensional auctions rand journal 
of economics - 
 y -k che design competition through multidimensional auctions 
rand journal of economics - 
 g debreu topological methods in cardinal utility theory in 
k arrow s karlin and p suppes editors mathematical methods 
in the social sciences stanford university press 
 n economides and r a schwartz electronic call market trading 
journal of portfolio management 
 y engel and m p wellman multiattribute utility representation for 
willingness-to-pay functions tech report univ of michigan 
 e fink j johnson and j hu exchange market for complex goods 
theory and experiments netnomics - 
 m l fisher r jaikumar and l n van wassenhove a multiplier 
adjustment method for the generalized assignment problem 
management science - 
 j gong exchanges for complex commodities search for optimal 
matches master s thesis university of south florida 
 c gonzales and p perny gai networks for decision making under 
certainty in ijcai- workshop on preferences edinburgh 
 j r kalagnanam a j davenport and h s lee computational 
aspects of clearing continuous call double auctions with assignment 
constraints and indivisible demand electronic commerce research 
 - 
 r l keeney and h raiffa decisions with multiple objectives 
preferences and value tradeoffs wiley 
 n nisan bidding and allocation in combinatorial auctions in 
second acm conference on electronic commerce pages - 
minneapolis mn 
 d c parkes and j kalagnanam models for iterative multiattribute 
procurement auctions management science - 
 t sandholm and s suri side constraints and non-price attributes in 
markets in ijcai- workshop on distributed constraint 
reasoning seattle 
 l j schvartzman and m p wellman market-based allocation with 
indivisible bids in aamas- workshop on agent-mediated 
electronic commerce utrecht 
 j shachat and j t swarthout procurement auctions for 
differentiated goods technical report economics 
working paper archive at wustl oct 
 a v sunderam and d c parkes preference elicitation in proxied 
multiattribute auctions in fourth acm conference on electronic 
commerce pages - san diego 
 p r wurman m p wellman and w e walsh a parametrization 
of the auction design space games and economic behavior 
 - 
 
