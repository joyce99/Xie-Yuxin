expressive negotiation over donations to charities 
vincent conitzer 
carnegie mellon university 
 forbes avenue 
pittsburgh pa usa 
conitzer cs cmu edu 
tuomas sandholm 
carnegie mellon university 
 forbes avenue 
pittsburgh pa usa 
sandholm cs cmu edu 
abstract 
when donating money to a say charitable cause it is 
possible to use the contemplated donation as negotiating 
material to induce other parties interested in the charity to 
donate more such negotiation is usually done in terms of 
matching offers where one party promises to pay a certain 
amount if others pay a certain amount however in their 
current form matching offers allow for only limited 
negotiation for one it is not immediately clear how multiple 
parties can make matching offers at the same time without 
creating circular dependencies also it is not immediately 
clear how to make a donation conditional on other 
donations to multiple charities when the donator has different 
levels of appreciation for the different charities in both 
these cases the limited expressiveness of matching offers 
causes economic loss it may happen that an arrangement 
that would have made all parties donators as well as 
charities better off cannot be expressed in terms of matching 
offers and will therefore not occur 
in this paper we introduce a bidding language for 
expressing very general types of matching offers over multiple 
charities we formulate the corresponding clearing 
problem deciding how much each bidder pays and how much 
each charity receives and show that it is np-complete to 
approximate to any ratio even in very restricted settings 
we give a mixed-integer program formulation of the 
clearing problem and show that for concave bids the program 
reduces to a linear program we then show that the clearing 
problem for a subclass of concave bids is at least as hard as 
the decision variant of linear programming subsequently 
we show that the clearing problem is much easier when bids 
are quasilinear-for surplus the problem decomposes across 
charities and for payment maximization a greedy approach 
is optimal if the bids are concave although this latter 
problem is weakly np-complete when the bids are not concave 
for the quasilinear setting we study the mechanism design 
question we show that an ex-post efficient mechanism is 
 
supported by nsf under career award iri- 
grant iis- itr iis- and itr iis- 
impossible even with only one charity and a very restricted 
class of bids we also show that there may be benefits to 
linking the charities from a mechanism design standpoint 
categories and subject descriptors 
f theory of computation analysis of algorithms 
and problem complexity j computer applications 
social and behavioral sciences-economics 
general terms 
algorithms economics theory 
 introduction 
when money is donated to a charitable or other cause 
 hereafter referred to as charity often the donating party 
gives unconditionally a fixed amount is transferred from 
the donator to the charity and none of this transfer is 
contingent on other events-in particular it is not contingent 
on the amount given by other parties indeed this is 
currently often the only way to make a donation especially for 
small donating parties such as private individuals however 
when multiple parties support the same charity each of them 
would prefer to see the others give more rather than less to 
this charity in such scenarios it is sensible for a party to 
use its contemplated donation as negotiating material to 
induce the others to give more this is done by making the 
donation conditional on the others donations the 
following example will illustrate this and show that the donating 
parties as well as the charitable cause may simultaneously 
benefit from the potential for such negotiation 
suppose we have two parties and who are both 
supporters of charity a to either of them it would be worth 
 if a received it follows neither of them will be 
willing to give unconditionally because however if 
the two parties draw up a contract that says that they will 
each give both the parties have an incentive to accept 
this contract rather than have no contract at all with the 
contract the charity will receive rather than 
without a contract which is worth to each party which 
is greater than the that that party will have to give 
effectively each party has made its donation conditional on 
the other party s donation leading to larger donations and 
greater happiness to all parties involved 
 
one method that is often used to effect this is to make 
a matching offer examples of matching offers are i will 
give x dollars for every dollar donated or i will give x 
dollars if the total collected from other parties exceeds y 
in our example above one of the parties can make the offer 
i will donate if the other party also donates at least 
that much and the other party will have an incentive to 
indeed donate so that the total amount given to the 
charity increases by thus this matching offer implements 
the contract suggested above as a real-world example the 
united states government has authorized a donation of up to 
 billion to the global fund to fight aids tb and malaria 
under the condition that the american contribution does not 
exceed one third of the total-to encourage other countries 
to give more 
however there are several severe limitations to the simple 
approach of matching offers as just described 
 it is not clear how two parties can make matching 
offers where each party s offer is stated in terms of the 
amount that the other pays for example it is not 
clear what the outcome should be when both parties 
offer to match the other s donation thus matching 
offers can only be based on payments made by 
parties that are giving unconditionally not in terms of a 
matching offer -or at least there can be no circular 
dependencies 
 given the current infrastructure for making matching 
offers it is impractical to make a matching offer 
depend on the amounts given to multiple charities for 
instance a party may wish to specify that it will pay 
 given that charity a receives a total of 
but that it will also count donations made to charity 
b at half the rate thus a total payment of to 
charity a combined with a total payment of to 
charity b would be just enough for the party s offer to 
take effect 
in contrast in this paper we propose a new approach 
where each party can express its relative preferences for 
different charities and make its offer conditional on its own 
appreciation for the vector of donations made to the 
different charities moreover the amount the party offers to 
donate at different levels of appreciation is allowed to vary 
arbitrarily it does need to be a dollar-for-dollar or 
n-dollarfor-dollar matching arrangement or an arrangement where 
the party offers a fixed amount provided a given strike 
total has been exceeded finally there is a clear 
interpretation of what it means when multiple parties are making 
conditional offers that are stated in terms of each other 
given each combination of conditional offers there is a 
 usually unique solution which determines how much each 
party pays and how much each charity is paid 
however as we will show finding this solution the 
clearing problem requires solving a potentially difficult 
optimization problem a large part of this paper is devoted to 
studying how difficult this problem is under different assumptions 
on the structure of the offers and providing algorithms for 
solving it 
 
typically larger organizations match offers of private 
individuals for example the american red cross liberty 
disaster fund maintains a list of businesses that match their 
customers donations 
towards the end of the paper we also study the 
mechanism design problem of motivating the bidders to bid 
truthfully 
in short expressive negotiation over donations to charities 
is a new way in which electronic commerce can help the 
world a web-based implementation of the ideas described 
in this paper can facilitate voluntary reallocation of wealth 
on a global scale aditionally optimally solving the clearing 
problem and thereby generating the maximum economic 
welfare requires the application of sophisticated algorithms 
 comparison to combinatorial 
auctions and exchanges 
this section discusses the relationship between expressive 
charity donation and combinatorial auctions and exchanges 
it can be skipped but may be of interest to the reader with 
a background in combinatorial auctions and exchanges 
in a combinatorial auction there are m items for sale 
and bidders can place bids on bundles of one or more items 
the auctioneer subsequently labels each bid as winning or 
losing under the constraint that no item can be in more 
than one winning bid to maximize the sum of the values of 
the winning bids this is known as the clearing problem 
variants include combinatorial reverse auctions where the 
auctioneer is seeking to procure a set of items and 
combinatorial exchanges where bidders can both buy and and sell 
items even within the same bid other extensions include 
allowing for side constraints as well as the specification of 
attributes of the items in bids combinatorial auctions and 
exchanges have recently become a popular research topic 
 
the problems of clearing expressive charity donation 
markets and clearing combinatorial auctions or exchanges are 
very different in formulation nevertheless there are 
interesting parallels one of the main reasons for the interest 
in combinatorial auctions and exchanges is that it allows 
for expressive bidding a bidder can express exactly how 
much each different allocation is worth to her and thus the 
globally optimal allocation may be chosen by the 
auctioneer compare this to a bidder having to bid on two different 
items in two different one-item auctions without any way 
of expressing that for instance one item is worthless if the 
other item is not won in this scenario the bidder may win 
the first item but not the second because there was another 
high bid on the second item that she did not anticipate 
leading to economic inefficiency 
expressive bidding is also one of the main benefits of the 
expressive charity donation market here bidders can 
express exactly how much they are willing to donate for every 
vector of amounts donated to charities this may allow 
bidders to negotiate a complex arrangement of who gives 
how much to which charity which is beneficial to all 
parties involved whereas no such arrangement may have been 
possible if the bidders had been restricted to using simple 
matching offers on individual charities again expressive 
bidding is necessary to achieve economic efficiency 
another parallel is the computational complexity of the 
clearing problem in order to achieve the full economic 
efficiency allowed by the market s expressiveness or even come 
close to it hard computational problems must be solved 
in combinatorial auctions and exchanges as well as in the 
charity donation market as we will see 
 
 definitions 
throughout this paper we will refer to the offers that the 
donating parties make as bids and to the donating parties 
as bidders in our bidding framework a bid will specify 
for each vector of total payments made to the charities how 
much that bidder is willing to contribute the contribution 
of this bidder is also counted in the vector of 
paymentsso the vector of total payments to the charities represents 
the amount given by all donating parties not just the ones 
other than this bidder the bidding language is expressive 
enough that no bidder should have to make more than one 
bid the following definition makes the general form of a 
bid in our framework precise 
definition in a setting with m charities c c cm 
a bid by bidder bj is a function vj rm 
→ r the 
interpretation is that if charity ci receives a total amount of πci then 
bidder j is willing to donate up to vj πc πc πcm 
we now define possible outcomes in our model and which 
outcomes are valid given the bids that were made 
definition an outcome is a vector of payments made 
by the bidders πb πb πbn and a vector of payments 
received by the charities πc πc πcm a valid 
outcome is an outcome where 
 
n 
j 
πbj ≥ 
m 
i 
πci at least as much money is collected 
as is given away 
 for all ≤ j ≤ n πbj ≤ vj πc πc πcm no 
bidder gives more than she is willing to 
of course in the end only one of the valid outcomes can 
be chosen we choose the valid outcome that maximizes the 
objective that we have for the donation process 
definition an objective is a function from the set of 
all outcomes to r 
after all bids have been collected a valid 
outcome will be chosen that maximizes this objective 
one example of an objective is surplus given by 
n 
j 
πbj − 
m 
i 
πci the surplus could be the profits of a company 
managing the expressive donation marketplace but 
alternatively the surplus could be returned to the bidders or 
given to the charities another objective is total amount 
donated given by 
m 
i 
πci here different weights could also 
be placed on the different charities 
finding the valid outcome that maximizes the objective 
is a nontrivial computational problem we will refer to it 
as the clearing problem the formal definition follows 
definition donation-clearing we are 
given a set of n bids over charities c c cm 
additionally we are given an objective function we are asked to 
find an objective-maximizing valid outcome 
how difficult the donation-clearing problem is 
depends on the types of bids used and the language in which 
they are expressed this is the topic of the next section 
 
in general the objective function may also depend on the 
bids but the objective functions under consideration in this 
paper do not depend on the bids the techniques presented 
in this paper will typically generalize to objectives that take 
the bids into account directly 
 a simplified bidding language 
specifying a general bid in our framework as defined 
above requires being able to specify an arbitrary real-valued 
function over rm 
 even if we restricted the possible total 
payment made to each charity to the set s this 
would still require a bidder to specify s m 
values thus 
we need a bidding language that will allow the bidders to 
at least specify some bids more concisely we will specify a 
bidding language that only represents a subset of all possible 
bids which can be described concisely 
to introduce our bidding language we will first describe 
the bidding function as a composition of two functions then 
we will outline our assumptions on each of these functions 
first there is a utility function uj rm 
→ r specifying how 
much bidder j appreciates a given vector of total donations 
to the charities note that the way we define a bidder s 
utility function it does not take the payments the bidder 
makes into account then there is a donation willingness 
function wj r → r which specifies how much bidder j is 
willing to pay given her utility for the vector of donations 
to the charities we emphasize that this function does not 
need to be linear so that utilities should not be thought of as 
expressible in dollar amounts indeed when an individual 
is donating to a large charity the reason that the individual 
donates only a bounded amount is typically not decreasing 
marginal value of the money given to the charity but rather 
that the marginal value of a dollar to the bidder herself 
becomes larger as her budget becomes smaller so we have 
wj uj πc πc πcm vj πc πc πcm and we 
let the bidder describe her functions uj and wj separately 
 she will submit these functions as her bid 
our first restriction is that the utility that a bidder 
derives from money donated to one charity is independent of 
the amount donated to another charity thus 
uj πc πc πcm 
m 
i 
ui 
j πci we observe that this 
does not imply that the bid function vj decomposes 
similarly because of the nonlinearity of wj furthermore each 
ui 
j must be piecewise linear an interesting special case 
which we will study is when each ui 
j is a line ui 
j πci 
ai 
jπci this special case is justified in settings where the 
scale of the donations by the bidders is small relative to the 
amounts the charities receive from other sources so that the 
marginal use of a dollar to the charity is not affected by the 
amount given by the bidders 
the only restriction that we place on the payment 
willingness functions wj is that they are piecewise linear one 
interesting special case is a threshold bid where wj is a step 
function the bidder will provide t dollars if her utility 
exceeds s and otherwise another interesting case is when 
such a bid is partially acceptable the bidder will provide t 
dollars if her utility exceeds s but if her utility is u s she 
is still willing to provide ut 
s 
dollars 
one might wonder why if we are given the bidders utility 
functions we do not simply maximize the sum of the 
utilities rather than surplus or total donated there are several 
reasons first because affine transformations do not affect 
utility functions in a fundamental way it would be 
possi 
of course our bidding language can be trivially extended 
to allow for fully expressive bids by also allowing bids from 
a fully expressive bidding language in addition to the bids 
in our bidding language 
 
ble for a bidder to inflate her utility by changing its units 
thereby making her bid more important for utility 
maximization purposes second a bidder could simply give a 
payment willingness function that is everywhere and have 
her utility be taken into account in deciding on the outcome 
in spite of her not contributing anything 
 avoiding indirect payments 
in an initial implementation the approach of having 
donations made out to a center and having a center forward 
these payments to charities may not be desirable rather it 
may be preferable to have a partially decentralized solution 
where the donating parties write out checks to the charities 
directly according to a solution prescribed by the center in 
this scenario the center merely has to verify that parties are 
giving the prescribed amounts advantages of this include 
that the center can keep its legal status minimal as well 
as that we do not require the donating parties to trust the 
center to transfer their donations to the charities or require 
some complicated verification protocol it is also a step 
towards a fully decentralized solution if this is desirable 
to bring this about we can still use the approach 
described earlier after we clear the market in the manner 
described before we know the amount that each donator is 
supposed to give and the amount that each charity is 
supposed to receive then it is straightforward to give some 
specification of who should give how much to which charity 
that is consistent with that clearing any greedy algorithm 
that increases the cash flow from any bidder who has not 
yet paid enough to any charity that has not yet received 
enough until either the bidder has paid enough or the 
charity has received enough will provide such a specification 
 all of this is assuming that 
bj 
πbj 
ci 
πci in the case 
where there is nonzero surplus that is 
bj 
πbj 
ci 
πci we 
can distribute this surplus across the bidders by not 
requiring them to pay the full amount or across the charities by 
giving them more than the solution specifies 
nevertheless with this approach a bidder may have to 
write out a check to a charity that she does not care for at 
all for example an environmental activist who was using 
the system to increase donations to a wildlife preservation 
fund may be required to write a check to a group 
supporting a right-wing political party this is likely to lead to 
complaints and noncompliance with the clearing we can 
address this issue by letting each bidder specify explicitly 
 before the clearing which charities she would be willing 
to make a check out to these additional constraints of 
course may change the optimal solution in general 
checking whether a given centralized solution with zero surplus 
can be accomplished through decentralized payments when 
there are such constraints can be modeled as a max-flow 
problem in the max-flow instance there is an edge from 
the source node s to each bidder bj with a capacity of πbj 
 as specified in the centralized solution an edge from each 
bidder bj to each charity ci that the bidder is willing to 
donate money to with a capacity of ∞ and an edge from each 
charity ci to the target node t with capacity πci as specified 
in the centralized solution 
in the remainder of this paper all our hardness results 
apply even to the setting where there is no constraint on which 
bidders can pay to which charity that is even the problem 
as it was specified before this section is hard we also 
generalize our clearing algorithms to the partially decentralized 
case with constraints 
 hardness of clearing the 
market 
in this section we will show that the clearing problem is 
completely inapproximable even when every bidder s utility 
function is linear with slope or in each charity s 
payments each bidder cares either about at most two charities 
or about all charities equally and each bidder s payment 
willingness function is a step function we will reduce from 
max sat given a formula in conjunctive normal form 
 where each clause has two literals and a target number of 
satisfied clauses t does there exist an assignment of truth 
values to the variables that makes at least t clauses true 
which is np-complete 
theorem there exists a reduction from max sat 
instances to donation-clearing instances such that 
 if the max sat instance has no solution then the 
only valid outcome is the zero outcome no bidder pays 
anything and no charity receives anything otherwise there 
exists a solution with positive surplus additionally the 
donation-clearing instances that we reduce to have 
the following properties every ui 
j is a line that is the 
utility that each bidder derives from any charity is linear 
all the ui 
j have slope either or every bidder either 
has at most charities that affect her utility with slope 
or all charities affect her utility with slope every bid 
is a threshold bid that is every bidder s payment willingness 
function wj is a step function 
proof the problem is in np because we can 
nondeterministically choose the payments to be made and received 
and check the validity and objective value of this outcome 
in the following we will represent bids as follows 
 ck ak s t indicates that uk 
j πck akπck this 
function is for ck not mentioned in the bid and wj uj t 
for uj ≥ s wj uj otherwise 
to show np-hardness we reduce an arbitrary max sat 
instance given by a set of clauses k k l 
k l 
k 
over a variable set v together with a target number of 
satisfied clauses t to the following donation-clearing 
instance let the set of charities be as follows for every 
literal l ∈ l there is a charity cl then let the set of 
bids be as follows for every variable v there is a bid bv 
 c v c−v − 
 v 
 for every literal l there is 
a bid bl cl for every clause k l 
k l 
k ∈ k 
there is a bid bk cl 
k 
 cl 
k 
 
 v k 
 finally 
there is a single bid that values all charities equally b 
 c c cm v t 
 v k 
 
 
 
 v k 
 we 
show the two instances are equivalent 
first suppose there exists a solution to the max sat 
instance if in this solution l is true then let πcl 
t 
 v k 
 otherwise πcl also the only bids that are 
not accepted meaning the threshold is not met are the bl 
where l is false and the bk such that both of l 
k l 
k are false 
first we show that no bidder whose bid is accepted pays 
more than she is willing to for each bv either c v or c−v 
receives at least so this bidder s threshold has been met 
 
for each bl either l is false and the bid is not accepted or l 
is true cl receives at least and the threshold has been met 
for each bk either both of l 
k l 
k are false and the bid is not 
accepted or at least one of them say li 
k is true that is k 
is satisfied and cli 
k 
receives at least and the threshold has 
been met finally because the total amount received by the 
charities is v t 
 v k 
 b s threshold has also been met 
the total amount that can be extracted from the accepted 
bids is at least v − 
 v 
 v t 
 v k 
 
 
 
 v k 
 
 v t 
 v k 
 
 v k 
 v t 
 v k 
 so there is positive 
surplus so there exists a solution with positive surplus to 
the donation-clearing instance 
now suppose there exists a nonzero outcome in the 
donation-clearing instance first we show that it 
is not possible for any v ∈ v that both b v and b−v are 
accepted for this would require that πc v πc−v ≥ 
the bids bv b v b−v cannot contribute more than so 
we need another at least it is easily seen that for any 
other v accepting any subset of bv b v b−v would 
require that at least as much is given to c v and c−v as 
can be extracted from these bids so this cannot help 
finally all the other bids combined can contribute at most 
 k 
 v k 
 
 
 
 v k 
 it follows that we can 
interpret the outcome in the donation-clearing instance 
as a partial assignment of truth values to variables v is set 
to true if b v is accepted and to false if b−v is accepted all 
that is left to show is that this partial assignment satisfies 
at least t clauses 
first we show that if a clause bid bk is accepted then 
either bl 
k 
or bl 
k 
is accepted and thus either l 
k or l 
k is set 
to true hence k is satisfied if bk is accepted at least one 
of cl 
k 
and cl 
k 
must be receiving at least without loss of 
generality say it is cl 
k 
 and say l 
k corresponds to variable 
v 
k that is it is v 
k or −v 
k if cl 
k 
does not receive at 
least bl 
k 
is not accepted and it is easy to check that 
the bids bv 
k 
 b v 
k 
 b−v 
k 
contribute at least less than is 
paid to c v 
k 
and c v 
k 
 but this is the same situation that 
we analyzed before and we know it is impossible all that 
remains to show is that at least t clause bids are accepted 
we now show that b is accepted suppose it is not then 
one of the bv must be accepted the solution is nonzero by 
assumption if only some bk are accepted the total payment 
from these bids is at most k 
 v k 
 which is not 
enough for any bid to be accepted and if one of the bl is 
accepted then the threshold for the corresponding bv is also 
reached for this v bv 
k 
 b v 
k 
 b−v 
k 
contribute at least 
 
 v 
less than the total payments to c v and c−v again 
the other bv and bl cannot by themselves help to close this 
gap and the bk can contribute at most k 
 v k 
 
 v 
 
it follows that b is accepted 
now in order for b to be accepted a total of v t 
 v k 
must be donated because is not possible for any v ∈ v 
that both b v and b−v are accepted it follows that the total 
payment by the bv and the bl can be at most v − 
 
 
adding b s payment of 
 
 
 v k 
to this we still need 
t − 
 
 v k 
from the bk but each one of them contributes at 
most 
 v k 
 so at least t of them must be accepted 
corollary unless p np there is no polynomial-time 
algorithm for approximating donation-clearing with 
either the surplus or the total amount donated as the 
objective within any ratio f n where f is a nonzero function of 
the size of the instance this holds even if the 
donationclearing structures satisfy all the properties given in 
theorem 
proof suppose we had such a polynomial time 
algorithm and applied it to the donation-clearing 
instances that were reduced from max sat instances in 
theorem it would return a nonzero solution when the 
max sat instance has a solution and a zero solution 
otherwise so we can decide whether arbitrary max sat 
instances are satisfiable this way and it would follow that 
p np 
 solving the problem to optimality is np-complete in many 
other noncomparable or even more restricted settings as 
well-we omit such results because of space constraint 
this should not be interpreted to mean that our approach is 
infeasible first as we will show there are very expressive 
families of bids for which the problem is solvable in 
polynomial time second np-completeness is often overcome in 
practice especially when the stakes are high for instance 
even though the problem of clearing combinatorial auctions 
is np-complete even to approximate they are 
typically solved to optimality in practice 
 mixed integer programming 
formulation 
in this section we give a mixed integer programming 
 mip formulation for the general problem we also discuss 
in which special cases this formulation reduces to a linear 
programming lp formulation in such cases the problem 
is solvable in polynomial time because linear programs can 
be solved in polynomial time 
the variables of the mip defining the final outcome are 
the payments made to the charities denoted by πci and 
the payments extracted from the bidders πbj in the case 
where we try to avoid direct payments and let the bidders 
pay the charities directly we add variables πci bj indicating 
how much bj pays to ci with the constraints that for each 
ci πci ≤ 
bj 
πci bj and for each bj πbj ≥ 
ci 
πci bj 
additionally there is a constraint πci bj whenever bidder bj 
is unwilling to pay charity ci the rest of the mip can be 
phrased in terms of the πci and πbj 
the objectives we have discussed earlier are both linear 
surplus is given by 
n 
j 
πbj − 
m 
i 
πci and total amount 
donated is given by 
m 
i 
πci coefficients can be added to 
represent different weights on the different charities in the 
objective 
the constraint that the outcome should be valid no deficit 
is given simply by 
n 
j 
πbj ≥ 
m 
i 
πci 
for every bidder for every charity we define an additional 
utility variable ui 
j indicating the utility that this bidder 
derives from the payment to this charity the bidder s total 
 
utility is given by another variable uj with the constraint 
that uj 
m 
i 
ui 
j 
each ui 
j is given as a function of πci by the piecewise 
linear function provided by the bidder in order to 
represent this function in the mip formulation we will merely 
place upper bounding constraints on ui 
j so that it cannot 
exceed the given functions the mip solver can then push 
the ui 
j variables all the way up to the constraint in order 
to extract as much payment from this bidder as possible 
in the case where the ui 
j are concave this is easy if sl tl 
and sl tl are endpoints of a finite linear segment in the 
function we add the constraint that ui 
j ≤ tl 
πci 
−sl 
sl −sl 
 tl − 
tl if the final infinite segment starts at sk tk and has 
slope d we add the constraint that ui 
j ≤ tk d πci − sk 
using the fact that the function is concave for each value of 
πci the tightest upper bound on ui 
j is the one corresponding 
to the segment above that value of πci and therefore these 
constraints are sufficient to force the correct value of ui 
j 
when the function is not concave we require for the first 
time some binary variables first we define another point 
on the function sk tk sk m tk dm where 
d is the slope of the infinite segment and m is any upper 
bound on the πcj this has the effect that we will never be 
on the infinite segment again now let xi j 
l be an indicator 
variable that should be if πci is below the lth segment of 
the function and otherwise to effect this first add a 
constraint 
k 
l 
xi j 
l now we aim to represent πci as a 
weighted average of its two neighboring si j 
l for ≤ l ≤ 
k let λi j 
l be the weight on si j 
l we add the constraint 
k 
l 
λi j 
l also for ≤ l ≤ k we add the constraint 
λi j 
l ≤ xl− xl where x− and xk are defined to be zero 
so that indeed only the two neighboring si j 
l have nonzero 
weight now we add the constraint πci 
k 
l 
si j 
l λi j 
l and 
now the λi j 
l must be set correctly then we can set ui 
j 
k 
l 
ti j 
l λi j 
l this is a standard mip technique 
finally each πbj is bounded by a function of uj by the 
 piecewise linear function provided by the bidder wj 
representing this function is entirely analogous to how we 
represented ui 
j as a function of πci again we will need binary 
variables only if the function is not concave 
because we only use binary variables when either a 
utility function ui 
j or a payment willingness function wj is not 
concave it follows that if all of these are concave our mip 
formulation is simply a linear program-which can be solved 
in polynomial time thus 
theorem if all functions ui 
j and wj are concave and 
piecewise linear the donation-clearing problem can 
be solved in polynomial time using linear programming 
even if some of these functions are not concave we can 
simply replace each such function by the smallest upper 
bounding concave function and use the linear programming 
formulation to obtain an upper bound on the 
objectivewhich may be useful in a search formulation of the general 
problem 
 why one cannot do much 
better than linear 
programming 
one may wonder if for the special cases of the 
donationclearing problem that can be solved in polynomial time 
with linear programming there exist special purpose 
algorithms that are much faster than linear programming 
algorithms in this section we show that this is not the case 
we give a reduction from the decision variant of the 
general linear programming problem to the decision variant 
of a special case of the donation-clearing problem 
 which can be solved in polynomial time using linear 
programming the decision variant of an optimization 
problem asks the binary question can the objective value 
exceed o thus any special-purpose algorithm for solving 
the decision variant of this special case of the 
donationclearing problem could be used to solve a decision 
question about an arbitrary linear program just as fast and 
thus if we are willing to call the algorithm a logarithmic 
number of times we can solve the optimization version of 
the linear program 
we first observe that for linear programming a decision 
question about the objective can simply be phrased as 
another constraint in the lp forcing the objective to exceed 
the given value then the original decision question 
coincides with asking whether the resulting linear program has 
a feasible solution 
theorem the question of whether an lp given by a 
set of linear constraints 
 has a feasible solution can be 
modeled as a donation-clearing instance with payment 
maximization as the objective with v charities and v c 
bids where v is the number of variables in the lp and c is 
the number of constraints in this model each bid bj has 
only linear ui 
j functions and is a partially acceptable 
threshold bid wj u tj for u ≥ sj otherwise wj u 
utj 
sj 
 the 
v bids corresponding to the variables mention only two 
charities each the c bids corresponding to the constraints mention 
only two times the number of variables in the corresponding 
constraint 
proof for every variable xi in the lp let there be two 
charities c xi and c−xi let h be some number such that 
if there is a feasible solution to the lp there is one in which 
every variable has absolute value at most h 
in the following we will represent bids as follows 
 ck ak s t indicates that uk 
j πck akπck this 
function is for ck not mentioned in the bid and wj uj t 
for uj ≥ s wj uj 
uj t 
s 
otherwise 
for every variable xi in the lp let there be a bid bxi 
 c xi c−xi h h − c 
v 
 for every constraint 
i 
rj 
i xi ≤ sj in the linear program let there be a bid bj 
 c−xi rj 
i i r 
j 
i 
∪ c xi −rj 
i i r 
j 
i 
 
i 
 rj 
i h − sj 
let the target total amount donated be vh 
suppose there is a feasible solution x 
 x 
 x 
v to the 
lp without loss of generality we can suppose that x 
i ≤ h 
for all i then in the donation-clearing instance 
 
these constraints must include bounds on the variables 
 including nonnegativity bounds if any 
 
for every i let πc xi 
 h x 
i and let πc−xi 
 h − x 
i 
 for a total payment of h to these two charities this 
allows us to extract the maximum payment from the bids 
bxi -a total payment of vh − c additionally the utility 
of bidder bj is now 
i r 
j 
i 
rj 
i h − x 
i 
i r 
j 
i 
−rj 
i h x 
i 
 
i 
 rj 
i h − 
i 
rj 
i x 
i ≥ 
i 
 rj 
i h − sj where the last 
inequality stems from the fact that constraint j must be 
satisfied in the lp solution so it follows we can extract the 
maximum payment from all the bidders bj for a total 
payment of c it follows that we can extract the required vh 
payment from the bidders and there exists a solution to 
the donation-clearing instance with a total amount 
donated of at least vh 
now suppose there is a solution to the 
donationclearing instance with a total amount donated of at 
least vh then the maximum payment must be extracted 
from each bidder from the fact that the maximum payment 
must be extracted from each bidder bxi it follows that for 
each i πc xi 
 πc−xi 
≥ h because the maximum 
extractable total payment is vh it follows that for each i 
πc xi 
 πc−xi 
 h let x 
i πc xi 
− h h − πc−xi 
 
then from the fact that the maximum payment must be 
extracted from each bidder bj it follows that 
i 
 rj 
i h − 
sj ≤ 
i r 
j 
i 
rj 
i πc−xi 
 
i r 
j 
i 
−rj 
i πc xi 
 
i r 
j 
i 
rj 
i h − x 
i 
i r 
j 
i 
−rj 
i h x 
i 
i 
 rj 
i h − 
i 
rj 
i x 
i equivalently 
i 
rj 
i x 
i ≤ sj it follows that the x 
i constitute a feasible 
solution to the lp 
 quasilinear bids 
another class of bids of interest is the class of quasilinear 
bids in a quasilinear bid the bidder s payment willingness 
function is linear in utility that is wj uj because the 
units of utility are arbitrary we may as well let them 
correspond exactly to units of money-so we do not need a 
constant multiplier in most cases quasilinearity is an 
unreasonable assumption for example usually bidders have a 
limited budget for donations so that the payment 
willingness will stop increasing in utility after some point or at 
least increase slower in the case of a softer budget 
constraint nevertheless quasilinearity may be a reasonable 
assumption in the case where the bidders are large 
organizations with large budgets and the charities are a few small 
projects requiring relatively little money in this setting 
once a certain small amount has been donated to a charity 
a bidder will derive no more utility from more money 
being donated from that charity thus the bidders will never 
reach a high enough utility for their budget constraint even 
when it is soft to take effect and thus a linear 
approximation of their payment willingness function is reasonable 
another reason for studying the quasilinear setting is that 
it is the easiest setting for mechanism design which we will 
discuss shortly in this section we will see that the clearing 
problem is much easier in the case of quasilinear bids 
first we address the case where we are trying to maximize 
surplus which is the most natural setting for mechanism 
design the key observation here is that when bids are 
quasilinear the clearing problem decomposes across charities 
lemma suppose all bids are quasilinear and surplus 
is the objective then we can clear the market optimally by 
clearing the market for each charity individually that is 
for each bidder bj let πbj 
ci 
πbi 
j 
 then for each charity 
ci maximize 
bj 
πbi 
j 
 − πci under the constraint that for 
every bidder bj πbi 
j 
≤ ui 
j πci 
proof the resulting solution is certainly valid first of 
all at least as much money is collected as is given away 
because 
bj 
πbj − 
ci 
πci 
bj ci 
πbi 
j 
− 
ci 
πci 
ci 
 
bj 
πbi 
j 
 − 
πci -and the terms of this summation are the objectives of 
the individual optimization problems each of which can be 
set at least to by setting all the variables are set to 
so it follows that the expression is nonnegative second no 
bidder bj pays more than she is willing to because uj −πbj 
ci 
ui 
j πci − 
ci 
πbi 
j 
 
ci 
 ui 
j πci −πbi 
j 
 -and the terms of this 
summation are nonnegative by the constraints we imposed 
on the individual optimization problems 
all that remains to show is that the solution is 
optimal because in an optimal solution we will extract as 
much payment from the bidders as possible given the πci 
all we need to show is that the πci are set optimally by 
this approach let π 
ci 
be the amount paid to charity πci 
in some optimal solution if we change this amount to πci 
and leave everything else unchanged this will only affect 
the payment that we can extract from the bidders because 
of this particular charity and the difference in surplus will 
be 
bj 
ui 
j πci 
 − ui 
j π 
ci 
 − πci 
 π 
ci 
 this expression is of 
course if πci 
 π 
ci 
 but now notice that this expression 
is maximized as a function of πci 
by the decomposed 
solution for this charity the terms without πci 
in them do not 
matter and of course in the decomposed solution we always 
set πbi 
j 
 ui 
j πci it follows that if we change πci to the 
decomposed solution the change in surplus will be at least 
 and the solution will still be valid thus we can change 
the πci one by one to the decomposed solution without ever 
losing any surplus 
theorem when all bids are quasilinear and surplus 
is the objective donation-clearing can be done in 
linear time 
proof by lemma we can solve the problem 
separately for each charity for charity ci this amounts to 
maximizing 
bj 
ui 
j πci − πci as a function of πci because all 
its terms are piecewise linear functions this whole function 
is piecewise linear and must be maximized at one of the 
points where it is nondifferentiable it follows that we need 
only check all the points at which one of the terms is 
nondifferentiable 
unfortunately the decomposing lemma does not hold for 
payment maximization 
proposition when the objective is payment 
maximization even when bids are quasilinear the solution obtained 
by decomposing the problem across charities is in general not 
optimal even with concave bids 
 
proof consider a single bidder b placing the following 
quasilinear bid over two charities c and c u 
 πc πci 
for ≤ πci ≤ u 
 πc 
πci 
− 
 
otherwise u 
 πc 
πci 
 
 the decomposed solution is πc 
 
 πc for a 
total donation of 
 
 but the solution πc πc is 
also valid for a total donation of 
 
 
in fact when payment maximization is the objective 
donation-clearing remains weakly np-complete in 
general in the remainder of the paper proofs are omitted 
because of space constraint 
theorem donation-clearing is weakly 
npcomplete when payment maximization is the objective even 
when every bid is concerns only one charity and has a 
stepfunction utility function for this charity and is quasilinear 
however when the bids are also concave a simple greedy 
clearing algorithm is optimal 
theorem given a donation-clearing instance 
with payment maximization as the objective where all bids 
are quasilinear and concave consider the following 
algorithm start with πci for all charities then letting 
γci 
d 
bj 
ui 
j πci 
 
dπci 
 at nondifferentiable points these 
derivatives should be taken from the right increase πc 
i 
 where 
c 
i ∈ arg maxci γci until either γc 
i 
is no longer the highest 
 in which case recompute c 
i and start increasing the 
corresponding payment or 
bj 
uj 
ci 
πci and γc 
i 
 finally 
let πbj uj 
 a similar greedy algorithm works when the objective is 
surplus and the bids are quasilinear and concave with as 
only difference that we stop increasing the payments as soon 
as γc 
i 
 
 incentive compatibility 
up to this point we have not discussed the bidders 
incentives for bidding any particular way specifically the bids 
may not truthfully reflect the bidders preferences over 
charities because a bidder may bid strategically misrepresenting 
her preferences in order to obtain a result that is better to 
herself this means the mechanism is not strategy-proof 
 we will show some concrete examples of this shortly this 
is not too surprising because the mechanism described so 
far is in a sense a first-price mechanism where the 
mechanism will extract as much payment from a bidder as her bid 
allows such mechanisms for example first-price auctions 
where winners pay the value of their bids are typically not 
strategy-proof if a bidder reports her true valuation for an 
outcome then if this outcome occurs the payment the 
bidder will have to make will offset her gains from the outcome 
completely of course we could try to change the rules of 
the game-which outcome payment vector to charities do 
we select for which bid vector and which bidder pays how 
much-in order to make bidding truthfully beneficial and 
to make the outcome better with regard to the bidders true 
preferences this is the field of mechanism design in this 
section we will briefly discuss the options that mechanism 
design provides for the expressive charity donation problem 
 strategic bids under the first-price 
mechanism 
we first point out some reasons for bidders to misreport 
their preferences under the first-price mechanism described 
in the paper up to this point first of all even when there is 
only one charity it may make sense to underbid one s true 
valuation for the charity for example suppose a bidder 
would like a charity to receive a certain amount x but does 
not care if the charity receives more than that additionally 
suppose that the other bids guarantee that the charity will 
receive at least x no matter what bid the bidder submits 
 and the bidder knows this then the bidder is best off not 
bidding at all or submitting a utility for the charity of 
to avoid having to make any payment this is known in 
economics as the free rider problem 
with multiple charities another kind of manipulation may 
occur where the bidder attempts to steer others payments 
towards her preferred charity suppose that there are two 
charities and three bidders the first bidder bids u 
 πc 
 if πc ≥ u 
 πc otherwise u 
 πc if πc ≥ 
u 
 πc otherwise and w u u if u ≤ w u 
 
 
 u − otherwise the second bidder bids u 
 πc 
 if πc ≥ u 
 πc otherwise u 
 πc always 
w u 
 
u if u ≤ w u 
 
 
 
 u − otherwise 
now the third bidder s true preferences are accurately 
represented 
by the bid u 
 πc if πc ≥ u 
 πc 
otherwise u 
 πc if πc ≥ u 
 πc otherwise 
and w u 
 
u if u ≤ w u 
 
 
 
 u − 
otherwise now it is straightforward to check that if the third 
bidder bids truthfully regardless of whether the objective is 
surplus maximization or total donated charity will receive 
at least and charity will receive less than the same is 
true if bidder does not place a bid at all as in the previous 
type of manipulation hence bidder s utility will be in 
this case but now if bidder reports u 
 πc 
everywhere u 
 πc if πc ≥ u 
 πc otherwise this 
part of the bid is truthful and w u 
 
u if u ≤ 
w u 
 
otherwise then charity will receive at least 
 and bidder will have to pay at most 
 
 because up to 
this amount of payment one unit of money corresponds to 
three units of utility to bidder it follows his utility is now 
at least − we observe that in this case the 
strategic bidder is not only affecting how much the bidders 
pay but also how much the charities receive 
 mechanism design in the quasilinear 
setting 
there are four reasons why the mechanism design 
approach is likely to be most successful in the setting of 
quasilinear preferences first historically mechanism design has 
been been most successful when the quasilinear assumption 
could be made second because of this success some very 
general mechanisms have been discovered for the 
quasilinear setting for instance the vcg mechanisms 
or the dagva mechanism which we could apply 
directly to the expressive charity donation problem third as 
we saw in section the clearing problem is much easier in 
 
formally this means that if the bidder is forced to pay 
the full amount that his bid allows for a particular vector of 
payments to charities the bidder is indifferent between this 
and not participating in the mechanism at all compare 
this to bidding truthfully in a first-price auction 
 
this setting and thus we are less likely to run into 
computational trouble for the mechanism design problem fourth as 
we will show shortly the quasilinearity assumption in some 
cases allows for decomposing the mechanism design problem 
over the charities as it did for the simple clearing problem 
moreover in the quasilinear setting unlike in the general 
setting it makes sense to pursue social welfare the sum 
of the utilities as the objective because now units of 
utility correspond directly to units of money so that we do 
not have the problem of the bidders arbitrarily scaling their 
utilities and it is no longer possible to give a payment 
willingness function of while still affecting the donations 
through a utility function 
before presenting the decomposition result we introduce 
some terms from game theory a type is a preference profile 
that a bidder can have and can report thus a type report 
is a bid incentive compatibility ic means that bidders 
are best off reporting their preferences truthfully either 
regardless of the others types in dominant strategies or in 
expectation over them in bayes-nash equilibrium 
individual rationality ir means agents are at least as well off 
participating in the mechanism as not participating either 
regardless of the others types ex-post or in expectation 
over them ex-interim a mechanism is budget balanced 
if there is no flow of money into or out of the system-in 
general ex-post or in expectation over the type reports 
 ex-ante a mechanism is efficient if it always produces 
the efficient allocation of wealth to charities 
theorem suppose all agents preferences are 
quasilinear furthermore suppose that there exists a single-charity 
mechanism m that for a certain subclass p of quasilinear 
preferences under a given solution concept s 
 implementation in dominant strategies or bayes-nash equilibrium and 
a given notion of individual rationality r ex post ex 
interim or none satisfies a certain notion of budget balance 
 ex post ex ante or none and is ex-post efficient then 
there exists such a mechanism for any number of charities 
two mechanisms that satisfy efficiency and can in fact be 
applied directly to the multiple-charity problem without use 
of the previous theorem are the vcg which is incentive 
compatible in dominant strategies and dagva which is 
incentive compatible only in bayes-nash equilibrium 
mechanisms each of them however has a drawback that would 
probably make it impractical in the setting of donations to 
charities the vcg mechanism is not budget balanced the 
dagva mechanism does not satisfy ex-post individual 
rationality in the next subsection we will investigate if we 
can do better in the setting of donations to charities 
 impossibility of efficiency 
in this subsection we show that even in a very restricted 
setting and with minimal requirements on ic and ir 
constraints it is impossible to create a mechanism that is 
efficient 
theorem there is no mechanism which is ex-post 
budget balanced ex-post efficient and ex-interim individually 
rational with bayes-nash equilibrium as the solution concept 
 even with only one charity only two quasilinear bidders 
with identical type distributions uniform over two types 
with either both utility functions being step functions or both 
utility functions being concave piecewise linear functions 
the case of step-functions in this theorem corresponds 
exactly to the case of a single fixed-size nonexcludable public 
good the public good being that the charity receives the 
desired amount -for which such an impossibility result is 
already known many similar results are known 
probably the most famous of which is the myerson-satterthwaite 
impossibility result which proves the impossibility of 
efficient bilateral trade under the same requirements 
theorem indicates that there is no reason to decide on 
donations to multiple charities under a single mechanism 
 rather than a separate one for each charity when an 
efficient mechanism with the desired properties exists for the 
single-charity case however because under the 
requirements of theorem no such mechanism exists there may 
be a benefit to bringing the charities under the same 
umbrella the next proposition shows that this is indeed the 
case 
proposition there exist settings with two charities 
where there exists no ex-post budget balanced ex-post 
efficient and ex-interim individually rational mechanism with 
bayes-nash equilibrium as the solution concept for either 
charity alone but there exists an ex-post budget balanced 
ex-post efficient and ex-post individually rational 
mechanism with dominant strategies as the solution concept for 
both charities together even when the conditions are the 
same as in theorem apart from the fact that there are 
now two charities 
 conclusion 
we introduced a bidding language for expressing very 
general types of matching offers over multiple charities we 
formulated the corresponding clearing problem deciding how 
much each bidder pays and how much each charity receives 
and showed that it is np-complete to approximate to any 
ratio even in very restricted settings we gave a mixed-integer 
program formulation of the clearing problem and showed 
that for concave bids where utility functions and payment 
willingness function are concave the program reduces to a 
linear program and can hence be solved in polynomial time 
we then showed that the clearing problem for a subclass of 
concave bids is at least as hard as the decision variant of 
linear programming suggesting that we cannot do much better 
than a linear programming implementation for such bids 
subsequently we showed that the clearing problem is much 
easier when bids are quasilinear where payment willingness 
functions are linear -for surplus the problem decomposes 
across charities and for payment maximization a greedy 
approach is optimal if the bids are concave although this 
latter problem is weakly np-complete when the bids are not 
concave for the quasilinear setting we studied the 
mechanism design question of making the bidders report their 
preferences truthfully rather than strategically we showed 
that an ex-post efficient mechanism is impossible even with 
only one charity and a very restricted class of bids we 
also showed that even though the clearing problem 
decomposes over charities in the quasilinear setting there may be 
benefits to linking the charities from a mechanism design 
standpoint 
there are many directions for future research one is to 
build a web-based implementation of the first-price 
mechanism proposed in this paper another is to study the 
computational scalability of our mip lp approach it is also 
 
important to identify other classes of bids besides concave 
ones for which the clearing problem is tractable much 
crucial work remains to be done on the mechanism design 
problem finally are there good iterative mechanisms for 
charity donation 
 references 
 k arrow the property rights doctrine and demand 
revelation under incomplete information in 
m boskin editor economics and human welfare 
new york academic press 
 l m ausubel and p milgrom ascending auctions 
with package bidding frontiers of theoretical 
economics no article 
 y bartal r gonen and n nisan incentive 
compatible multi-unit combinatorial auctions in 
theoretical aspects of rationality and knowledge 
 tark ix bloomington indiana usa 
 e h clarke multipart pricing of public goods public 
choice - 
 v conitzer and t sandholm complexity of 
mechanism design in proceedings of the th annual 
conference on uncertainty in artificial intelligence 
 uai- pages - edmonton canada 
 c d aspremont and l a g´erard-varet incentives 
and incomplete information journal of public 
economics - 
 m r garey d s johnson and l stockmeyer some 
simplified np-complete graph problems theoretical 
computer science - 
 d goldburg and s mcelligott red cross statement 
on official donation locations press release 
http www redcross org press disaster ds pr 
 legitdonors html 
 r gonen and d lehmann optimal solutions for 
multi-unit combinatorial auctions branch and bound 
heuristics in proceedings of the acm conference on 
electronic commerce acm-ec pages - 
minneapolis mn oct 
 t groves incentives in teams econometrica 
 - 
 l khachiyan a polynomial algorithm in linear 
programming soviet math doklady - 
 
 r lavi a mu alem and n nisan towards a 
characterization of truthful combinatorial auctions in 
proceedings of the annual symposium on foundations 
of computer science focs 
 d lehmann l i o callaghan and y shoham 
truth revelation in rapid approximately efficient 
combinatorial auctions journal of the acm 
 - early version appeared in 
acmec- 
 
compare for example iterative mechanisms in the 
combinatorial auction setting 
 a mas-colell m whinston and j r green 
microeconomic theory oxford university press 
 r myerson and m satterthwaite efficient 
mechanisms for bilateral trading journal of economic 
theory - 
 g l nemhauser and l a wolsey integer and 
combinatorial optimization john wiley sons 
 section page 
 n nisan bidding and allocation in combinatorial 
auctions in proceedings of the acm conference on 
electronic commerce acm-ec pages - 
minneapolis mn 
 n nisan and a ronen computationally feasible 
vcg mechanisms in proceedings of the acm 
conference on electronic commerce acm-ec 
pages - minneapolis mn 
 d c parkes ibundle an efficient ascending price 
bundle auction in proceedings of the acm conference 
on electronic commerce acm-ec pages - 
denver co nov 
 m h rothkopf a pekeˇc and r m harstad 
computationally manageable combinatorial auctions 
management science - 
 t sandholm algorithm for optimal winner 
determination in combinatorial auctions artificial 
intelligence - jan conference version 
appeared at the international joint conference on 
artificial intelligence ijcai pp - 
stockholm sweden 
 t sandholm s suri a gilpin and d levine 
cabob a fast optimal algorithm for combinatorial 
auctions in proceedings of the seventeenth 
international joint conference on artificial 
intelligence ijcai pages - seattle wa 
 
 j tagliabue global aids funds is given attention 
but not money the new york times june 
reprinted on 
http www healthgap org press releases a 
 nyt hgap g fund html 
 w vickrey counterspeculation auctions and 
competitive sealed tenders journal of finance 
 - 
 p r wurman and m p wellman akba a 
progressive anonymous-price combinatorial auction 
in proceedings of the acm conference on electronic 
commerce acm-ec pages - minneapolis 
mn oct 
 m yokoo the characterization of strategy false-name 
proof combinatorial auction protocols price-oriented 
rationing-free protocol in proceedings of the 
eighteenth international joint conference on artificial 
intelligence ijcai acapulco mexico aug 
 
