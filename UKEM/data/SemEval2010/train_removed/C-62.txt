network monitors and contracting systems 
competition and innovation 
paul laskowski john chuang 
uc berkeley 
 paul chuang  sims berkeley edu 
abstract 
today s internet industry suffers from several well-known 
pathologies but none is as destructive in the long term as its 
resistance to evolution rather than introducing new services isps 
are presently moving towards greater commoditization it is 
apparent that the network s primitive system of contracts does not 
align incentives properly in this study we identify the network s 
lack of accountability as a fundamental obstacle to correcting this 
problem employing an economic model we argue that optimal 
routes and innovation are impossible unless new monitoring 
capability is introduced and incorporated with the contracting 
system furthermore we derive the minimum requirements a 
monitoring system must meet to support first-best routing and 
innovation characteristics our work does not constitute a new 
protocol rather we provide practical and specific guidance for the 
design of monitoring systems as well as a theoretical framework to 
explore the factors that influence innovation 
categories and subject descriptors 
c computer-communication networks distributed 
systems j social and behavioral sciences economics 
general terms 
economics theory measurement design legal aspects 
 introduction 
many studies before us have noted the internet s resistance to new 
services and evolution in recent decades numerous ideas have 
been developed in universities implemented in code and even 
written into the routers and end systems of the network only to 
languish as network operators fail to turn them on on a large scale 
the list includes multicast ipv intserv and diffserv lacking 
the incentives just to activate services there seems to be little hope 
of isps devoting adequate resources to developing new ideas in the 
long term this pathology stands out as a critical obstacle to the 
network s continued success ratnasamy shenker and mccanne 
provide extensive discussion in 
on a smaller time scale isps shun new services in favor of cost 
cutting measures thus the network has characteristics of a 
commodity market although in theory isps have a plethora of 
routing policies at their disposal the prevailing strategy is to route in 
the cheapest way possible on one hand this leads directly to 
suboptimal routing more importantly commoditization in the short 
term is surely related to the lack of innovation in the long term 
when the routing decisions of others ignore quality characteristics 
isps are motivated only to lower costs there is simply no reward 
for introducing new services or investing in quality improvements 
in response to these pathologies and others researchers have put 
forth various proposals for improving the situation these can be 
divided according to three high-level strategies the first attempts 
to improve the status quo by empowering end-users clark et al 
suggest that giving end-users control over routing would lead to 
greater service diversity recognizing that some payment mechanism 
must also be provided ratnasamy shenker and mccanne 
postulate a link between network evolution and user-directed 
routing they propose a system of anycast to give end-users 
the ability to tunnel their packets to an isp that introduces a 
desirable protocol the extra traffic to the isp the authors suggest 
will motivate the initial investment 
the second strategy suggests a revision of the contracting system 
this is exemplified by mackie-mason and varian who propose a 
smart market to control access to network resources prices 
are set to the market-clearing level based on bids that users associate 
to their traffic in another direction afergan and wroclawski 
suggest that prices should be explicitly encoded in the routing 
protocols they argue that such a move would improve stability 
and align incentives 
the third high-level strategy calls for greater network 
accountability in this vein argyraki et al propose a system of 
packet obituaries to provide feedback as to which isps drop packets 
 they argue that such feedback would help reveal which isps 
were adequately meeting their contractual obligations unlike the 
first two strategies we are not aware of any previous studies that 
have connected accountability with the pathologies of 
commoditization or lack of innovation 
it is clear that these three strategies are closely linked to each other 
 for example and each argue that giving end-users 
routing control within the current contracting system is 
problematic until today however the relationship between them 
has been poorly understood there is currently little theoretical 
foundation to compare the relative merits of each proposal and a 
particular lack of evidence linking accountability with innovation 
and service differentiation this paper will address both issues 
we will begin by introducing an economic network model that 
relates accountability contracts competition and innovation our 
model is highly stylized and may be considered preliminary it is 
based on a single source sending data to a single destination 
nevertheless the structure is rich enough to expose previously 
unseen features of network behavior we will use our model for 
two main purposes 
first we will use our model to argue that the lack of accountability 
in today s network is a fundamental obstacle to overcoming the 
pathologies of commoditization and lack of innovation in other 
words unless new monitoring capabilities are introduced and 
integrated with the system of contracts the network cannot achieve 
optimal routing and innovation characteristics this result provides 
motivation for the remainder of the paper in which we explore how 
accountability can be leveraged to overcome these pathologies and 
create a sustainable industry we will approach this problem from a 
clean-slate perspective deriving the level of accountability needed 
to sustain an ideal competitive structure 
when we say that today s internet has poor accountability we mean 
that it reveals little information about the behavior - or misbehavior 
- of isps this well-known trait is largely rooted in the network s 
history in describing the design philosophy behind the internet 
protocols clark lists accountability as the least important among 
seven second level goals accordingly accountability 
received little attention during the network s formative years clark 
relates this to the network s military context and finds that had the 
network been designed for commercial development accountability 
would have been a top priority 
argyraki et al conjecture that applying the principles of layering 
and transparency may have led to the network s lack of 
accountability according to these principles end hosts should 
be informed of network problems only to the extent that they are 
required to adapt they notice when packet drops occur so that they 
can perform congestion control and retransmit packets details of 
where and why drops occur are deliberately concealed 
the network s lack of accountability is highly relevant to a 
discussion of innovation because it constrains the system of 
contracts this is because contracts depend upon external 
institutions to function - the judge in the language of incomplete 
contract theory or simply the legal system ultimately if a judge 
cannot verify that some condition holds she cannot enforce a 
contract based on that condition of course the vast majority of 
contracts never end up in court especially when a judge s ruling is 
easily predicted the parties will typically comply with the contract 
terms on their own volition this would not be possible however 
without the judge acting as a last resort 
an institution to support contracts is typically complex but we 
abstract it as follows we imagine that a contract is an algorithm 
that outputs a payment transfer among a set of isps the parties at 
every time this payment is a function of the past and present 
behaviors of the participants but only those that are verifiable 
hence we imagine that a contract only accepts proofs as inputs 
we will call any process that generates these proofs a contractible 
monitor such a monitor includes metering or sensing devices on 
the physical network but it is a more general concept constructing 
a proof of a particular behavior may require readings from various 
devices distributed among many isps the contractible monitor 
includes whatever distributed algorithmic mechanism is used to 
motivate isps to share this private information 
figure demonstrates how our model of contracts fits together we 
make the assumption that all payments are mediated by contracts 
this means that without contractible monitors that attest to say 
latency payments cannot be conditioned on latency 
figure relationship between monitors and contracts 
with this model we may conclude that the level of accountability in 
today s internet only permits best effort contracts nodes cannot 
condition payments on either quality or path characteristics 
is there anything wrong with best-effort contracts the reader 
might wonder why the internet needs contracts at all after all in 
non-network industries traditional firms invest in research and 
differentiate their products all in the hopes of keeping their 
customers and securing new ones one might believe that such 
market forces apply to isps as well we may adopt this as our null 
hypothesis 
null hypothesis market forces are sufficient to maintain service 
diversity and innovation on a network at least to the same extent 
as they do in traditional markets 
there is a popular intuitive argument that supports this hypothesis 
and it may be summarized as follows 
intuitive argument supporting null hypothesis 
 access providers try to increase their quality to get more 
consumers 
 access providers are themselves customers for second hop 
isps and the second hops will therefore try to provide 
highquality service in order to secure traffic from access 
providers access providers try to select high quality transit 
because that increases their quality 
 the process continues through the network giving every 
isp a competitive reason to increase quality 
we are careful to model our network in continuous time in order to 
capture the essence of this argument we can for example specify 
equilibria in which nodes switch to a new next hop in the event of a 
quality drop 
moreover our model allows us to explore any theoretically possible 
punishments against cheaters including those that are costly for 
end-users to administer by contrast customers in the real world 
rarely respond collectively and often simply seek the best deal 
currently offered these constraints limit their ability to punish 
cheaters 
even with these liberal assumptions however we find that we must 
reject our null hypothesis our model will demonstrate that 
identifying a cheating isp is difficult under low accountability 
limiting the threat of market driven punishment we will define an 
index of commoditization and show that it increases without bound 
as data paths grow long furthermore we will demonstrate a 
framework in which an isp s maximum research investment 
decreases hyperbolically with its distance from the end-user 
network 
behavior 
monitor contract 
proof 
payments 
 
to summarize we argue that the internet s lack of accountability 
must be addressed before the pathologies of commoditization and 
lack of innovation can be resolved this leads us to our next topic 
how can we leverage accountability to overcome these pathologies 
we approach this question from a clean-slate perspective instead 
of focusing on incremental improvements we try to imagine how an 
ideal industry would behave then derive the level of accountability 
needed to meet that objective according to this approach we first 
craft a new equilibrium concept appropriate for network 
competition our concept includes the following requirements 
first we require that punishing isps that cheat is done without 
rerouting the path rerouting is likely to prompt end-users to switch 
providers punishing access providers who administer punishments 
correctly next we require that the equilibrium cannot be 
threatened by a coalition of isps that exchanges illicit side 
payments finally we require that the punishment mechanism that 
enforces contracts does not punish innocent nodes that are not in the 
coalition 
the last requirement is somewhat unconventional from an economic 
perspective but we maintain that it is crucial for any reasonable 
solution although isps provide complementary services when they 
form a data path together they are likely to be horizontal 
competitors as well if innocent nodes may be punished an isp 
may decide to deliberately cheat and draw punishment onto itself 
and its neighbors by cheating the isp may save resources thereby 
ensuring that the punishment is more damaging to the other isps 
which probably compete with the cheater directly for some 
customers in the extreme case the cheater may force the other 
isps out of business thereby gaining a monopoly on some routes 
applying this equilibrium concept we derive the monitors needed 
to maintain innovation and optimize routes the solution is 
surprisingly simple contractible monitors must report the quality of 
the rest of the path from each isp to the destination it turns out 
that this is the correct minimum accountability requirement as 
opposed to either end-to-end monitors or hop-by-hop monitors as 
one might initially suspect 
rest of path monitors can be implemented in various ways they 
may be purely local algorithms that listen for packet echoes 
alternately they can be distributed in nature we describe a way to 
construct a rest of path monitor out of monitors for individual isp 
quality and for the data path this requires a mechanism to 
motivate isps to share their monitor outputs with each other the 
rest of path monitor then includes the component monitors and the 
distributed algorithmic mechanism that ensures that information is 
shared as required this example shows that other types of monitors 
may be useful as building blocks but must be combined to form rest 
of path monitors in order to achieve ideal innovation characteristics 
our study has several practical implications for future protocol 
design we show that new monitors must be implemented and 
integrated with the contracting system before the pathologies of 
commoditization and lack of innovation can be overcome 
moreover we derive exactly what monitors are needed to optimize 
routes and support innovation in addition our results provide 
useful input for clean-slate architectural design and we use several 
novel techniques that we expect will be applicable to a variety of 
future research 
the rest of this paper is organized as follows in section we lay 
out our basic network model in section we present a 
lowaccountability network modeled after today s internet we 
demonstrate how poor monitoring causes commoditization and a 
lack of innovation in section we present verifiable monitors and 
show that proofs even without contracts can improve the status 
quo in section we turn our attention to contractible monitors 
we show that rest of path monitors can support competition games 
with optimal routing and innovation we further show that rest of 
path monitors are required to support such competition games we 
continue by discussing how such monitors may be constructed using 
other monitors as building blocks in section we conclude and 
present several directions for future research 
 basic network model 
a source s wants to send data to destination d s and d are nodes 
on a directed acyclic graph with a finite set of intermediate nodes 
 nv representing isps all paths lead to d and every 
node not connected to d has at least two choices for next hop 
we will represent quality by a finite dimensional vector space q 
called the quality space each dimension represents a distinct 
network characteristic that end-users care about for example 
latency loss probability jitter and ip version can each be assigned 
to a dimension 
to each node i we associate a vector in the quality space qqi ∈ 
this corresponds to the quality a user would experience if i were the 
only isp on the data path let n 
q∈q be the vector of all node 
qualities 
of course when data passes through multiple nodes their qualities 
combine in some way to yield a path quality we represent this by 
an associative binary operation qqq →× for path 
 nvvv the quality is given by nvvv qqq 
 the 
operation reflects the characteristics of each dimension of quality 
for example can act as an addition in the case of latency 
multiplication in the case of loss probability or a 
minimumargument function in the case of security 
when data flows along a complete path from s to d the source and 
destination generally regarded as a single player enjoy utility given 
by a function of the path quality →qu each node along the 
path i experiences some cost of transmission ci 
 game dynamics 
ultimately we are most interested in policies that promote 
innovation on the network in this study we will use innovation in 
a fairly general sense innovation describes any investment by an 
isp that alters its quality vector so that at least one potential data 
path offers higher utility this includes researching a new routing 
algorithm that decreases the amount of jitter users experience it 
also includes deploying a new protocol that supports quality of 
service even more broadly buying new equipment to decrease 
s d 
 
latency may also be regarded as innovation innovation 
may be thought of as the micro-level process by which 
the network evolves 
our analysis is limited in one crucial respect we focus 
on inventions that a single isp can implement to improve 
the end-user experience this excludes technologies that 
require adoption by all isps on the network to function 
because such technologies do not create a competitive 
advantage rewarding them is difficult and may require 
intellectual property or some other market distortion we 
defer this interesting topic to future work 
at first it may seem unclear how a large-scale distributed process 
such as innovation can be influenced by mechanical details like 
networks monitors our model must draw this connection in a 
realistic fashion 
the rate of innovation depends on the profits that potential 
innovators expect in the future the reward generated by an 
invention must exceed the total cost to develop it or the inventor 
will not rationally invest this reward in turn is governed by the 
competitive environment in which the firm operates including the 
process by which firms select prices and agree upon contracts with 
each other of course these decisions depend on how routes are 
established and how contracts determine actual monetary 
exchanges 
any model of network innovation must therefore relate at least three 
distinct processes innovation competition and routing we select 
a game dynamics that makes the relation between these processes as 
explicit as possible this is represented schematically in figure 
the innovation stage occurs first at time − t in this stage each 
agent decides whether or not to make research investments if she 
chooses not to her quality remains fixed if she makes an 
investment her quality may change in some way it is not 
necessary for us to specify how such changes take place the 
agents choices in this stage determine the vector of qualities q 
common knowledge for the rest of the game 
next at time − t agents participate in the competition stage in 
which contracts are agreed upon in today s industry these 
contracts include prices for transit access and peering agreements 
since access is provided on a best-effort basis a transit agreement 
can simply be represented by its price other contracting systems 
we will explore will require more detail 
finally beginning at t firms participate in the routing stage 
other research has already employed repeated games to study 
routing for example repetition reveals interesting effects 
not visible in a single stage game such as informal collusion to 
elevate prices in we use a game in continuous time in order to 
study such properties for example we will later ask whether a 
player will maintain higher quality than her contracts require in the 
hope of keeping her customer base or attracting future customers 
our dynamics reflect the fact that isps make innovation decisions 
infrequently although real firms have multiple opportunities to 
innovate each opportunity is followed by a substantial length of 
time in which qualities are fixed the decision to invest focuses on 
how the firm s new quality will improve the contracts it can enter 
into hence our model places innovation at the earliest stage 
attempting to capture a single investment decision contracting 
decisions are made on an intermediate time scale thus appearing 
next in the dynamics routing decisions are made very frequently 
mainly to maximize immediate profit flows so they appear in the 
last stage 
because of this ordering our model does not allow firms to route 
strategically to affect future innovation or contracting decisions in 
opposition afergan and wroclawski argue that contracts are formed 
in response to current traffic patterns in a feedback loop 
although we are sympathetic to their observation such an addition 
would make our analysis intractable our model is most realistic 
when contracting decisions are infrequent 
throughout this paper our solution concept will be a subgame 
perfect equilibrium spe an spe is a strategy point that is a nash 
equilibrium when restricted to each subgame three important 
subgames have been labeled in figure the innovation game 
includes all three stages the competition game includes only the 
competition stage and the routing stage the routing game includes 
only the routing stage 
an spe guarantees that players are forward-looking this means 
for example that in the competition stage firms must act rationally 
maximizing their expected profits in the routing stage they cannot 
carry out threats they made in the innovation stage if it lowers their 
expected payoff 
our schematic already suggests that the routing game is crucial for 
promoting innovation to support innovation the competition 
game must somehow reward isps with high quality but that 
means that the routing game must tend to route to nodes with high 
quality if the routing game always selects the lowest-cost routes 
for example innovation will not be supported we will support this 
observation with analysis later 
 the routing game 
the routing game proceeds in continuous time with all players 
discounting by a common factor r the outputs from previous 
stages q and the set of contracts are treated as exogenous 
parameters for this game for each time ≥t each node must 
select a next hop to route data to data flows across the resultant 
path causing utility flow to s and d and a flow cost to the nodes on 
the path as described above payment flows are also created based 
on the contracts in place 
relating our game to the familiar repeated prisoners dilemma 
imagine that we are trying to impose a high quality but costly path 
as we argued loosely above such paths must be sustainable in order 
to support innovation each isp on the path tries to maximize her 
own payment net of costs so she may not want to cooperate with 
our plan rather if she can find a way to save on costs at the 
expense of the high quality we desire she will be tempted to do so 
innovation game competition game routing game 
innovation 
stage 
competition 
stage 
routing 
stagequalities 
 q 
contracts 
 prices 
profits 
t - t - t ∈ 
figure game dynamics 
 
analogously to the prisoners dilemma we will call such a decision 
cheating a little more formally 
cheating refers to any action that an isp can take contrary to 
some target strategy point that we are trying to impose that 
enhances her immediate payoff but compromises the quality of 
the data path 
one type of cheating relates to the data path each node on the path 
has to pay the next node to deliver its traffic if the next node offers 
high quality transit we may expect that a lower quality node will 
offer a lower price each node on the path will be tempted to route 
to a cheaper next hop increasing her immediate profits but 
lowering the path quality we will call this type of action cheating 
in route 
another possibility we can model is that a node finds a way to save 
on its internal forwarding costs at the expense of its own quality 
we will call this cheating internally to distinguish it from cheating 
in route for example a node might drop packets beyond the rate 
required for congestion control in order to throttle back tcp flows 
and thus save on forwarding costs alternately a node 
employing quality of service could give high priority packets a 
lower class of service thus saving on resources and perhaps 
allowing itself to sell more high priority service 
if either cheating in route or cheating internally is profitable the 
specified path will not be an equilibrium we assume that cheating 
can never be caught instantaneously rather a cheater can always 
enjoy the payoff from cheating for some positive time which we 
label t this includes the time for other players to detect and react 
to the cheating if the cheater has a contract which includes a 
customer lock-in period t also includes the time until customers 
are allowed to switch to a new isp as we will see later it is 
socially beneficial to decrease t so such lock-in is detrimental to 
welfare 
 pathologies of a 
lowaccountability network 
in order to motivate an exploration of monitoring systems we begin 
in this section by considering a network with a poor degree of 
accountability modeled after today s internet we will show how 
the lack of monitoring necessarily leads to poor routing and 
diminishes the rate of innovation thus the network s lack of 
accountability is a fundamental obstacle to resolving these 
pathologies 
 accountability in the current internet 
first we reflect on what accountability characteristics the present 
internet has argyraki et al point out that end hosts are given 
minimal information about packet drops users know when 
drops occur but not where they occur nor why dropped packets 
may represent the innocent signaling of congestion or as we 
mentioned above they may be a form of cheating internally the 
problem is similar for other dimensions of quality or in fact more 
acute finding an isp that gives high priority packets a lower class 
of service for example is further complicated by the lack of even 
basic diagnostic tools 
in fact it is similarly difficult to identify an isp that cheats in route 
huston notes that internet traffic flows do not always correspond to 
routing information an isp may hand a packet off to a 
neighbor regardless of what routes that neighbor has advertised 
furthermore blocks of addresses are summarized together for 
distant hosts so a destination may not even be resolvable until 
packets are forwarded closer 
one might argue that diagnostic tools like ping and traceroute can 
identify cheaters unfortunately argyraki et al explain that these 
tools only reveal whether probe packets are echoed not the fate of 
past packets thus for example they are ineffective in detecting 
low-frequency packet drops even more fundamentally a 
sophisticated cheater can always spot diagnostic packets and give 
them special treatment 
as a further complication a cheater may assume different aliases 
for diagnostic packets arriving over different routes as we will see 
below this gives the cheater a significant advantage in escaping 
punishment for bad behavior even if the data path is otherwise 
observable 
 modeling low-accountability 
as the above evidence suggests the current industry allows for very 
little insight into the behavior of the network in this section we 
attempt to capture this lack of accountability in our model we 
begin by defining a monitor our model of the way that players 
receive external information about network behavior 
a monitor is any distributed algorithmic mechanism that runs on 
the network graph and outputs to specific nodes informational 
statements about current or past network behavior 
we assume that all external information about network behavior is 
mediated in this way the accountability properties of the internet 
can be represented by the following monitors 
e e end to end a monitor that informs s d about what the 
total path quality is at any time this is the quality they 
experience 
rop rest of path a monitor that informs each node along the 
data path what the quality is for the rest of the path to the 
destination 
prc packets received a monitor that tells nodes how much 
data they accept from each other so that they can charge by 
volume it is important to note however that this information is 
aggregated over many source-destination pairs hence for the 
sake of realism it cannot be used to monitor what the data path is 
players cannot measure the qualities of other single nodes just the 
rest of the path nodes cannot see the path past the next hop this 
last assumption is stricter than needed for our results the critical 
ingredient is that nodes cannot verify that the path avoids a specific 
hop this holds for example if the path is generally visible except 
nodes can use different aliases for different parents similar results 
also hold if alternate paths always converge after some integer 
number m of hops 
it is important to stress that e e and rop are not the contractible 
monitors we described in the introduction - they do not generate 
proofs thus even though a player observes certain information 
she generally cannot credibly share it with another player for 
example if a node after the first hop starts cheating the first hop 
will detect the sudden drop in quality for the rest of the path but the 
first hop cannot make the source believe this observation - the 
 
source will suspect that the first hop was the cheater and fabricated 
the claim against the rest of the path 
typically e e and rop are envisioned as algorithms that run on a 
single node and listen for packet echoes this is not the only way 
that they could be implemented however an alternate strategy is to 
aggregate quality measurements from multiple points in the 
network these measurements can originate in other monitors 
located at various isps the monitor then includes the component 
monitors as well as whatever mechanisms are in place to motivate 
nodes to share information honestly as needed for example if the 
source has monitors that reveal the qualities of individual nodes 
they could be combined with path information to create an rop 
monitor 
since we know that contracts only accept proofs as input we can 
infer that payments in this environment can only depend on the 
number of packets exchanged between players in other words 
contracts are best-effort for the remainder of this section we will 
assume that contracts are also linear - there is a constant payment 
flow so long as a node accepts data and all conditions of the 
contract are met other more complicated tariffs are also possible 
and are typically used to generate lock-in we believe that our 
parameter t is sufficient to describe lock-in effects and we believe 
that the insights in this section apply equally to any tariffs that are 
bounded so that the routing game remains continuous at infinity 
restricting attention to linear contracts allows us to represent some 
node i s contract by its price pi 
because we further know that nodes cannot observe the path after 
the next hop we can infer that contracts exist only between 
neighboring nodes on the graph we will call this arrangement of 
contracts bilateral when a competition game exclusively uses 
bilateral contracts we will call it a bilateral contract competition 
game 
we first focus on the routing game and ask whether a high quality 
route can be maintained even when a low quality route is cheaper 
recall that this is a requirement in order for nodes to have any 
incentive to innovate if nodes tend to route to low price next hops 
regardless of quality we say that the network is commoditized to 
measure this tendency we define an index of commoditization as 
follows 
for a node on the data path i define its quality premium 
minppd ji − where pj is the flow payment to the next hop in 
equilibrium and pmin is the price of the lowest cost next hop 
definition the index of commoditization ci is the average 
over each node on the data path i of i s flow profit as a fraction 
of i s quality premium ijii dpcp −− 
ci ranges from when each node spends all of its potential profit 
on its quality premium to infinite when a node absorbs positive 
profit but uses the lowest price next hop a high value for ci 
implies that nodes are spending little of their money inflow on 
purchasing high quality for the rest of the path as the next claim 
shows this is exactly what happens as the path grows long 
claim if the only monitors are e e rop and prc ∞→ci 
as ∞→n where n is the number of nodes on the data path 
to show that this is true we first need the following lemma which 
will establish the difficulty of punishing nodes in the network 
first a bit of notation recall that a cheater can benefit from its 
actions for t before other players can react when a node 
cheats it can expect a higher profit flow at least until it is caught 
and other players react perhaps by diverting traffic let node i s 
normal profit flow be iπ and her profit flow during cheating be 
some greater value yi we will call the ratio iiy π the 
temptation to cheat 
lemma if the only monitors are e e rop and prc the 
discounted time −nt 
rt 
e 
 
 needed to punish a cheater increases at 
least as fast as the product of the temptations to cheat along the data 
path 
∏ −− 
≥ 
 
 
pathdataon 
 
t 
rt 
i i 
i 
t 
rt 
e 
y 
e 
n 
π 
 
corollary if nodes share a minimum temptation to cheat π y 
the discounted time needed to punish cheating increases at least 
exponentially in the length of the data path n 
−− 
≥ 
 
 
t 
rt 
nt 
rt 
e 
y 
e 
n 
π 
 
since it is the discounted time that increases exponentially the 
actual time increases faster than exponentially if n is so large that 
tn is undefined the given path cannot be maintained in equilibrium 
proof the proof proceeds by induction on the number of nodes on 
the equilibrium data path n for n there is a single node say i 
by cheating the node earns extra profit − 
− 
 
 
t 
rt 
ii ey π if node i 
is then punished until time t the extra profit must be cancelled out 
by the lost profit between time t and t − 
 
t 
t 
rt 
i eπ a little 
manipulation gives −− 
 
 
 
t 
rt 
i 
i 
t 
rt 
e 
y 
e 
π 
 as required 
for n assume for induction that the claim holds for −n the 
source does not know whether the cheater is the first hop or after 
the first hop because the source does not know the data path after 
the first hop it is unable to punish nodes beyond it if it chooses a 
new first hop it might not affect the rest of the data path because 
of this the source must rely on the first hop to punish cheating 
nodes farther along the path the first hop needs discounted time 
∏ − 
 
hopfirstafter 
t 
rt 
i i 
i e 
y 
π 
 to accomplish this by assumption so 
the source must give the first hop this much discounted time in order 
to punish defectors further down the line and the source will expect 
poor quality during this period 
next the source must be protected against a first hop that cheats 
and pretends that the problem is later in the path the first hop can 
 
do this for the full discounted time ∏ − 
 
hopfirstafter 
t 
rt 
i i 
i e 
y 
π 
 so 
the source must punish the first hop long enough to remove the extra 
profit it can make following the same argument as for n we 
can show that the full discounted time is ∏ − 
 
pathdataon 
t 
rt 
i i 
i e 
y 
π 
 
which completes the proof 
the above lemma and its corollary show that punishing cheaters 
becomes more and more difficult as the data path grows long until 
doing so is impossible to capture some intuition behind this result 
imagine that you are an end user and you notice a sudden drop in 
service quality if your data only travels through your access 
provider you know it is that provider s fault you can therefore 
take your business elsewhere at least for some time this threat 
should motivate your provider to maintain high quality 
suppose on the other hand that your data traverses two providers 
when you complain to your isp he responds yes we know your 
quality went down but it s not our fault it s the next isp give us 
some time to punish them and then normal quality will resume if 
your access provider is telling the truth you will want to listen 
since switching access providers may not even route around the 
actual offender thus you will have to accept lower quality service 
for some longer time on the other hand you may want to punish 
your access provider as well in case he is lying this means you 
have to wait longer to resume normal service as more isps are 
added to the path the time increases in a recursive fashion 
with this lemma in hand we can return to prove claim 
proof of claim fix an equilibrium data path of length n label 
the path nodes   n for each node i let i s quality premium be 
 − iii ppd then we have 
 
 
− 
 
− 
 
 
 
− 
 
 
 
 
− − 
−− 
−− 
 
−− 
− 
 
−− 
 
n 
i 
i 
n 
i iii 
iii 
n 
i iii 
ii 
n 
i i 
iii 
c 
g 
npcp 
pcp 
n 
pcp 
pp 
nd 
pcp 
n 
i 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
where gi is node i s temptation to cheat by routing to the lowest 
price next hop lemma tells us that tg 
n 
i 
i ∏ 
 
 where 
 rt 
et − 
− it requires a bit of calculus to show that ic is 
minimized by setting each gi equal to n 
t 
 however as ∞→n 
we have 
→n 
t which shows that ∞→ci 
according to the claim as the data path grows long it increasingly 
resembles a lowest-price path since lowest-price routing does not 
support innovation we may speculate that innovation degrades with 
the length of the data path though we suspect stronger claims are 
possible we can demonstrate one such result by including an extra 
assumption 
available bargain path a competitive market exists for 
lowcost transit such that every node can route to the destination for 
no more than flow payment lp 
claim under the available bargain path assumption if node i a 
distance n from s can invest to alter its quality and the source will 
spend no more than sp for a route including node i s new quality 
then the payment to node i p decreases hyperbolically with n 
 
 s 
n 
l p 
n 
t 
pp 
 
 
− 
 ≤ 
− 
 
where rt 
et − 
− is the bound on the product of temptations 
from the previous claim thus i will spend no more than 
 
 − 
 
− 
s 
n 
l p 
n 
t 
p 
r 
 
on this quality improvement which 
approaches the bargain path s payment 
r 
pl 
 as ∞→n 
the proof is given in the appendix as a node gets farther from the 
source its maximum payment approaches the bargain price pl 
hence the reward for innovation is bounded by the same amount 
large innovations meaning substantially more expensive than 
rpl will not be pursued deep into the network 
claim can alternately be viewed as a lower bound on how much it 
costs to elicit innovation in a network if the source s wants node i 
to innovate it needs to get a motivating payment p to i during the 
routing stage however it must also pay the nodes on the way to i a 
premium in order to motivate them to route properly the claim 
shows that this premium increases with the distance to i until it 
dwarfs the original payment p 
our claims stand in sharp contrast to our null hypothesis from the 
introduction comparing the intuitive argument that supported our 
hypothesis with these claims we can see that we implicitly used an 
oversimplified model of market pressure as either present or not 
as is now clear market pressure relies on the decisions of 
customers but these are limited by the lack of information hence 
competitive forces degrade as the network deepens 
 verifiable monitors 
in this section we begin to introduce more accountability into the 
network recall that in the previous section we assumed that 
players couldn t convince each other of their private information 
what would happen if they could if a monitor s informational 
signal can be credibly conveyed to others we will call it a verifiable 
monitor the monitor s output in this case can be thought of as a 
statement accompanied by a proof a string that can be processed by 
any player to determine that the statement is true 
a verifiable monitor is a distributed algorithmic mechanism that 
runs on the network graph and outputs to specific nodes proofs 
about current or past network behavior 
along these lines we can imagine verifiable counterparts to e e 
and rop we will label these e ev and ropv with these 
monitors each node observes the quality of the rest of the path and 
can also convince other players of these observations by giving 
them a proof 
 
by adding verifiability to our monitors identifying a single cheater 
is straightforward the cheater is the node that cannot produce 
proof that the rest of path quality decreased this means that the 
negative results of the previous section no longer hold for 
example the following lemma stands in contrast to lemma 
lemma with monitors e ev ropv and prc and provided that 
the node before each potential cheater has an alternate next hop that 
isn t more expensive it is possible to enforce any data path in spe 
so long as the maximum temptation is less than what can be deterred 
in finite time 
− 
≤ 
 
 
max 
 
t 
rt 
er 
y 
π 
 
proof this lemma follows because nodes can share proofs to 
identify who the cheater is only that node must be punished in 
equilibrium and the preceding node does not lose any payoff in 
administering the punishment 
with this lemma in mind it is easy to construct counterexamples to 
claim and claim in this new environment 
unfortunately there are at least four reasons not to be satisfied with 
this improved monitoring system the first and weakest reason is 
that the maximum temptation remains finite causing some 
distortion in routes or payments each node along a route must 
extract some positive profit unless the next hop is also the cheapest 
of course if t is small this effect is minimal 
the second and more serious reason is that we have always given 
our source the ability to commit to any punishment real world 
users are less likely to act collectively and may simply search for 
the best service currently offered since punishment phases are 
generally characterized by a drop in quality real world end-users 
may take this opportunity to shop for a new access provider this 
will make nodes less motivated to administer punishments 
the third reason is that lemma does not apply to cheating by 
coalitions a coalition node may pretend to punish its successor 
but instead enjoy a secret payment from the cheating node 
alternately a node may bribe its successor to cheat if the 
punishment phase is profitable and so forth the required 
discounted time for punishment may increase exponentially in the 
number of coalition members just as in the previous section 
the final reason not to accept this monitoring system is that when a 
cheater is punished the path will often be routed around not just the 
offender but around other nodes as well effectively innocent 
nodes will be punished along with the guilty in our abstract model 
this doesn t cause trouble since the punishment falls off the 
equilibrium path the effects are not so benign in the real world 
when isps lie in sequence along a data path they contribute 
complementary services and their relationship is vertical from the 
perspective of other source-destination pairs however these same 
firms are likely to be horizontal competitors because of this a 
node might deliberately cheat in order to trigger punishment for 
itself and its neighbors by cheating the node will save money to 
some extent so the cheater is likely to emerge from the punishment 
phase better off than the innocent nodes this may give the cheater 
a strategic advantage against its competitors in the extreme the 
cheater may use such a strategy to drive neighbors out of business 
and thereby gain a monopoly on some routes 
 contractible monitors 
at the end of the last section we identified several drawbacks that 
persist in an environment with e ev ropv and prc in this 
section we will show how all of these drawbacks can be overcome 
to do this we will require our third and final category of monitor 
a contractible monitor is simply a verifiable monitor that generates 
proofs that can serve as input to a contract thus contractible is 
jointly a property of the monitor and the institutions that must verify 
its proofs contractibility requires that a court 
 can verify the monitor s proofs 
 can understand what the proofs and contracts represent to 
the extent required to police illegal activity 
 can enforce payments among contracting parties 
understanding the agreements between companies has traditionally 
been a matter of reading contracts on paper this may prove to be a 
harder task in a future network setting contracts may plausibly be 
negotiated by machine be numerous even per-flow and be further 
complicated by the many dimensions of quality 
when a monitor together with institutional infrastructure meets 
these criteria we will label it with a subscript c for contractible 
the reader may recall that this is how we labeled the packets 
received monitor prc which allows isps to form contracts with 
per-packet payments similarly e ec and ropc are contractible 
versions of the monitors we are now familiar with 
at the end of the previous section we argued for some desirable 
properties that we d like our solution to have briefly we would 
like to enforce optimal data paths with an equilibrium concept that 
doesn t rely on re-routing for punishment is coalition proof and 
doesn t punish innocent nodes when a coalition cheats we will call 
such an equilibrium a fixed-route coalition-proof 
protect-theinnocent equilibrium 
as the next claim shows ropc allows us to create a system of 
linear price quality contracts under just such an equilibrium 
claim with ropc for any feasible and consistent assignment of 
rest of path qualities to nodes and any corresponding payment 
schedule that yields non-negative payoffs these qualities can be 
maintained with bilateral contracts in a fixed-route coalition-proof 
protect-the-innocent equilibrium 
proof fix any data path consistent with the given rest of path 
qualities select some monetary punishment p large enough to 
prevent any cheating for time t the discounted total payment from 
the source will work let each node on the path enter into a 
contract with its parent which fixes an arbitrary payment schedule 
so long as the rest of path quality is as prescribed when the parent 
node which has ropc submits a proof that the rest of path quality 
is less than expected the contract awards her an instantaneous 
transfer p from the downstream node such proofs can be 
submitted every t for the previous interval 
suppose now that a coalition c decides to cheat the source 
measures a decrease in quality and according to her contract is 
awarded p from the first hop this means that there is a net outflow 
of p from the isps as a whole suppose that node i is not in c in 
order for the parent node to claim p from i it must submit proof that 
the quality of the path starting at i is not as prescribed this means 
 
that there is a cheater after i hence i would also have detected a 
change in quality so i can claim p from the next node on the path 
thus innocent nodes are not punished the sequence of payments 
must end by the destination so the net outflow of p must come from 
the nodes in c this establishes all necessary conditions of the 
equilibrium 
essentially ropc allows for an implementation of price quality 
contracts building upon this result we can construct competition 
games in which nodes offer various qualities to each other at 
specified prices and can credibly commit to meet these 
performance targets even allowing for coalitions and a desire to 
damage other isps 
example define a stackelberg price-quality competition game 
as follows extend the partial order of nodes induced by the graph 
to any complete ordering such that downstream nodes appear 
before their parents in this order each node selects a contract to 
offer to its parents consisting of a rest of path quality and a linear 
price in the routing game each node selects a next hop at every 
time consistent with its advertised rest of path quality the 
stackelberg price-quality competition game can be implemented in 
our model with ropc monitors by using the strategy in the proof 
above it has the following useful property 
claim the stackelberg price-quality competition game yields 
optimal routes in spe 
the proof is given in the appendix this property is favorable from 
an innovation perspective since firms that invest in high quality will 
tend to fall on the optimal path gaining positive payoff in general 
however investments may be over or under rewarded extra 
conditions may be given under which innovation decisions approach 
perfect efficiency for large innovations we omit the full analysis 
here 
example alternately we can imagine that players report their 
private information to a central authority which then assigns all 
contracts for example contracts could be computed to implement 
the cost-minimizing vcg mechanism proposed by feigenbaum et 
al in with ropc monitors we can adapt this mechanism to 
maximize welfare for node i on the optimal path l the net 
payment must equal essentially its contribution to the welfare of s 
d and the other nodes if l is an optimal path in the graph with i 
removed the profit flow to i is 
 
∈≠∈ 
 −− 
 
 
lj 
j 
ijlj 
jll ccququ 
where lq and lq are the qualities of the two paths here price 
quality contracts ensure that nodes report their qualities honestly 
the incentive structure of the vcg mechanism is what motivates 
nodes to report their costs accurately 
a nice feature of this game is that individual innovation decisions 
are efficient meaning that a node will invest in an innovation 
whenever the investment cost is less than the increased welfare of 
the optimal data path unfortunately the source may end up paying 
more than the utility of the path 
notice that with just e ec a weaker version of claim holds 
bilateral price quality contracts can be maintained in an 
equilibrium that is fixed-route and coalition-proof but not 
protectthe-innocent this is done by writing contracts to punish everyone 
on the path when the end to end quality drops if the path length is 
n the first hop pays np to the source the second hop pays pn − 
to the first and so forth this ensures that every node is punished 
sufficiently to make cheating unprofitable for the reasons we gave 
previously we believe that this solution concept is less than ideal 
since it allows for malicious nodes to deliberately trigger 
punishments for potential competitors 
up to this point we have adopted fixed-route coalition-proof 
protect-the-innocent equilibrium as our desired solution concept 
and shown that ropc monitors are sufficient to create some 
competition games that are desirable in terms of service diversity 
and innovation as the next claim will show rest of path 
monitoring is also necessary to construct such games under our 
solution concept 
before we proceed what does it mean for a game to be desirable 
from the perspective of service diversity and innovation we will 
use a very weak assumption essentially that the game is not fully 
commoditized for any node the claim will hold for this entire class 
of games 
definition a competition game is nowhere-commoditized if for 
each node i not adjacent to d there is some assignment of qualities 
and marginal costs to nodes such that the optimal data path includes 
i and i has a positive temptation to cheat 
in the case of linear contracts it is sufficient to require that ∞ ci 
and that every node make positive profit under some assignment of 
qualities and marginal costs 
strictly speaking ropc monitors are not the only way to construct 
these desirable games to prove the next claim we must broaden 
our notion of rest of path monitoring to include the similar ropc 
monitor which attests to the quality starting at its own node 
through the end of the path compare the two monitors below 
ropc gives a node proof that the path quality from the next node 
to the destination is not correct 
ropc gives a node proof that the path quality from that node to 
the destination is correct 
we present a simplified version of this claim by including an 
assumption that only one node on the path can cheat at a time 
 though conspirators can still exchange side payments we will 
discuss the full version after the proof 
claim assume a set of monitors and a nowhere-commoditized 
bilateral contract competition game that always maintains the 
optimal quality in fixed-route coalition-proof protect-the-innocent 
equilibrium with only one node allowed to cheat at a time then 
for each node i not adjacent to d either i has an ropc monitor or 
i s children each have an ropc monitor 
proof first because of the fixed-route assumption punishments 
must be purely monetary 
next when cheating occurs if the payment does not go to the 
source or destination it may go to another coalition member 
rendering it ineffective thus the source must accept some 
monetary compensation net of its normal flow payment when 
cheating occurs since the source only contracts with the first hop 
it must accept this money from the first hop the source s contract 
must therefore distinguish when the path quality is normal from 
when it is lowered by cheating to do so it can either accept proofs 
 
from the source that the quality is lower than required or it can 
accept proofs from the first hop that the quality is correct these 
nodes will not rationally offer the opposing type of proof 
by definition any monitor that gives the source proof that the path 
quality is wrong is an ropc monitor any monitor that gives the 
first hop proof that the quality is correct is a ropc monitor thus 
at least one of these monitors must exist 
by the protect-the-innocent assumption if cheating occurs but the 
first hop is not a cheater she must be able to claim the same size 
reward from the next isp on the path and thus pass on the 
punishment the first hop s contract with the second must then 
distinguish when cheating occurs after the first hop by argument 
similar to that for the source either the first hop has a ropc 
monitor or the second has a ropc monitor this argument can be 
iterated along the entire path to the penultimate node before d 
since the marginal costs and qualities can be arranged to make any 
path the optimal path these statements must hold for all nodes and 
their children which completes the proof 
the two possibilities for monitor correspond to which node has the 
burden of proof in one case the prior node must prove the 
suboptimal quality to claim its reward in the other the subsequent 
node must prove that the quality was correct to avoid penalty 
because the two monitors are similar it seems likely that they 
require comparable costs to implement if submitting the proofs is 
costly it seems natural that nodes would prefer to use the ropc 
monitor placing the burden of proof on the upstream node 
finally we note that it is straightforward to derive the full version of 
the claim which allows for multiple cheaters the only 
complication is that cheaters can exchange side payments which 
makes any money transfers between them redundant because of 
this we have to further generalize our rest of path monitors so they 
are less constrained in the case that there are cheaters on either side 
 implementing monitors 
claim should not be interpreted as a statement that each node must 
compute the rest of path quality locally without input from other 
nodes other monitors besides ropc and ropc can still be used 
loosely speaking as building blocks for instance network 
tomography is concerned with measuring properties of the network 
interior with tools located at the edge using such techniques our 
source might learn both individual node qualities and the data path 
this is represented by the following two monitors 
shopc 
i 
 source-based hop quality a monitor that gives the 
source proof of what the quality of node i is 
spathc source-based path a monitor that gives the source 
proof of what the data path is at any time at least as far as it 
matches the equilibrium path 
with these monitors a punishment mechanism can be designed to 
fulfill the conditions of claim it involves the source sharing the 
proofs it generates with nodes further down the path which use 
them to determine bilateral payments ultimately however the 
proof of claim shows us that each node i s bilateral contracts 
require proof of the rest of path quality this means that node i or 
possibly its children will have to combine the proofs that they 
receive to generate a proof of the rest of path quality thus the 
combined process is itself a rest of path monitor 
what we have done all in all is constructed a rest of path monitor 
using spathc and shopc 
i 
as building blocks our new monitor 
includes both the component monitors and whatever distributed 
algorithmic mechanism exists to make sure nodes share their proofs 
correctly 
this mechanism can potentially involve external institutions for a 
concrete example suppose that when node i suspects it is getting 
poor rest of path quality from its successor it takes the downstream 
node to court during the discovery process the court subpoenas 
proofs of the path and of node qualities from the source ultimately 
there must be some threat to ensure the source complies finally 
for the court to issue a judgment one party or the other must 
compile a proof of what the rest of path quality was hence the 
entire discovery process acts as a rest of path monitor albeit a rather 
costly monitor in this case 
of course mechanisms can be designed to combine these monitors 
at much lower cost typically such mechanisms would call for 
automatic sharing of proofs with court intervention only as a last 
resort we defer these interesting mechanisms to future work 
as an aside intuition might dictate that shopc 
i 
generates more 
information than ropc after all inferring individual node qualities 
seems a much harder problem yet without path information 
shopc 
i 
is not sufficient for our first-best innovation result the 
proof of this demonstrates a useful technique 
claim with monitors e e rop shopc 
i 
and prc and a 
nowhere-commoditized bilateral contract competition game the 
optimal quality cannot be maintained for all assignments of quality 
and marginal cost in fixed-route coalition-proof 
protect-theinnocent equilibrium 
proof because nodes cannot verify the data path they cannot form 
a proof of what the rest of path quality is hence ropc monitors do 
not exist and therefore the requirements of claim cannot hold 
 conclusions and future work 
it is our hope that this study will have a positive impact in at least 
three different ways the first is practical we believe our analysis 
has implications for the design of future monitoring protocols and 
for public policy 
for protocol designers we first provide fresh motivation to create 
monitoring systems we have argued that the poor accountability of 
the internet is a fundamental obstacle to alleviating the pathologies 
of commoditization and lack of innovation unless accountability 
improves these pathologies are guaranteed to remain 
secondly we suggest directions for future advances in monitoring 
we have shown that adding verifiability to monitors allows for 
some improvements in the characteristics of competition at the 
same time this does not present a fully satisfying solution this 
paper has suggested a novel standard for monitors to aspire to - one 
of supporting optimal routes in innovative competition games under 
fixed-route coalition-proof protect-the-innocent equilibrium we 
have shown that under bilateral contracts this specifically requires 
contractible rest of path monitors 
this is not to say that other types of monitors are unimportant we 
included an example in which individual hop quality monitors and a 
path monitor can also meet our standard for sustaining competition 
however in order for this to happen a mechanism must be included 
 
to combine proofs from these monitors to form a proof of rest of 
path quality in other words the monitors must ultimately be 
combined to form contractible rest of path monitors to support 
service differentiation and innovation it may be easier to design rest 
of path monitors directly thereby avoiding the task of designing 
mechanisms for combining component monitors 
as far as policy implications our analysis points to the need for 
legal institutions to enforce contracts based on quality these 
institutions must be equipped to verify proofs of quality and police 
illegal contracting behavior as quality-based contracts become 
numerous and complicated and possibly negotiated by machine 
this may become a challenging task and new standards and 
regulations may have to emerge in response this remains an 
interesting and unexplored area for research 
the second area we hope our study will benefit is that of clean-slate 
architectural design traditionally clean-slate design tends to focus 
on creating effective and elegant networks for a static set of 
requirements thus the approach is often one of engineering 
which tends to neglect competitive effects we agree with 
ratnasamy shenker and mccanne that designing for evolution 
should be a top priority we have demonstrated that the 
network s monitoring ability is critical to supporting innovation as 
are the institutions that support contracting these elements should 
feature prominently in new designs our analysis specifically 
suggests that architectures based on bilateral contracts should 
include contractible rest of path monitoring from a clean-slate 
perspective these monitors can be transparently and fully integrated 
with the routing and contracting systems 
finally the last contribution our study makes is methodological 
we believe that the mathematical formalization we present is 
applicable to a variety of future research questions while a 
significant literature addresses innovation in the presence of 
network effects to the best of our knowledge ours is the first model 
of innovation in a network industry that successfully incorporates 
the actual topological structure as input this allows the discovery 
of new properties such as the weakening of market forces with the 
number of isps on a data path that we observe with 
lowaccountability 
our method also stands in contrast to the typical approach of 
distributed algorithmic mechanism design because this field is 
based on a principle-agent framework contracts are usually 
proposed by the source who is allowed to make a take it or leave it 
offer to network nodes our technique allows contracts to emerge 
from a competitive framework so the source is limited to selecting 
the most desirable contract we believe this is a closer reflection of 
the industry 
based on the insights in this study the possible directions for future 
research are numerous and exciting to some degree contracting 
based on quality opens a pandora s box of pressing questions do 
quality-based contracts stand counter to the principle of network 
neutrality should isps be allowed to offer a choice of contracts at 
different quality levels what anti-competitive behaviors are 
enabled by quality-based contracts can a contracting system 
support optimal multicast trees 
in this study we have focused on bilateral contracts this system 
has seemed natural especially since it is the prevalent system on the 
current network perhaps its most important benefit is that each 
contract is local in nature so both parties share a common familiar 
legal jurisdiction there is no need to worry about who will enforce 
a punishment against another isp on the opposite side of the planet 
nor is there a dispute over whose legal rules to apply in interpreting 
a contract 
although this benefit is compelling it is worth considering other 
systems the clearest alternative is to form a contract between the 
source and every node on the path we may call these source 
contracts source contracting may present surprising advantages 
for instance since isps do not exchange money with each other an 
isp cannot save money by selecting a cheaper next hop 
additionally if the source only has contracts with nodes on the 
intended path other nodes won t even be willing to accept packets 
from this source since they won t receive compensation for carrying 
them this combination seems to eliminate all temptation for a 
single cheater to cheat in route because of this and other 
encouraging features we believe source contracts are a fertile topic 
for further study 
another important research task is to relax our assumption that 
quality can be measured fully and precisely one possibility is to 
assume that monitoring is only probabilistic or suffers from noise 
even more relevant is the possibility that quality monitors are 
fundamentally incomplete a quality monitor can never anticipate 
every dimension of quality that future applications will care about 
nor can it anticipate a new and valuable protocol that an isp 
introduces we may define a monitor space as a subspace of the 
quality space that a monitor can measure qm ⊂ and a 
corresponding monitoring function that simply projects the full 
range of qualities onto the monitor space mqm → 
clearly innovations that leave quality invariant under m are not 
easy to support - they are invisible to the monitoring system in this 
environment we expect that path monitoring becomes more 
important since it is the only way to ensure data reaches certain 
innovator isps further research is needed to understand this 
process 
 acknowledgements 
we would like to thank the anonymous reviewers jens grossklags 
moshe babaioff scott shenker sylvia ratnasamy and hal varian 
for their comments this work is supported in part by the national 
science foundation under itr award ani- 
 references 
 afergan m using repeated games to design 
incentivebased routing systems in proceedings of ieee infocom 
 april 
 afergan m and wroclawski j on the benefits and 
feasibility of incentive based routing infrastructure in acm 
sigcomm workshop on practice and theory of incentives 
in networked systems pins august 
 argyraki k maniatis p cheriton d and shenker s 
providing packet obituaries in third workshop on hot topics 
in networks hotnets november 
 clark d d the design philosophy of the darpa internet 
protocols in proceedings of acm sigcomm 
 
 clark d d wroclawski j sollins k r and braden r 
tussle in cyberspace defining tomorrow s internet in 
proceedings of acm sigcomm august 
 dang-nguyen g and pénard t interconnection agreements 
strategic behaviour and property rights in brousseau e and 
glachant j m eds the economics of contracts theories and 
applications cambridge university press 
 feigenbaum j papadimitriou c sami r and shenker s 
a bgp-based mechanism for lowest-cost routing 
distributed computing pp - 
 huston g interconnection peering and settlements telstra 
australia 
 liu y zhang h gong w and towsley d on the 
interaction between overlay routing and traffic engineering 
in proceedings of ieee infocom 
 mackie-mason j and varian h pricing the internet in 
kahin b and keller j eds public access to the internet 
englewood cliffs nj prentice-hall 
 ratnasamy s shenker s and mccanne s towards an 
evolvable internet architecture in proceeding of acm 
sigcomm 
 shakkottai s and srikant r economics of network pricing 
with multiple isps in proceedings of ieee infocom 
 
 appendix 
proof of claim node i must fall on the equilibrium data path to 
receive any payment let the prices along the data path be 
ppppp ns with marginal costs ncc we may 
assume the prices on the path are greater than lp or the claim 
follows trivially each node along the data path can cheat in route 
by giving data to the bargain path at price no more than lp so 
node j s temptation to cheat is at least 
 − 
− 
≥ 
−− 
−− 
jj 
l 
jjj 
ljj 
pp 
pp 
pcp 
pcp 
 then lemma gives 
 
 
 
− 
− 
− 
− 
− 
− 
⋅⋅ 
− 
− 
− 
− 
≥ 
n 
s 
l 
n 
lll 
p 
pp 
n 
pp 
pp 
pp 
pp 
pp 
pp 
t 
this can be rearranged to give 
 
 s 
n 
l p 
n 
t 
pp 
 
 
− 
 ≤ 
− 
 as required 
the rest of the claim simply recognizes that rp is the greatest 
reward node i can receive for its investment so it will not invest 
sums greater than this 
proof of claim label the nodes n in the order in which 
they select contracts let subgame n be the game that begins with n 
choosing its contract let ln be the set of possible paths restricted to 
nodes n   n that is ln is the set of possible routes from s to 
reach some node that has already moved 
for subgame n define the local welfare over paths nll ∈ and their 
possible next hops nj as follows 
 j 
li 
ipathjl pcqqujlv −− 
∈ 
 
where ql is the quality of path l in the set n   n and pathjq and 
pj are the quality and price of the contract j has offered 
for induction assume that subgame n maximizes local welfare 
we show that subgame n does as well if node n selects next hop k 
we can write the following relation 
 nknn knlvpcpknlvnlv π− − 
where n is node n s profit if the path to n is chosen this path is 
chosen whenever nlv is maximal over ln and possible next 
hops if knlv is maximal over ln it is also maximal over the 
paths in ln that don t lead to n this means that node n can choose 
some n small enough so that nlv is maximal over ln so the 
route will lead to k 
conversely if knlv is not maximal over ln either v is greater 
for another of n s next hops in which case n will select that one in 
order to increase n or v is greater for some path in ln that don t 
lead to n in which case nlv cannot be maximal for any 
nonnegative n 
thus we conclude that subgame n maximizes local welfare for the 
initial case observe that this assumption holds for the source 
finally we deduce that subgame which is the entire game 
maximizes local welfare which is equivalent to actual welfare 
hence the stackelberg price-quality game yields an optimal route 
 
